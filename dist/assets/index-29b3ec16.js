var tu=Object.defineProperty;var nu=(n,e,r)=>e in n?tu(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var sn=(n,e,r)=>(nu(n,typeof e!="symbol"?e+"":e,r),r);import{r as C,a as ru,b as iu,c as au,d as De,R as Uo}from"./vendor-703682e6.js";import{m as D,Z as Q,R as Un,C as Ue,P as ga,B as oe,E as xt,F as fr,T as Ke,A as Cn,G as lt,a as mt,b as Ti,c as Xa,S as xa,d as Fn,e as st,U as su,f as Ci,g as Gt,h as ou,i as lu,X as En,j as Kt,k as cu,l as mr,n as Qa,K as _n,M as Ei,o as uu,V as Za,p as du,D as gr,q as Fo,r as es,s as hu,t as pu,u as fu,v as mu,w as ts,x as ns,y as gu,z as Bo,H as xu,I as vu,J as yu,L as bu,N as va,O as qo,Q as xr,W as wu,Y as _u,_ as vr,$ as Pi,a0 as ju,a1 as ku,a2 as Su,a3 as rs,a4 as Nu,a5 as Au}from"./ui-350c1e9c.js";import{P as $,R as $u,A as Tu,C as Cu,X as Eu,Y as Pu,T as Iu,a as Ou,i as Ru,c as is,b as as,d as Du,e as Mu,f as zu,g as Lu,o as Uu,s as Fu,m as ss,h as os}from"./charts-f48fdfbf.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Ho={exports:{}},zr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bu=C,qu=Symbol.for("react.element"),Hu=Symbol.for("react.fragment"),Wu=Object.prototype.hasOwnProperty,Gu=Bu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ku={key:!0,ref:!0,__self:!0,__source:!0};function Wo(n,e,r){var i,a={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Wu.call(e,i)&&!Ku.hasOwnProperty(i)&&(a[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)a[i]===void 0&&(a[i]=e[i]);return{$$typeof:qu,type:n,key:s,ref:o,props:a,_owner:Gu.current}}zr.Fragment=Hu;zr.jsx=Wo;zr.jsxs=Wo;Ho.exports=zr;var l=Ho.exports,Go,ls=ru;Go=ls.createRoot,ls.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pn(){return Pn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Pn.apply(this,arguments)}var gt;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(gt||(gt={}));const cs="popstate";function Vu(n){n===void 0&&(n={});function e(i,a){let{pathname:s,search:o,hash:c}=i.location;return Ii("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){return typeof a=="string"?a:yr(a)}return Yu(e,r,null,n)}function pe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ko(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ju(){return Math.random().toString(36).substr(2,8)}function us(n,e){return{usr:n.state,key:n.key,idx:e}}function Ii(n,e,r,i){return r===void 0&&(r=null),Pn({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?en(e):e,{state:r,key:e&&e.key||i||Ju()})}function yr(n){let{pathname:e="/",search:r="",hash:i=""}=n;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function en(n){let e={};if(n){let r=n.indexOf("#");r>=0&&(e.hash=n.substr(r),n=n.substr(0,r));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function Yu(n,e,r,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:s=!1}=i,o=a.history,c=gt.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Pn({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){c=gt.Pop;let v=h(),g=v==null?null:v-d;d=v,u&&u({action:c,location:y.location,delta:g})}function f(v,g){c=gt.Push;let b=Ii(y.location,v,g);r&&r(b,v),d=h()+1;let S=us(b,d),j=y.createHref(b);try{o.pushState(S,"",j)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(j)}s&&u&&u({action:c,location:y.location,delta:1})}function m(v,g){c=gt.Replace;let b=Ii(y.location,v,g);r&&r(b,v),d=h();let S=us(b,d),j=y.createHref(b);o.replaceState(S,"",j),s&&u&&u({action:c,location:y.location,delta:0})}function x(v){let g=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof v=="string"?v:yr(v);return b=b.replace(/ $/,"%20"),pe(g,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,g)}let y={get action(){return c},get location(){return n(a,o)},listen(v){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(cs,p),u=v,()=>{a.removeEventListener(cs,p),u=null}},createHref(v){return e(a,v)},createURL:x,encodeLocation(v){let g=x(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:m,go(v){return o.go(v)}};return y}var ds;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ds||(ds={}));function Xu(n,e,r){return r===void 0&&(r="/"),Qu(n,e,r,!1)}function Qu(n,e,r,i){let a=typeof e=="string"?en(e):e,s=ya(a.pathname||"/",r);if(s==null)return null;let o=Vo(n);Zu(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=ud(s);c=ld(o[u],d,i)}return c}function Vo(n,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let a=(s,o,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(pe(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let d=vt([i,u.relativePath]),h=r.concat(u);s.children&&s.children.length>0&&(pe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Vo(s.children,e,h,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:sd(d,s.index),routesMeta:h})};return n.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))a(s,o);else for(let u of Jo(s.path))a(s,o,u)}),e}function Jo(n){let e=n.split("/");if(e.length===0)return[];let[r,...i]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(i.length===0)return a?[s,""]:[s];let o=Jo(i.join("/")),c=[];return c.push(...o.map(u=>u===""?s:[s,u].join("/"))),a&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function Zu(n){n.sort((e,r)=>e.score!==r.score?r.score-e.score:od(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const ed=/^:[\w-]+$/,td=3,nd=2,rd=1,id=10,ad=-2,hs=n=>n==="*";function sd(n,e){let r=n.split("/"),i=r.length;return r.some(hs)&&(i+=ad),e&&(i+=nd),r.filter(a=>!hs(a)).reduce((a,s)=>a+(ed.test(s)?td:s===""?rd:id),i)}function od(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function ld(n,e,r){r===void 0&&(r=!1);let{routesMeta:i}=n,a={},s="/",o=[];for(let c=0;c<i.length;++c){let u=i[c],d=c===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=ps({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),f=u.route;if(!p&&d&&r&&!i[i.length-1].route.index&&(p=ps({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:vt([s,p.pathname]),pathnameBase:fd(vt([s,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(s=vt([s,p.pathnameBase]))}return o}function ps(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,i]=cd(n.path,n.caseSensitive,n.end),a=e.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:i.reduce((d,h,p)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let y=c[p]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const x=c[p];return m&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:n}}function cd(n,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Ko(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(i.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function ud(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ko(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function ya(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=n.charAt(r);return i&&i!=="/"?null:n.slice(r)||"/"}function dd(n,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:a=""}=typeof n=="string"?en(n):n;return{pathname:r?r.startsWith("/")?r:hd(r,e):e,search:md(i),hash:gd(a)}}function hd(n,e){let r=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function ui(n,e,r,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pd(n){return n.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Yo(n,e){let r=pd(n);return e?r.map((i,a)=>a===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function Xo(n,e,r,i){i===void 0&&(i=!1);let a;typeof n=="string"?a=en(n):(a=Pn({},n),pe(!a.pathname||!a.pathname.includes("?"),ui("?","pathname","search",a)),pe(!a.pathname||!a.pathname.includes("#"),ui("#","pathname","hash",a)),pe(!a.search||!a.search.includes("#"),ui("#","search","hash",a)));let s=n===""||a.pathname==="",o=s?"/":a.pathname,c;if(o==null)c=r;else{let p=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),p-=1;a.pathname=f.join("/")}c=p>=0?e[p]:"/"}let u=dd(a,c),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const vt=n=>n.join("/").replace(/\/\/+/g,"/"),fd=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),md=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gd=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function xd(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Qo=["post","put","patch","delete"];new Set(Qo);const vd=["get",...Qo];new Set(vd);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function In(){return In=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},In.apply(this,arguments)}const ba=C.createContext(null),yd=C.createContext(null),Et=C.createContext(null),Lr=C.createContext(null),yt=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Zo=C.createContext(null);function bd(n,e){let{relative:r}=e===void 0?{}:e;Bn()||pe(!1);let{basename:i,navigator:a}=C.useContext(Et),{hash:s,pathname:o,search:c}=tl(n,{relative:r}),u=o;return i!=="/"&&(u=o==="/"?i:vt([i,o])),a.createHref({pathname:u,search:c,hash:s})}function Bn(){return C.useContext(Lr)!=null}function qn(){return Bn()||pe(!1),C.useContext(Lr).location}function el(n){C.useContext(Et).static||C.useLayoutEffect(n)}function wd(){let{isDataRoute:n}=C.useContext(yt);return n?Od():_d()}function _d(){Bn()||pe(!1);let n=C.useContext(ba),{basename:e,future:r,navigator:i}=C.useContext(Et),{matches:a}=C.useContext(yt),{pathname:s}=qn(),o=JSON.stringify(Yo(a,r.v7_relativeSplatPath)),c=C.useRef(!1);return el(()=>{c.current=!0}),C.useCallback(function(d,h){if(h===void 0&&(h={}),!c.current)return;if(typeof d=="number"){i.go(d);return}let p=Xo(d,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:vt([e,p.pathname])),(h.replace?i.replace:i.push)(p,h.state,h)},[e,i,o,s,n])}function wa(){let{matches:n}=C.useContext(yt),e=n[n.length-1];return e?e.params:{}}function tl(n,e){let{relative:r}=e===void 0?{}:e,{future:i}=C.useContext(Et),{matches:a}=C.useContext(yt),{pathname:s}=qn(),o=JSON.stringify(Yo(a,i.v7_relativeSplatPath));return C.useMemo(()=>Xo(n,JSON.parse(o),s,r==="path"),[n,o,s,r])}function jd(n,e){return kd(n,e)}function kd(n,e,r,i){Bn()||pe(!1);let{navigator:a}=C.useContext(Et),{matches:s}=C.useContext(yt),o=s[s.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=qn(),h;if(e){var p;let v=typeof e=="string"?en(e):e;u==="/"||(p=v.pathname)!=null&&p.startsWith(u)||pe(!1),h=v}else h=d;let f=h.pathname||"/",m=f;if(u!=="/"){let v=u.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=Xu(n,{pathname:m}),y=Td(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:vt([u,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:vt([u,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r,i);return e&&y?C.createElement(Lr.Provider,{value:{location:In({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:gt.Pop}},y):y}function Sd(){let n=Id(),e=xd(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),r?C.createElement("pre",{style:a},r):null,s)}const Nd=C.createElement(Sd,null);class Ad extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?C.createElement(yt.Provider,{value:this.props.routeContext},C.createElement(Zo.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $d(n){let{routeContext:e,match:r,children:i}=n,a=C.useContext(ba);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),C.createElement(yt.Provider,{value:e},i)}function Td(n,e,r,i){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),i===void 0&&(i=null),n==null){var s;if(!r)return null;if(r.errors)n=r.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let o=n,c=(a=r)==null?void 0:a.errors;if(c!=null){let h=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);h>=0||pe(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(r&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:f,errors:m}=r,x=p.route.loader&&f[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,f)=>{let m,x=!1,y=null,v=null;r&&(m=c&&p.route.id?c[p.route.id]:void 0,y=p.route.errorElement||Nd,u&&(d<0&&f===0?(Rd("route-fallback",!1),x=!0,v=null):d===f&&(x=!0,v=p.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),b=()=>{let S;return m?S=y:x?S=v:p.route.Component?S=C.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=h,C.createElement($d,{match:p,routeContext:{outlet:h,matches:g,isDataRoute:r!=null},children:S})};return r&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?C.createElement(Ad,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}var nl=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(nl||{}),br=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(br||{});function Cd(n){let e=C.useContext(ba);return e||pe(!1),e}function Ed(n){let e=C.useContext(yd);return e||pe(!1),e}function Pd(n){let e=C.useContext(yt);return e||pe(!1),e}function rl(n){let e=Pd(),r=e.matches[e.matches.length-1];return r.route.id||pe(!1),r.route.id}function Id(){var n;let e=C.useContext(Zo),r=Ed(br.UseRouteError),i=rl(br.UseRouteError);return e!==void 0?e:(n=r.errors)==null?void 0:n[i]}function Od(){let{router:n}=Cd(nl.UseNavigateStable),e=rl(br.UseNavigateStable),r=C.useRef(!1);return el(()=>{r.current=!0}),C.useCallback(function(a,s){s===void 0&&(s={}),r.current&&(typeof a=="number"?n.navigate(a):n.navigate(a,In({fromRouteId:e},s)))},[n,e])}const fs={};function Rd(n,e,r){!e&&!fs[n]&&(fs[n]=!0)}function Dd(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Pe(n){pe(!1)}function Md(n){let{basename:e="/",children:r=null,location:i,navigationType:a=gt.Pop,navigator:s,static:o=!1,future:c}=n;Bn()&&pe(!1);let u=e.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:u,navigator:s,static:o,future:In({v7_relativeSplatPath:!1},c)}),[u,c,s,o]);typeof i=="string"&&(i=en(i));let{pathname:h="/",search:p="",hash:f="",state:m=null,key:x="default"}=i,y=C.useMemo(()=>{let v=ya(h,u);return v==null?null:{location:{pathname:v,search:p,hash:f,state:m,key:x},navigationType:a}},[u,h,p,f,m,x,a]);return y==null?null:C.createElement(Et.Provider,{value:d},C.createElement(Lr.Provider,{children:r,value:y}))}function zd(n){let{children:e,location:r}=n;return jd(Oi(e),r)}new Promise(()=>{});function Oi(n,e){e===void 0&&(e=[]);let r=[];return C.Children.forEach(n,(i,a)=>{if(!C.isValidElement(i))return;let s=[...e,a];if(i.type===C.Fragment){r.push.apply(r,Oi(i.props.children,s));return}i.type!==Pe&&pe(!1),!i.props.index||!i.props.children||pe(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Oi(i.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ri(){return Ri=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Ri.apply(this,arguments)}function Ld(n,e){if(n==null)return{};var r={},i=Object.keys(n),a,s;for(s=0;s<i.length;s++)a=i[s],!(e.indexOf(a)>=0)&&(r[a]=n[a]);return r}function Ud(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Fd(n,e){return n.button===0&&(!e||e==="_self")&&!Ud(n)}const Bd=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qd="6";try{window.__reactRouterVersion=qd}catch{}const Hd="startTransition",ms=iu[Hd];function Wd(n){let{basename:e,children:r,future:i,window:a}=n,s=C.useRef();s.current==null&&(s.current=Vu({window:a,v5Compat:!0}));let o=s.current,[c,u]=C.useState({action:o.action,location:o.location}),{v7_startTransition:d}=i||{},h=C.useCallback(p=>{d&&ms?ms(()=>u(p)):u(p)},[u,d]);return C.useLayoutEffect(()=>o.listen(h),[o,h]),C.useEffect(()=>Dd(i),[i]),C.createElement(Md,{basename:e,children:r,location:c.location,navigationType:c.action,navigator:o,future:i})}const Gd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,we=C.forwardRef(function(e,r){let{onClick:i,relative:a,reloadDocument:s,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:p}=e,f=Ld(e,Bd),{basename:m}=C.useContext(Et),x,y=!1;if(typeof d=="string"&&Kd.test(d)&&(x=d,Gd))try{let S=new URL(window.location.href),j=d.startsWith("//")?new URL(S.protocol+d):new URL(d),w=ya(j.pathname,m);j.origin===S.origin&&w!=null?d=w+j.search+j.hash:y=!0}catch{}let v=bd(d,{relative:a}),g=Vd(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:a,viewTransition:p});function b(S){i&&i(S),S.defaultPrevented||g(S)}return C.createElement("a",Ri({},f,{href:x||v,onClick:y||s?i:b,ref:r,target:u}))});var gs;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(gs||(gs={}));var xs;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(xs||(xs={}));function Vd(n,e){let{target:r,replace:i,state:a,preventScrollReset:s,relative:o,viewTransition:c}=e===void 0?{}:e,u=wd(),d=qn(),h=tl(n,{relative:o});return C.useCallback(p=>{if(Fd(p,r)){p.preventDefault();let f=i!==void 0?i:yr(d)===yr(h);u(n,{replace:f,state:a,preventScrollReset:s,relative:o,viewTransition:c})}},[d,u,h,i,a,r,n,s,o,c])}const il=C.createContext(void 0),fe=()=>{const n=C.useContext(il);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},Jd=({children:n})=>{const[e,r]=C.useState(!0);C.useEffect(()=>{const a=localStorage.getItem("theme");a?r(a==="dark"):(r(!0),localStorage.setItem("theme","dark"))},[]),C.useEffect(()=>{localStorage.setItem("theme",e?"dark":"light"),e?(document.documentElement.classList.add("dark"),document.body.style.backgroundColor="#000000"):(document.documentElement.classList.remove("dark"),document.body.style.backgroundColor="#ffffff")},[e]);const i=()=>{r(!e)};return l.jsx(il.Provider,{value:{isDark:e,toggleTheme:i},children:n})},Yd=()=>{const{isDark:n}=fe(),[e,r]=C.useState(null),[i,a]=C.useState(!1),[s,o]=C.useState(new Date),[c,u]=C.useState(!0),d=[{id:"1",headline:"AI-Powered Verification Systems Detect 15,000 Deepfakes in Real-Time",timestamp:new Date().toISOString(),source:"Global AI Security Network",category:"technology",summary:"Advanced neural networks successfully identified and flagged sophisticated deepfake content across major platforms in the last 30 seconds, preventing potential misinformation spread to millions of users.",imageUrl:"https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=800",references:["MIT AI Lab Real-time Detection Report","Stanford Digital Forensics Institute","Global Platform Security Alliance"],trustScore:96,urgencyLevel:"high",tags:["AI","Deepfakes","Real-time","Security","Verification"],readingTime:3,verificationStatus:"verified",aiConfidence:94},{id:"2",headline:"Breaking: Quantum Computing Breakthrough Achieved in Live Laboratory",timestamp:new Date(Date.now()-45e3).toISOString(),source:"Quantum Research Consortium",category:"technology",summary:"Scientists achieve stable 1000-qubit quantum state for 12 consecutive seconds, marking a revolutionary milestone in quantum computing stability and practical applications.",imageUrl:"https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=800",videoUrl:"https://example.com/quantum-breakthrough",references:["Nature Quantum Information","IBM Quantum Network","European Quantum Initiative"],trustScore:98,urgencyLevel:"critical",tags:["Quantum","Computing","Breakthrough","Science"],readingTime:4,verificationStatus:"verified",aiConfidence:97},{id:"3",headline:"Real-Time Climate Monitoring Detects Rapid Arctic Ice Formation",timestamp:new Date(Date.now()-12e4).toISOString(),source:"Arctic Climate Observatory",category:"climate",summary:"Satellite data reveals unexpected ice formation patterns in the Arctic, with AI models detecting changes occurring 300% faster than historical averages in the past 2 minutes.",imageUrl:"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress&cs=tinysrgb&w=800",references:["NASA Earth Observatory Live Feed","Arctic Research Station Network","Climate AI Prediction Models"],trustScore:91,urgencyLevel:"high",tags:["Climate","Arctic","Real-time","Satellite","AI"],readingTime:5,verificationStatus:"verified",aiConfidence:89},{id:"4",headline:"Global Health AI Identifies New Treatment Pattern in 47 Seconds",timestamp:new Date(Date.now()-18e4).toISOString(),source:"Medical AI Research Network",category:"health",summary:"Machine learning algorithms analyzing globalThis health data discovered a novel treatment correlation that could benefit 2.3 million patients worldwide, verified across 15 countries.",imageUrl:"https://images.pexels.com/photos/3938023/pexels-photo-3938023.jpeg?auto=compress&cs=tinysrgb&w=800",references:["World Health Organization AI Division","Global Medical Database Consortium","International Treatment Research Network"],trustScore:93,urgencyLevel:"medium",tags:["Health","AI","Treatment","Global","Research"],readingTime:6,verificationStatus:"verified",aiConfidence:91},{id:"5",headline:"Cybersecurity AI Prevents 2,847 Attacks in Last 60 Seconds",timestamp:new Date(Date.now()-24e4).toISOString(),source:"Global Cyber Defense Network",category:"security",summary:"Advanced threat detection systems successfully identified and neutralized sophisticated cyber attacks targeting critical infrastructure across 23 countries in real-time.",imageUrl:"https://images.pexels.com/photos/60504/security-protection-anti-virus-software-60504.jpeg?auto=compress&cs=tinysrgb&w=800",references:["International Cybersecurity Alliance","Critical Infrastructure Protection Agency","AI Threat Intelligence Network"],trustScore:95,urgencyLevel:"critical",tags:["Cybersecurity","AI","Real-time","Defense","Global"],readingTime:4,verificationStatus:"verified",aiConfidence:96}];C.useEffect(()=>{h();const b=setInterval(()=>{c&&h()},3e4);return()=>clearInterval(b)},[c]);const h=()=>{const S={...d[Math.floor(Math.random()*d.length)],timestamp:new Date().toISOString(),id:Math.random().toString(36).substr(2,9)};r(S),o(new Date)},p=async()=>{a(!0),await new Promise(b=>setTimeout(b,800)),h(),a(!1)},f=b=>{const S=new Date,j=new Date(b),w=Math.floor((S.getTime()-j.getTime())/1e3);return w<60?`${w}s ago`:w<3600?`${Math.floor(w/60)}m ago`:`${Math.floor(w/3600)}h ago`},m=b=>{switch(b){case"climate":return lt;case"disaster":return Cn;case"globalThis-alert":return Ke;case"technology":return oe;case"health":return fr;case"security":return xt;default:return Q}},x=b=>{switch(b){case"climate":return"from-green-500 to-emerald-500";case"disaster":return"from-red-500 to-orange-500";case"globalThis-alert":return"from-yellow-500 to-orange-500";case"technology":return"from-blue-500 to-cyan-500";case"health":return"from-purple-500 to-pink-500";case"security":return"from-red-600 to-pink-600";default:return"from-slate-500 to-slate-600"}},y=b=>{switch(b){case"critical":return"text-red-400 bg-red-500/10 border-red-500/20 animate-pulse";case"high":return"text-orange-400 bg-orange-500/10 border-orange-500/20";case"medium":return"text-yellow-400 bg-yellow-500/10 border-yellow-500/20";case"low":return"text-green-400 bg-green-500/10 border-green-500/20";default:return"text-slate-400 bg-slate-500/10 border-slate-500/20"}},v=b=>{switch(b){case"verified":return"text-green-400 bg-green-500/10 border-green-500/20";case"processing":return"text-yellow-400 bg-yellow-500/10 border-yellow-500/20 animate-pulse";case"flagged":return"text-red-400 bg-red-500/10 border-red-500/20";default:return"text-slate-400 bg-slate-500/10 border-slate-500/20"}};if(!e)return l.jsx("div",{className:`backdrop-blur-sm border rounded-3xl p-8 shadow-xl ${n?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:`h-6 rounded mb-4 ${n?"bg-white/10":"bg-slate-200"}`}),l.jsx("div",{className:`h-4 rounded mb-2 ${n?"bg-white/10":"bg-slate-200"}`}),l.jsx("div",{className:`h-4 rounded w-3/4 ${n?"bg-white/10":"bg-slate-200"}`})]})});const g=m(e.category);return l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`backdrop-blur-sm border rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 ${n?"bg-white/5 border-white/10 hover:bg-white/10":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`p-3 rounded-2xl bg-gradient-to-r ${x(e.category)} shadow-lg`,children:l.jsx(g,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:`text-2xl font-bold font-display transition-colors ${n?"text-white":"text-slate-900"}`,children:"Live Intelligence"}),l.jsx("p",{className:`text-sm font-medium transition-colors ${n?"text-glow-purple":"text-purple-600"}`,children:"Real-time Global Monitoring"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(!c),className:`p-2 rounded-xl transition-all duration-300 ${c?n?"bg-green-500/20 border border-green-500/30 text-green-400":"bg-green-100 border border-green-200 text-green-600":n?"bg-white/10 border border-white/20 text-white hover:bg-white/20":"bg-slate-100 border border-slate-200 text-slate-700 hover:bg-slate-200"}`,title:c?"Auto-refresh ON":"Auto-refresh OFF",children:l.jsx(Q,{className:`w-4 h-4 ${c?"animate-pulse":""}`})}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:p,disabled:i,className:`p-3 rounded-2xl transition-all duration-300 ${n?"bg-white/10 border border-white/20 text-white hover:bg-white/20":"bg-slate-100 border border-slate-200 text-slate-700 hover:bg-slate-200"}`,children:l.jsx(Un,{className:`w-5 h-5 ${i?"animate-spin":""}`})})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-xl font-bold leading-tight mb-3 transition-colors ${n?"text-white":"text-slate-900"}`,children:e.headline}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ue,{className:"w-4 h-4 text-glow-purple"}),l.jsx("span",{className:`text-sm font-medium transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:f(e.timestamp)})]}),l.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-semibold border ${y(e.urgencyLevel)}`,children:e.urgencyLevel.toUpperCase()}),l.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-semibold border ${v(e.verificationStatus)}`,children:e.verificationStatus.toUpperCase()}),l.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-semibold ${e.trustScore>=90?"bg-green-500/20 text-green-400 border border-green-500/30":e.trustScore>=70?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:[e.trustScore,"% Trust"]}),l.jsxs("div",{className:"px-3 py-1 rounded-full text-sm font-semibold bg-blue-500/20 text-blue-400 border border-blue-500/30",children:["AI: ",e.aiConfidence,"%"]})]})]}),e.imageUrl&&l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:e.imageUrl,alt:e.headline,className:"w-full h-64 object-cover rounded-2xl",onError:b=>{b.currentTarget.src="https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=800&h=400&fit=crop"}}),e.videoUrl&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(D.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"bg-black/50 backdrop-blur-sm text-white p-4 rounded-full shadow-lg",children:l.jsx(ga,{className:"w-8 h-8"})})})]}),l.jsxs("div",{className:`p-6 rounded-2xl backdrop-blur-sm border ${n?"bg-glow-purple/10 border-glow-purple/20":"bg-purple-50 border-purple-200"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[l.jsx(oe,{className:"w-5 h-5 text-glow-purple"}),l.jsx("span",{className:`font-semibold transition-colors ${n?"text-white":"text-slate-900"}`,children:"AI Real-time Analysis"})]}),l.jsx("p",{className:`leading-relaxed transition-colors ${n?"text-slate-300":"text-slate-700"}`,children:e.summary})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map(b=>l.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${n?"bg-white/10 text-slate-300 border border-white/20":"bg-slate-100 text-slate-600 border border-slate-200"}`,children:b},b))}),l.jsxs("div",{children:[l.jsx("h4",{className:`font-semibold mb-3 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Live Data Sources"}),l.jsx("div",{className:"space-y-2",children:e.references.map((b,S)=>l.jsxs("div",{className:`flex items-center space-x-2 text-sm transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:[l.jsx("div",{className:"w-2 h-2 bg-glow-purple rounded-full animate-pulse"}),l.jsx("span",{children:b})]},S))})]}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("span",{className:`text-sm transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:["Source: ",e.source]}),l.jsxs("span",{className:`text-sm transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:[e.readingTime," min read"]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),l.jsx("span",{className:`text-xs font-medium transition-colors ${n?"text-green-400":"text-green-600"}`,children:"LIVE"}),l.jsxs("span",{className:"text-xs transition-colors text-slate-500",children:["Updated: ",s.toLocaleTimeString()]})]})]})]})]})},Xd=()=>{const{isDark:n}=fe(),e=[{icon:Ti,title:"Discover",description:"Explore trending articles and AI-powered insights from globalThis intelligence sources",path:"/discover",color:"from-blue-500 to-cyan-500",delay:.1},{icon:Ke,title:"Global Pulse",description:"Real-time media verification and fact-checking across globalThis news sources",path:"/globalThis-pulse",color:"from-glow-purple to-glow-pink",delay:.2},{icon:oe,title:"Insight Engine",description:"Advanced document analysis with AI-powered research insights and recommendations",path:"/insight-engine",color:"from-purple-500 to-pink-500",delay:.3},{icon:Q,title:"Chat",description:"Engage with multiple AI models for research, analysis, and strategic guidance",path:"/chat",color:"from-orange-500 to-red-500",delay:.4}],r=[{label:"Articles Verified",value:"2.4M+",icon:st,realtime:"Last 24h"},{label:"AI Models Active",value:"12+",icon:oe,realtime:"Live"},{label:"Active Users",value:"50K+",icon:su,realtime:"Now"},{label:"Threats Blocked",value:"847K+",icon:mt,realtime:"Last hour"}];return l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${n?"bg-black":"bg-white"}`,children:l.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6",children:[l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center py-20",children:[l.jsx(D.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.8,delay:.2},className:"mb-8",children:l.jsxs("div",{className:`inline-flex items-center space-x-2 px-6 py-3 rounded-full backdrop-blur-sm border transition-all duration-300 ${n?"bg-white/5 border-white/10 text-glow-purple":"bg-slate-100 border-purple-200 text-purple-700"}`,children:[l.jsx(mt,{className:"w-5 h-5 animate-pulse"}),l.jsx("span",{className:"font-semibold",children:"Live Intelligence Platform"}),l.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})}),l.jsxs(D.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:`text-6xl md:text-8xl font-bold font-display mb-8 leading-tight transition-colors ${n?"text-white":"text-slate-900"}`,children:["Reality Meets",l.jsx("span",{className:"bg-gradient-to-r from-glow-purple via-glow-pink to-glow-blue bg-clip-text text-transparent block",children:"Intelligence"})]}),l.jsxs(D.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:`text-xl md:text-2xl mb-12 max-w-4xl mx-auto leading-relaxed font-body transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:["Advanced AI-powered platform with ",l.jsx("span",{className:"text-glow-purple font-semibold",children:"real-time verification"}),", document analysis, and strategic intelligence operating at ",l.jsx("span",{className:"text-glow-pink font-semibold",children:"millisecond speeds"}),"."]}),l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"flex flex-col sm:flex-row gap-6 justify-center",children:[l.jsx(we,{to:"/discover",children:l.jsxs(D.button,{whileHover:{scale:1.05,boxShadow:n?"0 20px 40px rgba(139, 92, 246, 0.3)":"0 20px 40px rgba(139, 92, 246, 0.2)"},whileTap:{scale:.95},className:"bg-gradient-to-r from-glow-purple to-glow-pink text-white px-10 py-4 rounded-2xl font-bold text-lg shadow-glow flex items-center justify-center space-x-3 transition-all duration-300",children:[l.jsx(Ti,{className:"w-6 h-6"}),l.jsx("span",{children:"Discover Intelligence"}),l.jsx(Xa,{className:"w-5 h-5"})]})}),l.jsx(we,{to:"/insight-engine",children:l.jsxs(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`backdrop-blur-sm border px-10 py-4 rounded-2xl font-bold text-lg shadow-xl flex items-center justify-center space-x-3 transition-all duration-300 ${n?"bg-white/10 border-white/20 text-white hover:bg-white/20":"bg-white/70 border-slate-200 text-slate-700 hover:bg-white"}`,children:[l.jsx(oe,{className:"w-6 h-6"}),l.jsx("span",{children:"Upload for Analysis"})]})})]})]}),l.jsx(D.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:1},className:"mb-20",children:l.jsx(Yd,{})}),l.jsx(D.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:1.2},className:"grid md:grid-cols-2 lg:grid-cols-2 gap-8 mb-20",children:e.map(i=>{const a=i.icon;return l.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:i.delay},whileHover:{y:-10,scale:1.02},className:"group",children:l.jsx(we,{to:i.path,children:l.jsxs("div",{className:`backdrop-blur-sm border rounded-3xl p-8 transition-all duration-500 shadow-xl hover:shadow-2xl ${n?"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20 hover:shadow-glow":"bg-white/70 border-slate-200 hover:bg-white hover:border-slate-300 hover:shadow-xl"}`,children:[l.jsx(D.div,{whileHover:{scale:1.1,rotate:5},className:`bg-gradient-to-r ${i.color} p-4 rounded-2xl w-fit mb-6 shadow-lg`,children:l.jsx(a,{className:"w-8 h-8 text-white"})}),l.jsx("h3",{className:`text-2xl font-bold font-display mb-4 transition-colors ${n?"text-white group-hover:text-glow-purple":"text-slate-900 group-hover:text-purple-700"}`,children:i.title}),l.jsx("p",{className:`leading-relaxed mb-6 font-body transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:i.description}),l.jsxs("div",{className:`flex items-center space-x-2 font-semibold transition-colors ${n?"text-glow-purple":"text-purple-600"}`,children:[l.jsx("span",{children:"Explore"}),l.jsx(Xa,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})})},i.path)})}),l.jsxs(D.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:1.4},className:`backdrop-blur-sm border rounded-3xl p-8 mb-12 shadow-xl ${n?"bg-white/5 border-white/10":"bg-white/70 border-slate-200"}`,children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[l.jsx(mt,{className:"w-6 h-6 text-glow-purple animate-pulse"}),l.jsx("h2",{className:`text-3xl font-bold font-display transition-colors ${n?"text-white":"text-slate-900"}`,children:"Live Platform Intelligence"}),l.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"})]}),l.jsx("p",{className:`font-body transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:"Real-time metrics from our globalThis verification network"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:r.map((i,a)=>{const s=i.icon;return l.jsxs(D.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:1.6+a*.1},className:"text-center",children:[l.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-2xl mb-4 shadow-lg ${n?"bg-gradient-to-r from-glow-purple to-glow-pink":"bg-gradient-to-r from-purple-500 to-pink-500"}`,children:l.jsx(s,{className:"w-8 h-8 text-white"})}),l.jsx("div",{className:`text-3xl font-bold font-display mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:i.value}),l.jsx("div",{className:`text-sm font-medium font-body mb-1 transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:i.label}),l.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[l.jsx(Ue,{className:"w-3 h-3 text-glow-purple"}),l.jsx("span",{className:`text-xs font-medium transition-colors ${n?"text-glow-purple":"text-purple-600"}`,children:i.realtime})]})]},i.label)})})]}),l.jsxs(D.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:1.8},className:`text-center py-16 rounded-3xl backdrop-blur-sm border shadow-xl mb-12 ${n?"bg-gradient-to-r from-glow-purple/10 to-glow-pink/10 border-glow-purple/20":"bg-gradient-to-r from-purple-100/50 to-pink-100/50 border-purple-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[l.jsx(xa,{className:"w-8 h-8 text-glow-purple animate-pulse"}),l.jsx("h2",{className:`text-4xl font-bold font-display transition-colors ${n?"text-white":"text-slate-900"}`,children:"Ready to Explore Truth?"})]}),l.jsxs("p",{className:`text-xl mb-8 font-body transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:["Join thousands of researchers, journalists, and analysts using RealityCheck AI for ",l.jsx("span",{className:"text-glow-purple font-semibold",children:"real-time intelligence"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsx(we,{to:"/discover",children:l.jsxs(D.button,{whileHover:{scale:1.05,boxShadow:n?"0 20px 40px rgba(139, 92, 246, 0.3)":"0 20px 40px rgba(139, 92, 246, 0.2)"},whileTap:{scale:.95},className:"bg-gradient-to-r from-glow-purple to-glow-pink text-white px-12 py-4 rounded-2xl font-bold text-xl shadow-glow flex items-center justify-center space-x-3 transition-all duration-300",children:[l.jsx(Fn,{className:"w-6 h-6"}),l.jsx("span",{children:"Start Exploring"})]})}),l.jsx(we,{to:"/globalThis-pulse",children:l.jsxs(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`backdrop-blur-sm border px-12 py-4 rounded-2xl font-bold text-xl shadow-xl flex items-center justify-center space-x-3 transition-all duration-300 ${n?"bg-white/10 border-white/20 text-white hover:bg-white/20":"bg-white/70 border-slate-200 text-slate-700 hover:bg-white"}`,children:[l.jsx(mt,{className:"w-6 h-6"}),l.jsx("span",{children:"View Live Pulse"})]})})]})]})]})})},Qd="modulepreload",Zd=function(n){return"/"+n},vs={},Hn=function(e,r,i){if(!r||r.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=Zd(s),s in vs)return;vs[s]=!0;const o=s.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!i)for(let h=a.length-1;h>=0;h--){const p=a[h];if(p.href===s&&(!o||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${c}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":Qd,o||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),o)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},eh=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...r)=>Hn(()=>Promise.resolve().then(()=>tn),void 0).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)};class _a extends Error{constructor(e,r="FunctionsError",i){super(e),this.name=r,this.context=i}}class th extends _a{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class nh extends _a{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class rh extends _a{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Di;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Di||(Di={}));var ih=globalThis&&globalThis.__awaiter||function(n,e,r,i){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):a(h.value).then(c,u)}d((i=i.apply(n,e||[])).next())})};class ah{constructor(e,{headers:r={},customFetch:i,region:a=Di.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=eh(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var i;return ih(this,void 0,void 0,function*(){try{const{headers:a,method:s,body:o}=r;let c={},{region:u}=r;u||(u=this.region),u&&u!=="any"&&(c["x-region"]=u);let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(c["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(c["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),a),body:d}).catch(x=>{throw new th(x)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new nh(h);if(!h.ok)throw new rh(h);let f=((i=h.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield h.json():f==="application/octet-stream"?m=yield h.blob():f==="text/event-stream"?m=h:f==="multipart/form-data"?m=yield h.formData():m=yield h.text(),{data:m,error:null}}catch(a){return{data:null,error:a}}})}}var Se={},ja={},Ur={},Wn={},Fr={},Br={},sh=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")},Vt=sh();const oh=Vt.fetch,al=Vt.fetch.bind(Vt),sl=Vt.Headers,lh=Vt.Request,ch=Vt.Response,tn=Object.freeze(Object.defineProperty({__proto__:null,Headers:sl,Request:lh,Response:ch,default:al,fetch:oh},Symbol.toStringTag,{value:"Module"})),uh=au(tn);var qr={};Object.defineProperty(qr,"__esModule",{value:!0});let dh=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};qr.default=dh;var ol=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Br,"__esModule",{value:!0});const hh=ol(uh),ph=ol(qr);let fh=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=hh.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let a=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,c,u;let d=null,h=null,p=null,f=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const g=await s.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=g:h=JSON.parse(g))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(c=s.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");y&&v&&v.length>1&&(p=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,f=406,m="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await s.text();try{d=JSON.parse(y),Array.isArray(d)&&s.status===404&&(h=[],d=null,f=200,m="OK")}catch{s.status===404&&y===""?(f=204,m="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new ph.default(d)}return{error:d,data:h,count:p,status:f,statusText:m}});return this.shouldThrowOnError||(a=a.catch(s=>{var o,c,u;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(c=s==null?void 0:s.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(u=s==null?void 0:s.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}returns(){return this}overrideTypes(){return this}};Br.default=fh;var mh=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Fr,"__esModule",{value:!0});const gh=mh(Br);let xh=class extends gh.default{select(e){let r=!1;const i=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:i,foreignTable:a,referencedTable:s=a}={}){const o=s?`${s}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${e}.${r?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:i=r}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,r,{foreignTable:i,referencedTable:a=i}={}){const s=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:i=!1,buffers:a=!1,wal:s=!1,format:o="text"}={}){var c;const u=[e?"analyze":null,r?"verbose":null,i?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${u};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Fr.default=xh;var vh=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Wn,"__esModule",{value:!0});const yh=vh(Fr);let bh=class extends yh.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const i=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:i,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const o=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${s}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,i])=>{this.url.searchParams.append(r,`eq.${i}`)}),this}not(e,r,i){return this.url.searchParams.append(e,`not.${r}.${i}`),this}or(e,{foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,r,i){return this.url.searchParams.append(e,`${r}.${i}`),this}};Wn.default=bh;var wh=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ur,"__esModule",{value:!0});const on=wh(Wn);let _h=class{constructor(e,{headers:r={},schema:i,fetch:a}){this.url=e,this.headers=r,this.schema=i,this.fetch=a}select(e,{head:r=!1,count:i}={}){const a=r?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join("");return this.url.searchParams.set("select",o),i&&(this.headers.Prefer=`count=${i}`),new on.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:i=!0}={}){const a="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new on.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:i=!1,count:a,defaultToNull:s=!0}={}){const o="POST",c=[`resolution=${i?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),s||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(e)){const u=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new on.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const i="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new on.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new on.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ur.default=_h;var Hr={},Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.version=void 0;Wr.version="0.0.0-automated";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.DEFAULT_HEADERS=void 0;const jh=Wr;Hr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${jh.version}`};var ll=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ja,"__esModule",{value:!0});const kh=ll(Ur),Sh=ll(Wn),Nh=Hr;let Ah=class cl{constructor(e,{headers:r={},schema:i,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},Nh.DEFAULT_HEADERS),r),this.schemaName=i,this.fetch=a}from(e){const r=new URL(`${this.url}/${e}`);return new kh.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new cl(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:i=!1,get:a=!1,count:s}={}){let o;const c=new URL(`${this.url}/rpc/${e}`);let u;i||a?(o=i?"HEAD":"GET",Object.entries(r).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(o="POST",u=r);const d=Object.assign({},this.headers);return s&&(d.Prefer=`count=${s}`),new Sh.default({method:o,url:c,headers:d,schema:this.schemaName,body:u,fetch:this.fetch,allowEmpty:!1})}};ja.default=Ah;var nn=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Se,"__esModule",{value:!0});Se.PostgrestError=Se.PostgrestBuilder=Se.PostgrestTransformBuilder=Se.PostgrestFilterBuilder=Se.PostgrestQueryBuilder=Se.PostgrestClient=void 0;const ul=nn(ja);Se.PostgrestClient=ul.default;const dl=nn(Ur);Se.PostgrestQueryBuilder=dl.default;const hl=nn(Wn);Se.PostgrestFilterBuilder=hl.default;const pl=nn(Fr);Se.PostgrestTransformBuilder=pl.default;const fl=nn(Br);Se.PostgrestBuilder=fl.default;const ml=nn(qr);Se.PostgrestError=ml.default;var $h=Se.default={PostgrestClient:ul.default,PostgrestQueryBuilder:dl.default,PostgrestFilterBuilder:hl.default,PostgrestTransformBuilder:pl.default,PostgrestBuilder:fl.default,PostgrestError:ml.default};const{PostgrestClient:Th,PostgrestQueryBuilder:O_,PostgrestFilterBuilder:R_,PostgrestTransformBuilder:D_,PostgrestBuilder:M_,PostgrestError:z_}=$h;function Ch(){if(typeof WebSocket<"u")return WebSocket;if(typeof globalThis.WebSocket<"u")return globalThis.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Eh=Ch(),Ph="2.11.15",Ih=`realtime-js/${Ph}`,Oh="1.0.0",gl=1e4,Rh=1e3;var jn;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(jn||(jn={}));var be;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(be||(be={}));var Le;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Le||(Le={}));var Mi;(function(n){n.websocket="websocket"})(Mi||(Mi={}));var kt;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(kt||(kt={}));class Dh{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,r,i)}_decodeBroadcast(e,r,i){const a=r.getUint8(1),s=r.getUint8(2);let o=this.HEADER_LENGTH+2;const c=i.decode(e.slice(o,o+a));o=o+a;const u=i.decode(e.slice(o,o+s));o=o+s;const d=JSON.parse(i.decode(e.slice(o,e.byteLength)));return{ref:null,topic:c,event:u,payload:d}}}let xl=class{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var re;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(re||(re={}));const ys=(n,e,r={})=>{var i;const a=(i=r.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((s,o)=>(s[o]=Mh(o,n,e,a),s),{})},Mh=(n,e,r,i)=>{const a=e.find(c=>c.name===n),s=a==null?void 0:a.type,o=r[n];return s&&!i.includes(s)?vl(s,o):zi(o)},vl=(n,e)=>{if(n.charAt(0)==="_"){const r=n.slice(1,n.length);return Fh(e,r)}switch(n){case re.bool:return zh(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return Lh(e);case re.json:case re.jsonb:return Uh(e);case re.timestamp:return Bh(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return zi(e);default:return zi(e)}},zi=n=>n,zh=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Lh=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Uh=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Fh=(n,e)=>{if(typeof n!="string")return n;const r=n.length-1,i=n[r];if(n[0]==="{"&&i==="}"){let s;const o=n.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(c=>vl(e,c))}return n},Bh=n=>typeof n=="string"?n.replace(" ","T"):n,yl=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class di{constructor(e,r,i={},a=gl){this.channel=e,this.event=r,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var i;return this._hasReceived(e)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var bs;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(bs||(bs={}));class kn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:s,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kn.syncState(this.state,a,s,o),this.pendingDiffs.forEach(u=>{this.state=kn.syncDiff(this.state,u,s,o)}),this.pendingDiffs=[],c()}),this.channel._on(i.diff,{},a=>{const{onJoin:s,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=kn.syncDiff(this.state,a,s,o),c())}),this.onJoin((a,s,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:o})}),this.onLeave((a,s,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,i,a){const s=this.cloneDeep(e),o=this.transformState(r),c={},u={};return this.map(s,(d,h)=>{o[d]||(u[d]=h)}),this.map(o,(d,h)=>{const p=s[d];if(p){const f=h.map(v=>v.presence_ref),m=p.map(v=>v.presence_ref),x=h.filter(v=>m.indexOf(v.presence_ref)<0),y=p.filter(v=>f.indexOf(v.presence_ref)<0);x.length>0&&(c[d]=x),y.length>0&&(u[d]=y)}else c[d]=h}),this.syncDiff(s,{joins:c,leaves:u},i,a)}static syncDiff(e,r,i,a){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(s,(c,u)=>{var d;const h=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(u),h.length>0){const p=e[c].map(m=>m.presence_ref),f=h.filter(m=>p.indexOf(m.presence_ref)<0);e[c].unshift(...f)}i(c,h,u)}),this.map(o,(c,u)=>{let d=e[c];if(!d)return;const h=u.map(p=>p.presence_ref);d=d.filter(p=>h.indexOf(p.presence_ref)<0),e[c]=d,a(c,d,u),d.length===0&&delete e[c]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(i=>r(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,i)=>{const a=e[i];return"metas"in a?r[i]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[i]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ws;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(ws||(ws={}));var _s;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(_s||(_s={}));var nt;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(nt||(nt={}));class ka{constructor(e,r={config:{}},i){this.topic=e,this.params=r,this.socket=i,this.bindings={},this.state=be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new di(this,Le.join,this.params,this.timeout),this.rejoinTimer=new xl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=be.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Le.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new kn(this),this.broadcastEndpointURL=yl(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==be.closed){const{config:{broadcast:s,presence:o,private:c}}=this.params;this._onError(h=>e==null?void 0:e(nt.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(nt.CLOSED));const u={},d={broadcast:s,presence:o,postgres_changes:(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(h=>h.filter))!==null&&a!==void 0?a:[],private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){e==null||e(nt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(p=f==null?void 0:f.length)!==null&&p!==void 0?p:0,x=[];for(let y=0;y<m;y++){const v=f[y],{filter:{event:g,schema:b,table:S,filter:j}}=v,w=h&&h[y];if(w&&w.event===g&&w.schema===b&&w.table===S&&w.filter===j)x.push(Object.assign(Object.assign({},v),{id:w.id}));else{this.unsubscribe(),this.state=be.errored,e==null||e(nt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(nt.SUBSCRIBED);return}}).receive("error",h=>{this.state=be.errored,e==null||e(nt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(nt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,i){return this._on(e,r,i)}async send(e,r={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,c,u;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=be.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Le.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new di(this,Le.leave,{},e),i.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,i){const a=new AbortController,s=setTimeout(()=>a.abort(),i),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(s),o}_push(e,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new di(this,e,r,i);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,r,i){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,i){var a,s;const o=e.toLocaleLowerCase(),{close:c,error:u,leave:d,join:h}=Le;if(i&&[c,u,d,h].indexOf(o)>=0&&i!==this._joinRef())return;let f=this._onMessage(o,r,i);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var x,y,v;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((v=(y=m.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(f,i)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var x,y,v,g,b,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,w=(x=m.filter)===null||x===void 0?void 0:x.event;return j&&((y=r.ids)===null||y===void 0?void 0:y.includes(j))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const j=(b=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:y,table:v,commit_timestamp:g,type:b,errors:S}=x;f=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:g,eventType:b,new:{},old:{},errors:S}),this._getPayloadRecords(x))}m.callback(f,i)})}_isClosed(){return this.state===be.closed}_isJoined(){return this.state===be.joined}_isJoining(){return this.state===be.joining}_isLeaving(){return this.state===be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,i){const a=e.toLocaleLowerCase(),s={type:a,filter:r,callback:i};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(e,r){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&ka.isEqual(a.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const i in e)if(e[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Le.close,{},e)}_onError(e){this._on(Le.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=ys(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=ys(e.columns,e.old_record)),r}}const js=()=>{},qh=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Hh{constructor(e,r){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gl,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=js,this.ref=0,this.logger=js,this.conn=null,this.sendBuffer=[],this.serializer=new Dh,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...c)=>Hn(()=>Promise.resolve().then(()=>tn),void 0).then(({default:u})=>u(...c)):o=fetch,(...c)=>o(...c)},this.endPoint=`${e}/${Mi.websocket}`,this.httpEndpoint=yl(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(i=r==null?void 0:r.params)===null||i===void 0?void 0:i.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(s,o)=>o(JSON.stringify(s)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new xl(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Eh),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Oh}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,i){this.logger(e,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case jn.connecting:return kt.Connecting;case jn.open:return kt.Open;case jn.closing:return kt.Closing;default:return kt.Closed}}isConnected(){return this.connectionState()===kt.Open}channel(e,r={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(s=>s.topic===i);if(a)return a;{const s=new ka(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:i,payload:a,ref:s}=e,o=()=>{this.encode(e,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${r} ${i} (${s})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const a={access_token:r,version:Ih};r&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Le.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Rh,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:i,event:a,payload:s,ref:o}=r;i==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${a} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(c=>c._isMember(i)).forEach(c=>c._trigger(a,s,o)),this.stateChangeCallbacks.message.forEach(c=>c(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Le.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${i}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const i=new Blob([qh],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}}class Sa extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ge(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Wh extends Sa{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Li extends Sa{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Gh=globalThis&&globalThis.__awaiter||function(n,e,r,i){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):a(h.value).then(c,u)}d((i=i.apply(n,e||[])).next())})};const bl=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...r)=>Hn(()=>Promise.resolve().then(()=>tn),void 0).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)},Kh=()=>Gh(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hn(()=>Promise.resolve().then(()=>tn),void 0)).Response:Response}),Ui=n=>{if(Array.isArray(n))return n.map(r=>Ui(r));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([r,i])=>{const a=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[a]=Ui(i)}),e};var Pt=globalThis&&globalThis.__awaiter||function(n,e,r,i){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):a(h.value).then(c,u)}d((i=i.apply(n,e||[])).next())})};const hi=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Vh=(n,e,r)=>Pt(void 0,void 0,void 0,function*(){const i=yield Kh();n instanceof i&&!(r!=null&&r.noResolveJson)?n.json().then(a=>{e(new Wh(hi(a),n.status||500))}).catch(a=>{e(new Li(hi(a),a))}):e(new Li(hi(n),n))}),Jh=(n,e,r,i)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i&&(a.body=JSON.stringify(i)),Object.assign(Object.assign({},a),r))};function Gn(n,e,r,i,a,s){return Pt(this,void 0,void 0,function*(){return new Promise((o,c)=>{n(r,Jh(e,i,a,s)).then(u=>{if(!u.ok)throw u;return i!=null&&i.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>Vh(u,c,i))})})}function wr(n,e,r,i){return Pt(this,void 0,void 0,function*(){return Gn(n,"GET",e,r,i)})}function pt(n,e,r,i,a){return Pt(this,void 0,void 0,function*(){return Gn(n,"POST",e,i,a,r)})}function Yh(n,e,r,i,a){return Pt(this,void 0,void 0,function*(){return Gn(n,"PUT",e,i,a,r)})}function Xh(n,e,r,i){return Pt(this,void 0,void 0,function*(){return Gn(n,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function wl(n,e,r,i,a){return Pt(this,void 0,void 0,function*(){return Gn(n,"DELETE",e,i,a,r)})}var ke=globalThis&&globalThis.__awaiter||function(n,e,r,i){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):a(h.value).then(c,u)}d((i=i.apply(n,e||[])).next())})};const Qh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ks={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Zh{constructor(e,r={},i,a){this.url=e,this.headers=r,this.bucketId=i,this.fetch=bl(a)}uploadOrUpdate(e,r,i,a){return ke(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},ks),a);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",o.cacheControl),u&&s.append("metadata",this.encodeMetadata(u))):(s=i,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,u&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),a!=null&&a.headers&&(c=Object.assign(Object.assign({},c),a.headers));const d=this._removeEmptyFolders(r),h=this._getFinalPath(d),p=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:s,headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield p.json();return p.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}upload(e,r,i){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,i)})}uploadToSignedUrl(e,r,i,a){return ke(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",r);try{let u;const d=Object.assign({upsert:ks.upsert},a),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",d.cacheControl)):(u=i,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const p=yield this.fetch(c.toString(),{method:"PUT",body:u,headers:h}),f=yield p.json();return p.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(u){if(ge(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,r){return ke(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const s=yield pt(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),o=new URL(this.url+s.url),c=o.searchParams.get("token");if(!c)throw new Sa("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:c},error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}update(e,r,i){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,i)})}move(e,r,i){return ke(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(ge(a))return{data:null,error:a};throw a}})}copy(e,r,i){return ke(this,void 0,void 0,function*(){try{return{data:{path:(yield pt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(ge(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,i){return ke(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),s=yield pt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(a){if(ge(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,i){return ke(this,void 0,void 0,function*(){try{const a=yield pt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(a){if(ge(a))return{data:null,error:a};throw a}})}download(e,r){return ke(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=s?`?${s}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield wr(this.fetch,`${this.url}/${a}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(ge(c))return{data:null,error:c};throw c}})}info(e){return ke(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const i=yield wr(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ui(i),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}exists(e){return ke(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Xh(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(ge(i)&&i instanceof Li){const a=i.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,r){const i=this._getFinalPath(e),a=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&a.push(s);const c=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&a.push(u);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${i}${d}`)}}}remove(e){return ke(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}list(e,r,i){return ke(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Qh),r),{prefix:e||""});return{data:yield pt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(ge(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const ep="2.7.1",tp={"X-Client-Info":`storage-js/${ep}`};var Mt=globalThis&&globalThis.__awaiter||function(n,e,r,i){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):a(h.value).then(c,u)}d((i=i.apply(n,e||[])).next())})};class np{constructor(e,r={},i){this.url=e,this.headers=Object.assign(Object.assign({},tp),r),this.fetch=bl(i)}listBuckets(){return Mt(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ge(e))return{data:null,error:e};throw e}})}getBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Mt(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return Mt(this,void 0,void 0,function*(){try{return{data:yield Yh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}}class rp extends np{constructor(e,r={},i){super(e,r,i)}from(e){return new Zh(this.url,this.headers,e,this.fetch)}}const ip="2.50.2";let gn="";typeof Deno<"u"?gn="deno":typeof document<"u"?gn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gn="react-native":gn="node";const ap={"X-Client-Info":`supabase-js-${gn}/${ip}`},sp={headers:ap},op={schema:"public"},lp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cp={};var up=globalThis&&globalThis.__awaiter||function(n,e,r,i){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):a(h.value).then(c,u)}d((i=i.apply(n,e||[])).next())})};const dp=n=>{let e;return n?e=n:typeof fetch>"u"?e=al:e=fetch,(...r)=>e(...r)},hp=()=>typeof Headers>"u"?sl:Headers,pp=(n,e,r)=>{const i=dp(r),a=hp();return(s,o)=>up(void 0,void 0,void 0,function*(){var c;const u=(c=yield e())!==null&&c!==void 0?c:n;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),i(s,Object.assign(Object.assign({},o),{headers:d}))})};var fp=globalThis&&globalThis.__awaiter||function(n,e,r,i){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):a(h.value).then(c,u)}d((i=i.apply(n,e||[])).next())})};function mp(n){return n.endsWith("/")?n:n+"/"}function gp(n,e){var r,i;const{db:a,auth:s,realtime:o,globalThis:c}=n,{db:u,auth:d,realtime:h,globalThis:p}=e,f={db:Object.assign(Object.assign({},u),a),auth:Object.assign(Object.assign({},d),s),realtime:Object.assign(Object.assign({},h),o),globalThis:Object.assign(Object.assign(Object.assign({},p),c),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(i=c==null?void 0:c.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>fp(this,void 0,void 0,function*(){return""})};return n.accessToken?f.accessToken=n.accessToken:delete f.accessToken,f}const _l="2.70.0",qt=30*1e3,Fi=3,pi=Fi*qt,xp="http://localhost:9999",vp="supabase.auth.token",yp={"X-Client-Info":`gotrue-js/${_l}`},Bi="X-Supabase-Api-Version",jl={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wp=6e5;class Na extends Error{constructor(e,r,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function V(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class _p extends Na{constructor(e,r,i){super(e,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function jp(n){return V(n)&&n.name==="AuthApiError"}class kl extends Na{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class bt extends Na{constructor(e,r,i,a){super(e,i,a),this.name=r,this.status=i}}class ht extends bt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kp(n){return V(n)&&n.name==="AuthSessionMissingError"}class Zn extends bt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class er extends bt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class tr extends bt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Sp(n){return V(n)&&n.name==="AuthImplicitGrantRedirectError"}class Ss extends bt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qi extends bt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function fi(n){return V(n)&&n.name==="AuthRetryableFetchError"}class Ns extends bt{constructor(e,r,i){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class Sn extends bt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),As=` 	
\r=`.split(""),Np=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<As.length;e+=1)n[As[e].charCodeAt(0)]=-2;for(let e=0;e<_r.length;e+=1)n[_r[e].charCodeAt(0)]=e;return n})();function $s(n,e,r){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(_r[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(_r[i]),e.queuedBits-=6}}function Sl(n,e,r){const i=Np[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Ts(n){const e=[],r=o=>{e.push(String.fromCodePoint(o))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=o=>{Tp(o,i,r)};for(let o=0;o<n.length;o+=1)Sl(n.charCodeAt(o),a,s);return e.join("")}function Ap(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function $p(n,e){for(let r=0;r<n.length;r+=1){let i=n.charCodeAt(r);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(n.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Ap(i,e)}}function Tp(n,e,r){if(e.utf8seq===0){if(n<=127){r(n);return}for(let i=1;i<6;i+=1)if(!(n>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Cp(n){const e=[],r={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)Sl(n.charCodeAt(a),r,i);return new Uint8Array(e)}function Ep(n){const e=[];return $p(n,r=>e.push(r)),new Uint8Array(e)}function Pp(n){const e=[],r={queue:0,queuedBits:0},i=a=>{e.push(a)};return n.forEach(a=>$s(a,r,i)),$s(null,r,i),e.join("")}function Ip(n){return Math.round(Date.now()/1e3)+n}function Op(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Me=()=>typeof window<"u"&&typeof document<"u",wt={tested:!1,writable:!1},Nn=()=>{if(!Me())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wt.tested)return wt.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),wt.tested=!0,wt.writable=!0}catch{wt.tested=!0,wt.writable=!1}return wt.writable};function Rp(n){const e={},r=new URL(n);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,s)=>{e[s]=a})}catch{}return r.searchParams.forEach((i,a)=>{e[a]=i}),e}const Nl=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...r)=>Hn(()=>Promise.resolve().then(()=>tn),void 0).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)},Dp=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Al=async(n,e,r)=>{await n.setItem(e,JSON.stringify(r))},nr=async(n,e)=>{const r=await n.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},rr=async(n,e)=>{await n.removeItem(e)};class Gr{constructor(){this.promise=new Gr.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Gr.promiseConstructor=Promise;function mi(n){const e=n.split(".");if(e.length!==3)throw new Sn("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!bp.test(e[i]))throw new Sn("JWT not in base64url format");return{header:JSON.parse(Ts(e[0])),payload:JSON.parse(Ts(e[1])),signature:Cp(e[2]),raw:{header:e[0],payload:e[1]}}}async function Mp(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function zp(n,e){return new Promise((i,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){i(o);return}}catch(o){if(!e(s,o)){a(o);return}}})()})}function Lp(n){return("0"+n.toString(16)).substr(-2)}function Up(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let a="";for(let s=0;s<56;s++)a+=r.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,Lp).join("")}async function Fp(n){const r=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(i);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function Bp(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const r=await Fp(n);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zt(n,e,r=!1){const i=Up();let a=i;r&&(a+="/PASSWORD_RECOVERY"),await Al(n,`${e}-code-verifier`,a);const s=await Bp(i);return[s,i===s?"plain":"s256"]}const qp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Hp(n){const e=n.headers.get(Bi);if(!e||!e.match(qp))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Wp(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Gp(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Kp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Lt(n){if(!Kp.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Vp=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const jt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Jp=[502,503,504];async function Cs(n){var e;if(!Dp(n))throw new qi(jt(n),0);if(Jp.includes(n.status))throw new qi(jt(n),n.status);let r;try{r=await n.json()}catch(s){throw new kl(jt(s),s)}let i;const a=Hp(n);if(a&&a.getTime()>=jl["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Ns(jt(r),n.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new ht}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Ns(jt(r),n.status,r.weak_password.reasons);throw new _p(jt(r),n.status||500,i)}const Yp=(n,e,r,i)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),r))};async function X(n,e,r,i){var a;const s=Object.assign({},i==null?void 0:i.headers);s[Bi]||(s[Bi]=jl["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const o=(a=i==null?void 0:i.query)!==null&&a!==void 0?a:{};i!=null&&i.redirectTo&&(o.redirect_to=i.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await Xp(n,e,r+c,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(u):{data:Object.assign({},u),error:null}}async function Xp(n,e,r,i,a,s){const o=Yp(e,i,a,s);let c;try{c=await n(r,Object.assign({},o))}catch(u){throw console.error(u),new qi(jt(u),0)}if(c.ok||await Cs(c),i!=null&&i.noResolveJson)return c;try{return await c.json()}catch(u){await Cs(u)}}function tt(n){var e;let r=null;tf(n)&&(r=Object.assign({},n),n.expires_at||(r.expires_at=Ip(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:r,user:i},error:null}}function Es(n){const e=tt(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ft(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Qp(n){return{data:n,error:null}}function Zp(n){const{action_link:e,email_otp:r,hashed_token:i,redirect_to:a,verification_type:s}=n,o=Vp(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:r,hashed_token:i,redirect_to:a,verification_type:s},u=Object.assign({},o);return{data:{properties:c,user:u},error:null}}function ef(n){return n}function tf(n){return n.access_token&&n.refresh_token&&n.expires_in}const gi=["globalThis","local","others"];var nf=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class rf{constructor({url:e="",headers:r={},fetch:i}){this.url=e,this.headers=r,this.fetch=Nl(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=gi[0]){if(gi.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gi.join(", ")}`);try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(V(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,r={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ft})}catch(i){if(V(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:r}=e,i=nf(e,["options"]),a=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(a.new_email=i==null?void 0:i.newEmail,delete a.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Zp,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(V(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ft})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,i,a,s,o,c,u;try{const d={nextPage:null,lastPage:0,total:0},h=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(s=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:ef});if(h.error)throw h.error;const p=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(u=(c=h.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return m.length>0&&(m.forEach(x=>{const y=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(x.split(";")[1].split("=")[1]);d[`${v}Page`]=y}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(V(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Lt(e);try{return await X(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ft})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Lt(e);try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ft})}catch(i){if(V(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,r=!1){Lt(e);try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ft})}catch(i){if(V(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Lt(e.userId);try{const{data:r,error:i}=await X(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:i}}catch(r){if(V(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Lt(e.userId),Lt(e.id);try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}}const af={getItem:n=>Nn()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Nn()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Nn()&&globalThis.localStorage.removeItem(n)}};function Ps(n={}){return{getItem:e=>n[e]||null,setItem:(e,r)=>{n[e]=r},removeItem:e=>{delete n[e]}}}function sf(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ut={debug:!!(globalThis&&Nn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $l extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class of extends $l{}async function lf(n,e,r){Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await r()}finally{Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new of(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ut.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}sf();const cf={url:xp,storageKey:vp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Is(n,e,r){return await r()}class On{constructor(e){var r,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=On.nextInstanceID,On.nextInstanceID+=1,this.instanceID>0&&Me()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},cf),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new rf({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Nl(a.fetch),this.lock=a.lock||Is,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Me()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=lf:this.lock=Is,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Nn()?this.storage=af:(this.memoryStorage={},this.storage=Ps(this.memoryStorage)):(this.memoryStorage={},this.storage=Ps(this.memoryStorage)),Me()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${_l}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Rp(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),Me()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:s}=await this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Sp(s)){const u=(e=s.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return V(r)?{error:r}:{error:new kl("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,i,a;try{const s=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:tt}),{data:o,error:c}=s;if(c||!o)return{data:{user:null,session:null},error:c};const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(V(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var r,i,a;try{let s;if("email"in e){const{email:h,password:p,options:f}=e;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await zt(this.storage,this.storageKey)),s=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:p,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:x},xform:tt})}else if("phone"in e){const{phone:h,password:p,options:f}=e;s=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:tt})}else throw new er("You must provide either an email or phone number and a password");const{data:o,error:c}=s;if(c||!o)return{data:{user:null,session:null},error:c};const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(V(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:o,options:c}=e;r=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Es})}else if("phone"in e){const{phone:s,password:o,options:c}=e;r=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Es})}else throw new er("You must provide either an email or phone number and a password");const{data:i,error:a}=r;return a?{data:{user:null,session:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Zn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,i,a,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,i,a,s,o,c,u,d,h,p,f,m;let x,y;if("message"in e)x=e.message,y=e.signature;else{const{chain:v,wallet:g,statement:b,options:S}=e;let j;if(Me())if(typeof g=="object")j=g;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))j=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=g}const w=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const k=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),b?{statement:b}:null));let A;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")A=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)A=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)x=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),y=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${w.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(a=(i=S==null?void 0:S.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=S==null?void 0:S.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((d=S==null?void 0:S.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((p=(h=S==null?void 0:S.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...S.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const k=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=k}}try{const{data:v,error:g}=await X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Pp(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:tt});if(g)throw g;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Zn}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:g})}catch(v){if(V(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const r=await nr(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(r??"").split("/");try{const{data:s,error:o}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:tt});if(await rr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Zn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:o})}catch(s){if(V(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:r,provider:i,token:a,access_token:s,nonce:o}=e,c=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:tt}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Zn}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,i,a,s,o;try{if("email"in e){const{email:c,options:u}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await zt(this.storage,this.storageKey));const{error:p}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:c,options:u}=e,{data:d,error:h}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=u==null?void 0:u.data)!==null&&a!==void 0?a:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new er("You must provide either an email or phone number.")}catch(c){if(V(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var r,i;try{let a,s;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:o,error:c}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:tt});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(V(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var r,i,a;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await zt(this.storage,this.storageKey)),await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Qp})}catch(s){if(V(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new ht;const{error:a}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(V(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:s}=e,{error:o}=await X(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:i,type:a,options:s}=e,{data:o,error:c}=await X(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new er("You must provide either an email or phone number and a type")}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await nr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<pi:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,d,h)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:e},error:null}}const{session:a,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ft}):await this._useSession(async r=>{var i,a,s;const{data:o,error:c}=r;if(c)throw c;return!(!((i=o.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ht}:await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:ft})})}catch(r){if(V(r))return kp(r)&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{const{data:a,error:s}=i;if(s)throw s;if(!a.session)throw new ht;const o=a.session;let c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=await zt(this.storage,this.storageKey));const{data:d,error:h}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:o.access_token,xform:ft});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(i){if(V(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ht;const r=Date.now()/1e3;let i=r,a=!0,s=null;const{payload:o}=mi(e.access_token);if(o.exp&&(i=o.exp,a=i<=r),a){const{session:c,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};s=c}else{const{data:c,error:u}=await this._getUser(e.access_token);if(u)throw u;s={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(V(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){const{data:o,error:c}=r;if(c)throw c;e=(i=o.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new ht;const{session:a,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Me())throw new tr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new tr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ss("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ss("No code detected.");const{data:b,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:s,refresh_token:o,expires_in:c,expires_at:u,token_type:d}=e;if(!s||!c||!o||!d)throw new tr("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(c);let f=h+p;u&&(f=parseInt(u));const m=f-h;m*1e3<=qt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${p}s`);const x=f-p;h-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,h):h-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,h);const{data:y,error:v}=await this._getUser(s);if(v)throw v;const g={provider_token:i,provider_refresh_token:a,access_token:s,expires_in:p,expires_at:f,refresh_token:o,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(i){if(V(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await nr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"globalThis"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"globalThis"}){return await this._useSession(async r=>{var i;const{data:a,error:s}=r;if(s)return{error:s};const o=(i=a.session)===null||i===void 0?void 0:i.access_token;if(o){const{error:c}=await this.admin.signOut(o,e);if(c&&!(jp(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Op(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,a;try{const{data:{session:s},error:o}=r;if(o)throw o;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await zt(this.storage,this.storageKey,!0));try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(V(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:i,error:a}=await this._useSession(async s=>{var o,c,u,d,h;const{data:p,error:f}=s;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await X(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(a)throw a;return Me()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(V(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,a;const{data:s,error:o}=r;if(o)throw o;return await X(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await zp(async a=>(a>0&&await Mp(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tt})),(a,s)=>{const o=200*Math.pow(2,a);return s&&fi(s)&&Date.now()+o-i<qt})}catch(i){if(this._debug(r,"error",i),V(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Me()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await nr(this.storage,this.storageKey);if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<pi;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${pi}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),fi(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Gr;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new ht;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const c={session:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(a,"error",s),V(s)){const o={session:null,error:s};return fi(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,r)}catch(u){s.push(u)}});if(await Promise.all(o),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Al(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await rr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Me()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/qt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${qt}ms, refresh threshold is ${Fi} ticks`),a<=Fi&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $l)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Me()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){const a=[`provider=${encodeURIComponent(r)}`];if(i!=null&&i.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,o]=await zt(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(c.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);a.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;const{data:a,error:s}=r;return s?{data:null,error:s}:await X(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,a;const{data:s,error:o}=r;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:d}=await X(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=u==null?void 0:u.totp)===null||a===void 0)&&a.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:a,error:s}=r;if(s)return{data:null,error:s};const{data:o,error:c}=await X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(r){if(V(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:a,error:s}=r;return s?{data:null,error:s}:await X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(V(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const i=(e==null?void 0:e.factors)||[],a=i.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=i.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:i,totp:a,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,i;const{data:{session:a},error:s}=e;if(s)return{data:null,error:s};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=mi(a.access_token);let c=null;o.aal&&(c=o.aal);let u=c;((i=(r=a.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(u="aal2");const h=o.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,r={keys:[]}){let i=r.keys.find(o=>o.kid===e);if(i||(i=this.jwks.keys.find(o=>o.kid===e),i&&this.jwks_cached_at+wp>Date.now()))return i;const{data:a,error:s}=await X(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!a.keys||a.keys.length===0)throw new Sn("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),i=a.keys.find(o=>o.kid===e),!i)throw new Sn("No matching signing key found in JWKS");return i}async getClaims(e,r={keys:[]}){try{let i=e;if(!i){const{data:m,error:x}=await this.getSession();if(x||!m.session)return{data:null,error:x};i=m.session.access_token}const{header:a,payload:s,signature:o,raw:{header:c,payload:u}}=mi(i);if(Wp(s.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(i);if(m)throw m;return{data:{claims:s,header:a,signature:o},error:null}}const d=Gp(a.alg),h=await this.fetchJwk(a.kid,r),p=await crypto.subtle.importKey("jwk",h,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,o,Ep(`${c}.${u}`)))throw new Sn("Invalid JWT signature");return{data:{claims:s,header:a,signature:o},error:null}}catch(i){if(V(i))return{data:null,error:i};throw i}}}On.nextInstanceID=0;const uf=On;class df extends uf{constructor(e){super(e)}}var hf=globalThis&&globalThis.__awaiter||function(n,e,r,i){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):a(h.value).then(c,u)}d((i=i.apply(n,e||[])).next())})};class pf{constructor(e,r,i){var a,s,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const c=mp(e),u=new URL(c);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,h={db:op,realtime:cp,auth:Object.assign(Object.assign({},lp),{storageKey:d}),globalThis:sp},p=gp(i??{},h);this.storageKey=(a=p.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=pp(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new Th(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new ah(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new rp(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},i={}){return this.rest.rpc(e,r,i)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return hf(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:a,storageKey:s,flowType:o,lock:c,debug:u},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new df({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:s,autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:a,flowType:o,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Hh(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,r,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ff=(n,e,r)=>new pf(n,e,r),xn={}.VITE_SUPABASE_URL,Hi={}.VITE_SUPABASE_ANON_KEY,Wi=xn&&Hi&&xn!=="https://your-project.supabase.co"&&Hi!=="your-anon-key"&&xn.startsWith("https://")&&xn.includes(".supabase.co"),Aa=ff(Wi?xn:"https://mock.supabase.co",Wi?Hi:"mock-key"),Tl=Wi,mf=({article:n})=>{const{isDark:e}=fe(),[r,i]=C.useState(!1),a=p=>{const f=new Date(p),x=Math.floor((new Date().getTime()-f.getTime())/(1e3*60*60));return x<1?"Just now":x<24?`${x}h ago`:`${Math.floor(x/24)}d ago`},s=()=>{if(!n.image_check)return{icon:Ue,text:"Processing",color:"text-yellow-400",bg:"bg-yellow-500/10 border-yellow-500/20"};switch(n.image_check.status){case"verified":return{icon:Kt,text:"Verified",color:"text-green-400",bg:"bg-green-500/10 border-green-500/20"};case"suspicious":return{icon:Cn,text:"Suspicious",color:"text-yellow-400",bg:"bg-yellow-500/10 border-yellow-500/20"};case"manipulated":return{icon:En,text:"Manipulated",color:"text-red-400",bg:"bg-red-500/10 border-red-500/20"};default:return{icon:Ue,text:"Processing",color:"text-yellow-400",bg:"bg-yellow-500/10 border-yellow-500/20"}}},o=()=>{if(!n.text_check)return{icon:Ue,text:"Processing",color:"text-yellow-400",bg:"bg-yellow-500/10 border-yellow-500/20"};switch(n.text_check.verification_status){case"true":return{icon:Kt,text:"Verified",color:"text-green-400",bg:"bg-green-500/10 border-green-500/20"};case"mixed":return{icon:Cn,text:"Mixed",color:"text-yellow-400",bg:"bg-yellow-500/10 border-yellow-500/20"};case"false":return{icon:En,text:"False",color:"text-red-400",bg:"bg-red-500/10 border-red-500/20"};default:return{icon:Ue,text:"Unverified",color:"text-slate-400",bg:"bg-slate-500/10 border-slate-500/20"}}},c=p=>{switch(p){case"critical":return"text-red-400 bg-red-500/10";case"high":return"text-orange-400 bg-orange-500/10";case"medium":return"text-yellow-400 bg-yellow-500/10";case"low":return"text-green-400 bg-green-500/10";default:return"text-slate-400 bg-slate-500/10"}},u=async p=>{try{await Aa.from("feedback").insert({article_id:n.id,user_rating:p?5:1,helpful:p,feedback_text:null}),i(!0)}catch(f){console.error("Error submitting feedback:",f)}},d=s(),h=o();return l.jsxs(D.div,{whileHover:{y:-5,scale:1.02},className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl hover:shadow-2xl transition-all duration-500 group ${e?"bg-white/5 border-white/10 hover:bg-white/10":"bg-white/50 border-slate-200 hover:bg-white/70"}`,children:[n.image_url&&l.jsxs("div",{className:"relative mb-6",children:[l.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-48 object-cover rounded-2xl",onError:p=>{p.currentTarget.src="https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=400&h=250&fit=crop"}}),l.jsx("div",{className:"absolute top-4 right-4 flex space-x-2",children:l.jsxs("div",{className:`px-3 py-1 rounded-full border text-xs font-semibold flex items-center space-x-1 backdrop-blur-sm ${d.bg}`,children:[l.jsx(xt,{className:"w-3 h-3"}),l.jsx("span",{className:d.color,children:"Image"})]})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:`font-bold text-lg leading-tight line-clamp-2 transition-colors group-hover:text-purple-400 ${e?"text-white":"text-slate-900"}`,children:n.title}),l.jsxs("p",{className:`text-sm leading-relaxed line-clamp-3 transition-colors ${e?"text-slate-300":"text-slate-600"}`,children:[n.content.substring(0,150),"..."]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("div",{className:`px-3 py-1 rounded-full border text-xs font-semibold flex items-center space-x-1 backdrop-blur-sm ${d.bg}`,children:[l.jsx(d.icon,{className:"w-3 h-3"}),l.jsxs("span",{className:d.color,children:[d.text,n.image_check&&` (${n.image_check.confidence_score}%)`]})]}),l.jsxs("div",{className:`px-3 py-1 rounded-full border text-xs font-semibold flex items-center space-x-1 backdrop-blur-sm ${h.bg}`,children:[l.jsx(Ci,{className:"w-3 h-3"}),l.jsxs("span",{className:h.color,children:[h.text,n.text_check&&` (${n.text_check.confidence_score}%)`]})]}),l.jsx("div",{className:"px-3 py-1 rounded-full border border-purple-500/20 bg-purple-500/10 text-xs font-semibold text-purple-300 backdrop-blur-sm",children:n.sector.toUpperCase()})]}),n.strategy&&l.jsxs(D.div,{whileHover:{scale:1.02},className:`backdrop-blur-sm border rounded-2xl p-4 ${e?"bg-white/5 border-white/10":"bg-white/50 border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx(Fn,{className:"w-4 h-4 text-purple-400"}),l.jsx("span",{className:`font-semibold text-sm transition-colors ${e?"text-white":"text-slate-900"}`,children:"Reality Digest"}),l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${c(n.strategy.priority_level)}`,children:n.strategy.priority_level.toUpperCase()})]}),l.jsx("p",{className:`text-xs leading-relaxed line-clamp-2 transition-colors ${e?"text-slate-300":"text-slate-600"}`,children:n.strategy.summary})]}),l.jsxs("div",{className:`flex items-center justify-between text-xs transition-colors ${e?"text-slate-400":"text-slate-500"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ue,{className:"w-3 h-3"}),l.jsx("span",{children:a(n.published_at)})]}),n.image_check&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(st,{className:"w-3 h-3"}),l.jsxs("span",{children:[n.image_check.match_count," matches"]})]})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs(D.a,{whileHover:{scale:1.02},whileTap:{scale:.98},href:n.url,target:"_blank",rel:"noopener noreferrer",className:`flex-1 backdrop-blur-sm border text-sm py-3 rounded-2xl transition-all duration-300 flex items-center justify-center space-x-2 ${e?"bg-white/10 border-white/10 text-white hover:bg-white/20":"bg-white/50 border-slate-200 text-slate-700 hover:bg-white/70"}`,children:[l.jsx("span",{children:"Read Full"}),l.jsx(Gt,{className:"w-3 h-3"})]}),r?l.jsx("div",{className:"bg-purple-500/10 border border-purple-500/20 text-purple-400 px-4 py-3 rounded-2xl text-xs font-semibold",children:"Thanks!"}):l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(D.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u(!0),className:"bg-green-500/10 border border-green-500/20 text-green-400 p-3 rounded-2xl hover:bg-green-500/20 transition-all duration-300",title:"Helpful",children:l.jsx(ou,{className:"w-3 h-3"})}),l.jsx(D.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u(!1),className:"bg-red-500/10 border border-red-500/20 text-red-400 p-3 rounded-2xl hover:bg-red-500/20 transition-all duration-300",title:"Not helpful",children:l.jsx(lu,{className:"w-3 h-3"})})]})]})]})]})},Os=["https://searx.be","https://search.sapti.me","https://searx.tiekoetter.com","https://searx.work","https://searx.prvcy.eu","https://searx.fmac.xyz","https://search.bus-hit.me"];let xi=0;function gf(){const n=Os[xi];return xi=(xi+1)%Os.length,n}async function It(n,e=["general"],r="json"){for(let i=0;i<3;i++){const a=gf();try{const s=new URLSearchParams({q:n,format:r,categories:e.join(","),engines:"google,bing,duckduckgo,startpage,wikipedia",time_range:"",safesearch:"1"}),o=`https://api.allorigins.win/get?url=${encodeURIComponent(`${a}/search?${s}`)}`,c=await fetch(o,{headers:{Accept:"application/json","User-Agent":"RealityCheckAI/2.0"}});if(!c.ok)throw new Error(`Proxy error: ${c.status}`);const u=await c.json();let d;try{d=JSON.parse(u.contents)}catch{const p=await fetch(`${a}/search?${s}`,{headers:{Accept:"application/json","User-Agent":"RealityCheckAI/2.0"},mode:"cors"});if(p.ok)d=await p.json();else throw new Error("Both proxy and direct approaches failed")}return{results:(d.results||[]).map(h=>({...h,publishedDate:h.publishedDate||bf(h.content)||new Date().toISOString(),category:vf(h.title+" "+(h.content||"")),source:xf(h.url),relevance:yf(n,h.title+" "+(h.content||""))})),suggestions:d.suggestions||[],infoboxes:d.infoboxes||[],totalResults:d.number_of_results||0,instance:a,source:"searxng"}}catch(s){console.warn(`SearXNG instance ${a} failed (attempt ${i+1}):`,s),i<2&&await new Promise(o=>setTimeout(o,1e3))}}return console.warn("All SearXNG instances failed, using enhanced mock data"),wf(n,e)}async function Cl(n="globalThis"){const e=[{query:"breaking news today",category:"news",weight:1},{query:"latest AI technology developments",category:"technology",weight:.9},{query:"globalThis events happening now",category:"world",weight:.8},{query:"scientific breakthroughs 2025",category:"science",weight:.7},{query:"climate change latest updates",category:"environment",weight:.8},{query:"health medical news today",category:"health",weight:.7},{query:"economic market trends analysis",category:"business",weight:.6},{query:"cybersecurity threats alerts",category:"security",weight:.8}],r=[];for(const{query:i,category:a,weight:s}of e)try{const o=await It(i,["news","general"],"json");r.push({query:i,results:o.results.slice(0,8),timestamp:new Date().toISOString(),category:a,trending_score:Math.floor(s*(o.results.length/8)*100)})}catch(o){console.warn(`Failed to search trending topic: ${i}`,o),r.push({query:i,results:_f(i,a),timestamp:new Date().toISOString(),category:a,trending_score:Math.floor(s*100)})}return{trending:r.sort((i,a)=>a.trending_score-i.trending_score)}}async function Rs(n,e="day"){try{const i=(await It(n,["news"],"json")).results.filter(a=>a.url&&a.title).map(a=>({title:a.title,description:a.content||a.title,url:a.url,publishedDate:a.publishedDate||new Date().toISOString(),source:a.source,category:a.category,thumbnail:a.img_src||Jt(a.category),urlToImage:a.img_src||Jt(a.category)}));return{articles:i,totalResults:i.length,query:n,source:"searxng"}}catch(r){return console.error("SearXNG news search error:",r),jf(n)}}function xf(n){try{return new URL(n).hostname.replace("www.","")}catch{return"unknown"}}function vf(n){const e={technology:["ai","tech","software","computer","digital","cyber","innovation","quantum"],health:["health","medical","disease","vaccine","hospital","doctor","medicine","treatment"],politics:["government","election","political","congress","senate","president","policy","vote"],climate:["climate","environment","weather","carbon","emission","green","sustainability","renewable"],business:["business","economy","market","stock","financial","company","trade","investment"],science:["science","research","study","discovery","experiment","scientist","breakthrough","space"],security:["security","cyber","attack","breach","threat","vulnerability","defense","hacking"]},r=n.toLowerCase();for(const[i,a]of Object.entries(e))if(a.some(s=>r.includes(s)))return i;return"general"}function yf(n,e){const r=n.toLowerCase().split(/\s+/),i=e.toLowerCase().split(/\s+/);let a=0,s=0;for(const o of r)i.includes(o)?s++:i.some(c=>c.includes(o)||o.includes(c))&&a++;return(s*2+a)/r.length}function bf(n){if(!n)return null;const e=[/(\d{4}[-/]\d{1,2}[-/]\d{1,2})/,/(\d{1,2}[-/]\d{1,2}[-/]\d{4})/,/(January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{1,2},?\s+\d{4}/i];for(const r of e){const i=n.match(r);if(i)try{return new Date(i[1]).toISOString()}catch{continue}}return null}function Jt(n){return{technology:"https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=400",health:"https://images.pexels.com/photos/3938023/pexels-photo-3938023.jpeg?auto=compress&cs=tinysrgb&w=400",politics:"https://images.pexels.com/photos/8728382/pexels-photo-8728382.jpeg?auto=compress&cs=tinysrgb&w=400",climate:"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress&cs=tinysrgb&w=400",business:"https://images.pexels.com/photos/590041/pexels-photo-590041.jpeg?auto=compress&cs=tinysrgb&w=400",science:"https://images.pexels.com/photos/2280571/pexels-photo-2280571.jpeg?auto=compress&cs=tinysrgb&w=400",security:"https://images.pexels.com/photos/60504/security-protection-anti-virus-software-60504.jpeg?auto=compress&cs=tinysrgb&w=400"}[n]||"https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=400"}function wf(n,e){const r=[],i=Math.min(20,8+Math.floor(Math.random()*12));for(let a=0;a<i;a++){const s=e[0]||"general",o={technology:[`AI Breakthrough: ${n} Revolutionizes Industry`,`Tech Giants Invest in ${n} Development`,`${n} Technology Reaches New Milestone`,`Experts Analyze Impact of ${n} on Future`],health:[`Medical Study: ${n} Shows Promising Results`,`Healthcare Innovation: ${n} Treatment Advances`,`Research Update: ${n} Clinical Trials Progress`,`Health Alert: ${n} Findings Released`],general:[`Breaking: ${n} Developments Unfold`,`Analysis: ${n} Impact on Global Markets`,`Expert Opinion: ${n} Future Implications`,`Live Updates: ${n} Situation Evolving`]},c=o[s]||o.general,u=c[Math.floor(Math.random()*c.length)];r.push({title:u,content:`Comprehensive analysis of ${n} reveals significant developments with far-reaching implications. Expert sources confirm multiple aspects of this evolving situation.`,url:`https://example.com/news/${encodeURIComponent(n)}/${a}`,publishedDate:new Date(Date.now()-Math.random()*864e5).toISOString(),img_src:Jt(s),category:s,source:"Enhanced News Network",relevance:Math.max(.5,1-a*.05)})}return{results:r,suggestions:[`${n} analysis`,`${n} timeline`,`${n} impact`],infoboxes:[],totalResults:r.length,instance:"mock-enhanced",source:"mock"}}function _f(n,e){return Array.from({length:5},(r,i)=>({title:`${n} - Breaking Development ${i+1}`,content:`Latest updates on ${n} with expert analysis and real-time information.`,url:`https://example.com/trending/${encodeURIComponent(n)}/${i}`,publishedDate:new Date(Date.now()-Math.random()*36e5).toISOString(),img_src:Jt(e),category:e,source:"Trending News",relevance:Math.max(.7,1-i*.05)}))}function jf(n){const e=Array.from({length:12},(r,i)=>({title:`${n}: Expert Analysis and Real-time Updates`,description:`Comprehensive coverage of ${n} with verified sources and expert commentary.`,url:`https://example.com/news/${encodeURIComponent(n)}/${i}`,publishedDate:new Date(Date.now()-Math.random()*864e5).toISOString(),source:"News Network",category:"news",thumbnail:Jt("general"),urlToImage:Jt("general")}));return{articles:e,totalResults:e.length,query:n,source:"mock"}}const kf=()=>{const{isDark:n}=fe(),[e,r]=C.useState([]),[i,a]=C.useState(!0),[s,o]=C.useState("all"),[c,u]=C.useState(""),[d,h]=C.useState(new Date),[p,f]=C.useState({total:0,verified:0,suspicious:0,processing:0,realTimeThreats:Math.floor(Math.random()*1e3+500),activeScans:Math.floor(Math.random()*50+20)}),m=["all","politics","technology","health","climate","business","security"];C.useEffect(()=>{x();const k=setInterval(()=>{f(A=>({...A,realTimeThreats:A.realTimeThreats+Math.floor(Math.random()*10+1),activeScans:Math.floor(Math.random()*50+20)})),h(new Date)},1e4);return()=>clearInterval(k)},[s]);const x=async()=>{a(!0);try{let k=[];if(Tl)try{let A=Aa.from("articles").select(`
              *,
              image_checks (
                status,
                confidence_score,
                match_count
              ),
              text_checks (
                verification_status,
                confidence_score
              ),
              strategies (
                summary,
                priority_level
              )
            `).order("created_at",{ascending:!1}).limit(50);s!=="all"&&(A=A.eq("sector",s));const{data:_,error:P}=await A;if(P)throw P;_&&_.length>0&&(k=_.map(I=>{var T,E,M;return{...I,image_check:(T=I.image_checks)==null?void 0:T[0],text_check:(E=I.text_checks)==null?void 0:E[0],strategy:(M=I.strategies)==null?void 0:M[0]}}))}catch(A){console.warn("Supabase query failed, falling back to real-time search:",A)}if(k.length===0)try{const A=s==="all"?"breaking news today":`latest ${s} news`;k=(await Rs(A,"day")).articles.map((P,I)=>({id:`realtime-${I}`,title:P.title,content:P.description,url:P.url,image_url:P.urlToImage,sector:P.category||s,published_at:P.publishedDate,created_at:new Date().toISOString(),image_check:{status:Math.random()>.7?"verified":Math.random()>.5?"suspicious":"manipulated",confidence_score:Math.floor(Math.random()*30)+70,match_count:Math.floor(Math.random()*10)},text_check:{verification_status:Math.random()>.6?"true":Math.random()>.3?"mixed":"false",confidence_score:Math.floor(Math.random()*40)+60},strategy:{summary:`Strategic analysis of ${P.title.substring(0,50)}... reveals key implications for stakeholders.`,priority_level:Math.random()>.7?"high":Math.random()>.4?"medium":"low"}}))}catch(A){console.warn("Real-time search failed, using enhanced mock data:",A),k=y(s)}r(k),g(k)}catch(k){console.error("Error loading articles:",k);const A=y(s);r(A),g(A)}finally{a(!1)}},y=k=>{const A=[],P={technology:["AI Breakthrough: Real-time Processing Achieves 99.9% Accuracy","Quantum Computing Network Goes Live Across 15 Countries","Cybersecurity Alert: New Threat Vector Identified","Tech Giants Announce Joint AI Safety Initiative"],health:["Medical AI Diagnoses Rare Disease in 30 Seconds","Global Health Network Detects Outbreak Pattern","Breakthrough Treatment Shows 95% Success Rate","Real-time Health Monitoring Prevents 1000+ Cases"],politics:["International Summit Reaches Historic Agreement","Policy Changes Announced Across Multiple Nations","Diplomatic Breakthrough in Long-standing Dispute","Emergency Session Called for Global Crisis"],climate:["Climate Monitoring System Detects Rapid Changes","Renewable Energy Grid Reaches 80% Efficiency","Ocean Temperature Data Reveals Concerning Trends","Carbon Capture Technology Deployed Globally"],business:["Market Analysis: Unprecedented Growth in Tech Sector","Global Supply Chain Optimization Reduces Costs 40%","Economic Indicators Point to Sustained Recovery","Investment Surge in Sustainable Technologies"],security:["Global Security Network Prevents Major Cyber Attack","Intelligence Sharing Agreement Strengthens Defense","Real-time Threat Detection System Activated","Security Protocols Updated Across Critical Infrastructure"]},I=P[k]||P.technology;for(let T=0;T<20;T++){const E=I[T%I.length],M=new Date(Date.now()-Math.random()*864e5);A.push({id:`mock-${k}-${T}`,title:`${E} - Update ${T+1}`,content:`Real-time analysis reveals significant developments in ${k}. Expert sources confirm multiple aspects of this evolving situation with comprehensive verification from globalThis intelligence networks.`,url:`https://example.com/${k}/${T}`,image_url:v(k),sector:k==="all"?"general":k,published_at:M.toISOString(),created_at:new Date().toISOString(),image_check:{status:Math.random()>.7?"verified":Math.random()>.5?"suspicious":"manipulated",confidence_score:Math.floor(Math.random()*30)+70,match_count:Math.floor(Math.random()*10)},text_check:{verification_status:Math.random()>.6?"true":Math.random()>.3?"mixed":"false",confidence_score:Math.floor(Math.random()*40)+60},strategy:{summary:`Strategic analysis reveals key implications for ${k} sector with actionable recommendations for stakeholders.`,priority_level:Math.random()>.7?"high":Math.random()>.4?"medium":"low"}})}return A},v=k=>{const A={technology:"https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=800",health:"https://images.pexels.com/photos/3938023/pexels-photo-3938023.jpeg?auto=compress&cs=tinysrgb&w=800",politics:"https://images.pexels.com/photos/8728382/pexels-photo-8728382.jpeg?auto=compress&cs=tinysrgb&w=800",climate:"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress&cs=tinysrgb&w=800",business:"https://images.pexels.com/photos/590041/pexels-photo-590041.jpeg?auto=compress&cs=tinysrgb&w=800",security:"https://images.pexels.com/photos/60504/security-protection-anti-virus-software-60504.jpeg?auto=compress&cs=tinysrgb&w=800"};return A[k]||A.technology},g=k=>{const A={total:k.length,verified:k.filter(_=>{var P,I;return((P=_.image_check)==null?void 0:P.status)==="verified"&&((I=_.text_check)==null?void 0:I.verification_status)==="true"}).length,suspicious:k.filter(_=>{var P,I,T;return((P=_.image_check)==null?void 0:P.status)==="suspicious"||((I=_.image_check)==null?void 0:I.status)==="manipulated"||((T=_.text_check)==null?void 0:T.verification_status)==="false"}).length,processing:k.filter(_=>!_.image_check||!_.text_check).length,realTimeThreats:p.realTimeThreats,activeScans:p.activeScans};f(A)},b=async()=>{var k;a(!0);try{if(s==="all"){const _=((k=(await Cl()).trending)==null?void 0:k.flatMap(P=>P.results.slice(0,3).map((I,T)=>({id:`trending-${P.query}-${T}`,title:I.title,content:I.content||I.title,url:I.url,image_url:I.img_src,sector:I.category||"general",published_at:I.publishedDate||new Date().toISOString(),created_at:new Date().toISOString(),image_check:{status:"verified",confidence_score:85,match_count:0},text_check:{verification_status:"true",confidence_score:80},strategy:{summary:`Trending analysis: ${I.title.substring(0,100)}...`,priority_level:"medium"}}))))||[];r(_),g(_)}else await x()}catch(A){console.error("Error fetching new articles:",A),await x()}finally{a(!1)}},S=async()=>{if(c.trim()){a(!0);try{const A=(await Rs(c,"day")).articles.map((_,P)=>({id:`search-${P}`,title:_.title,content:_.description,url:_.url,image_url:_.urlToImage,sector:_.category||"search",published_at:_.publishedDate,created_at:new Date().toISOString(),image_check:{status:"verified",confidence_score:85,match_count:0},text_check:{verification_status:"true",confidence_score:80},strategy:{summary:`Search result analysis for: ${c}`,priority_level:"medium"}}));r(A),g(A)}catch(k){console.error("Search error:",k)}finally{a(!1)}}},j=e.filter(k=>k.title.toLowerCase().includes(c.toLowerCase())||k.content.toLowerCase().includes(c.toLowerCase())),w=k=>{const _=Math.floor((new Date().getTime()-k.getTime())/1e3);return _<60?`${_}s ago`:_<3600?`${Math.floor(_/60)}m ago`:`${Math.floor(_/3600)}h ago`};return l.jsxs("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${n?"bg-black":"bg-white"}`,children:[l.jsx(D.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`backdrop-blur-xl border-b transition-all duration-300 ${n?"bg-slate-900/80 border-slate-700/50":"bg-white/80 border-slate-200/50"}`,children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"p-3 rounded-2xl bg-gradient-to-r from-glow-purple to-glow-pink shadow-lg",children:l.jsx(mt,{className:"w-8 h-8 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:`text-4xl font-bold mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Global Pulse"}),l.jsx("p",{className:`text-lg transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:"Real-time media verification and intelligence analysis"})]})]}),l.jsxs(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:b,disabled:i,className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-2xl font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center space-x-3 disabled:opacity-50",children:[l.jsx(Q,{className:`w-5 h-5 ${i?"animate-spin":""}`}),l.jsx("span",{children:"Sync Reality"})]})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[{label:"Total Articles",value:p.total,icon:Q,color:"blue"},{label:"Verified",value:p.verified,icon:Q,color:"green"},{label:"Suspicious",value:p.suspicious,icon:Q,color:"red"},{label:"Processing",value:p.processing,icon:Q,color:"yellow"},{label:"Threats Blocked",value:p.realTimeThreats,icon:Q,color:"purple"},{label:"Active Scans",value:p.activeScans,icon:mt,color:"cyan"}].map((k,A)=>{const _=k.icon;return l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.1},className:`backdrop-blur-sm border rounded-2xl p-4 shadow-lg ${n?"bg-white/5 border-white/10":"bg-white/50 border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[l.jsx(_,{className:`w-5 h-5 text-${k.color}-400`}),l.jsx("span",{className:`text-sm font-medium transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:k.label})]}),l.jsx("p",{className:`text-2xl font-bold transition-colors ${n?"text-white":"text-slate-900"}`,children:typeof k.value=="number"?k.value.toLocaleString():k.value}),(k.label==="Threats Blocked"||k.label==="Active Scans")&&l.jsxs("p",{className:`text-xs transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:["Live: ",w(d)]})]},k.label)})}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx("div",{className:"relative",children:l.jsx("input",{type:"text",placeholder:"Search real-time intelligence...",value:c,onChange:k=>u(k.target.value),onKeyPress:k=>k.key==="Enter"&&S(),className:`w-full pl-12 pr-4 py-4 rounded-2xl backdrop-blur-sm border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500 ${n?"bg-white/5 border-white/10 text-white placeholder-slate-400":"bg-white/50 border-slate-200 text-slate-900 placeholder-slate-500"}`})})}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsx("select",{value:s,onChange:k=>o(k.target.value),className:`px-6 py-4 rounded-2xl backdrop-blur-sm border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500 ${n?"bg-white/5 border-white/10 text-white":"bg-white/50 border-slate-200 text-slate-900"}`,children:m.map(k=>l.jsx("option",{value:k,className:n?"bg-slate-800":"bg-white",children:k.charAt(0).toUpperCase()+k.slice(1)},k))})})]})]})}),l.jsx("main",{className:"relative z-10 px-6 py-8 pb-12",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:i?l.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center py-20",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Q,{className:"w-12 h-12 text-purple-400 mx-auto mb-4 animate-spin"}),l.jsx("p",{className:`text-xl font-semibold mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Syncing Reality..."}),l.jsx("p",{className:`transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:"Processing real-time intelligence feeds and verification protocols"})]})}):j.length===0?l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-20",children:[l.jsx(Q,{className:`w-16 h-16 mx-auto mb-4 transition-colors ${n?"text-slate-400":"text-slate-500"}`}),l.jsx("p",{className:`text-xl font-semibold mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:"No pulse detected"}),l.jsx("p",{className:`mb-6 transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:"Try adjusting your filters or sync new intelligence"}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:b,className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-2xl font-semibold shadow-xl hover:shadow-2xl transition-all duration-300",children:"Sync New Intelligence"})]}):l.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map((k,A)=>l.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.1},children:l.jsx(mf,{article:k})},k.id))})})})]})};function Ot(n,e,r,i){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(h){try{d(i.next(h))}catch(p){o(p)}}function u(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):a(h.value).then(c,u)}d((i=i.apply(n,e||[])).next())})}const Sf=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-globalThis"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/globalThis-delivery-status"],["u8hdr","message/globalThis-headers"],["u8mdn","message/globalThis-disposition-notification"],["u8msg","message/globalThis"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Yt(n,e,r){const i=Nf(n),{webkitRelativePath:a}=n,s=typeof e=="string"?e:typeof a=="string"&&a.length>0?a:`./${n.name}`;return typeof i.path!="string"&&Ds(i,"path",s),r!==void 0&&Object.defineProperty(i,"handle",{value:r,writable:!1,configurable:!1,enumerable:!0}),Ds(i,"relativePath",s),i}function Nf(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const i=e.split(".").pop().toLowerCase(),a=Sf.get(i);a&&Object.defineProperty(n,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return n}function Ds(n,e,r){Object.defineProperty(n,e,{value:r,writable:!1,configurable:!1,enumerable:!0})}const Af=[".DS_Store","Thumbs.db"];function $f(n){return Ot(this,void 0,void 0,function*(){return jr(n)&&Tf(n.dataTransfer)?If(n.dataTransfer,n.type):Cf(n)?Ef(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?Pf(n):[]})}function Tf(n){return jr(n)}function Cf(n){return jr(n)&&jr(n.target)}function jr(n){return typeof n=="object"&&n!==null}function Ef(n){return Gi(n.target.files).map(e=>Yt(e))}function Pf(n){return Ot(this,void 0,void 0,function*(){return(yield Promise.all(n.map(r=>r.getFile()))).map(r=>Yt(r))})}function If(n,e){return Ot(this,void 0,void 0,function*(){if(n.items){const r=Gi(n.items).filter(a=>a.kind==="file");if(e!=="drop")return r;const i=yield Promise.all(r.map(Of));return Ms(El(i))}return Ms(Gi(n.files).map(r=>Yt(r)))})}function Ms(n){return n.filter(e=>Af.indexOf(e.name)===-1)}function Gi(n){if(n===null)return[];const e=[];for(let r=0;r<n.length;r++){const i=n[r];e.push(i)}return e}function Of(n){if(typeof n.webkitGetAsEntry!="function")return zs(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?Pl(e):zs(n,e)}function El(n){return n.reduce((e,r)=>[...e,...Array.isArray(r)?El(r):[r]],[])}function zs(n,e){return Ot(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const s=yield n.getAsFileSystemHandle();if(s===null)throw new Error(`${n} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,Yt(o)}}const i=n.getAsFile();if(!i)throw new Error(`${n} is not a File`);return Yt(i,(r=e==null?void 0:e.fullPath)!==null&&r!==void 0?r:void 0)})}function Rf(n){return Ot(this,void 0,void 0,function*(){return n.isDirectory?Pl(n):Df(n)})}function Pl(n){const e=n.createReader();return new Promise((r,i)=>{const a=[];function s(){e.readEntries(o=>Ot(this,void 0,void 0,function*(){if(o.length){const c=Promise.all(o.map(Rf));a.push(c),s()}else try{const c=yield Promise.all(a);r(c)}catch(c){i(c)}}),o=>{i(o)})}s()})}function Df(n){return Ot(this,void 0,void 0,function*(){return new Promise((e,r)=>{n.file(i=>{const a=Yt(i,n.fullPath);e(a)},i=>{r(i)})})})}var vi=function(n,e){if(n&&e){var r=Array.isArray(e)?e:e.split(",");if(r.length===0)return!0;var i=n.name||"",a=(n.type||"").toLowerCase(),s=a.replace(/\/.*$/,"");return r.some(function(o){var c=o.trim().toLowerCase();return c.charAt(0)==="."?i.toLowerCase().endsWith(c):c.endsWith("/*")?s===c.replace(/\/.*$/,""):a===c})}return!0};function Ls(n){return Lf(n)||zf(n)||Ol(n)||Mf()}function Mf(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zf(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Lf(n){if(Array.isArray(n))return Ki(n)}function Us(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function Fs(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Us(Object(r),!0).forEach(function(i){Il(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Us(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Il(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Rn(n,e){return Bf(n)||Ff(n,e)||Ol(n,e)||Uf()}function Uf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ol(n,e){if(n){if(typeof n=="string")return Ki(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ki(n,e)}}function Ki(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function Ff(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i=[],a=!0,s=!1,o,c;try{for(r=r.call(n);!(a=(o=r.next()).done)&&(i.push(o.value),!(e&&i.length===e));a=!0);}catch(u){s=!0,c=u}finally{try{!a&&r.return!=null&&r.return()}finally{if(s)throw c}}return i}}function Bf(n){if(Array.isArray(n))return n}var qf=typeof vi=="function"?vi:vi.default,Hf="file-invalid-type",Wf="file-too-large",Gf="file-too-small",Kf="too-many-files",Vf=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=e.split(","),i=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:Hf,message:"File type must be ".concat(i)}},Bs=function(e){return{code:Wf,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},qs=function(e){return{code:Gf,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Jf={code:Kf,message:"Too many files"};function Rl(n,e){var r=n.type==="application/x-moz-file"||qf(n,e);return[r,r?null:Vf(e)]}function Dl(n,e,r){if(St(n.size))if(St(e)&&St(r)){if(n.size>r)return[!1,Bs(r)];if(n.size<e)return[!1,qs(e)]}else{if(St(e)&&n.size<e)return[!1,qs(e)];if(St(r)&&n.size>r)return[!1,Bs(r)]}return[!0,null]}function St(n){return n!=null}function Yf(n){var e=n.files,r=n.accept,i=n.minSize,a=n.maxSize,s=n.multiple,o=n.maxFiles,c=n.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(u){var d=Rl(u,r),h=Rn(d,1),p=h[0],f=Dl(u,i,a),m=Rn(f,1),x=m[0],y=c?c(u):null;return p&&x&&!y})}function kr(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function ir(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function Hs(n){n.preventDefault()}function Xf(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function Qf(n){return n.indexOf("Edge/")!==-1}function Zf(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Xf(n)||Qf(n)}function qe(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return e.some(function(c){return!kr(i)&&c&&c.apply(void 0,[i].concat(s)),kr(i)})}}function em(){return"showOpenFilePicker"in window}function tm(n){if(St(n)){var e=Object.entries(n).filter(function(r){var i=Rn(r,2),a=i[0],s=i[1],o=!0;return Ml(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(zl))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(r,i){var a=Rn(i,2),s=a[0],o=a[1];return Fs(Fs({},r),{},Il({},s,o))},{});return[{description:"Files",accept:e}]}return n}function nm(n){if(St(n))return Object.entries(n).reduce(function(e,r){var i=Rn(r,2),a=i[0],s=i[1];return[].concat(Ls(e),[a],Ls(s))},[]).filter(function(e){return Ml(e)||zl(e)}).join(",")}function rm(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function im(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function Ml(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function zl(n){return/^.*\.[\w]+$/.test(n)}var am=["children"],sm=["open"],om=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],lm=["refKey","onChange","onClick"];function cm(n){return hm(n)||dm(n)||Ll(n)||um()}function um(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dm(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function hm(n){if(Array.isArray(n))return Vi(n)}function yi(n,e){return mm(n)||fm(n,e)||Ll(n,e)||pm()}function pm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ll(n,e){if(n){if(typeof n=="string")return Vi(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vi(n,e)}}function Vi(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function fm(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i=[],a=!0,s=!1,o,c;try{for(r=r.call(n);!(a=(o=r.next()).done)&&(i.push(o.value),!(e&&i.length===e));a=!0);}catch(u){s=!0,c=u}finally{try{!a&&r.return!=null&&r.return()}finally{if(s)throw c}}return i}}function mm(n){if(Array.isArray(n))return n}function Ws(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function ce(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ws(Object(r),!0).forEach(function(i){Ji(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Ws(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Ji(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Sr(n,e){if(n==null)return{};var r=gm(n,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(r[i]=n[i])}return r}function gm(n,e){if(n==null)return{};var r={},i=Object.keys(n),a,s;for(s=0;s<i.length;s++)a=i[s],!(e.indexOf(a)>=0)&&(r[a]=n[a]);return r}var $a=C.forwardRef(function(n,e){var r=n.children,i=Sr(n,am),a=Fl(i),s=a.open,o=Sr(a,sm);return C.useImperativeHandle(e,function(){return{open:s}},[s]),Uo.createElement(C.Fragment,null,r(ce(ce({},o),{},{open:s})))});$a.displayName="Dropzone";var Ul={disabled:!1,getFilesFromEvent:$f,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};$a.defaultProps=Ul;$a.propTypes={children:$.func,accept:$.objectOf($.arrayOf($.string)),multiple:$.bool,preventDropOnDocument:$.bool,noClick:$.bool,noKeyboard:$.bool,noDrag:$.bool,noDragEventsBubbling:$.bool,minSize:$.number,maxSize:$.number,maxFiles:$.number,disabled:$.bool,getFilesFromEvent:$.func,onFileDialogCancel:$.func,onFileDialogOpen:$.func,useFsAccessApi:$.bool,autoFocus:$.bool,onDragEnter:$.func,onDragLeave:$.func,onDragOver:$.func,onDrop:$.func,onDropAccepted:$.func,onDropRejected:$.func,onError:$.func,validator:$.func};var Yi={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Fl(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ce(ce({},Ul),n),r=e.accept,i=e.disabled,a=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,c=e.multiple,u=e.maxFiles,d=e.onDragEnter,h=e.onDragLeave,p=e.onDragOver,f=e.onDrop,m=e.onDropAccepted,x=e.onDropRejected,y=e.onFileDialogCancel,v=e.onFileDialogOpen,g=e.useFsAccessApi,b=e.autoFocus,S=e.preventDropOnDocument,j=e.noClick,w=e.noKeyboard,k=e.noDrag,A=e.noDragEventsBubbling,_=e.onError,P=e.validator,I=C.useMemo(function(){return nm(r)},[r]),T=C.useMemo(function(){return tm(r)},[r]),E=C.useMemo(function(){return typeof v=="function"?v:Gs},[v]),M=C.useMemo(function(){return typeof y=="function"?y:Gs},[y]),N=C.useRef(null),R=C.useRef(null),O=C.useReducer(xm,Yi),U=yi(O,2),H=U[0],B=U[1],G=H.isFocused,J=H.isFileDialogActive,Y=C.useRef(typeof window<"u"&&window.isSecureContext&&g&&em()),ie=function(){!Y.current&&J&&setTimeout(function(){if(R.current){var W=R.current.files;W.length||(B({type:"closeDialog"}),M())}},300)};C.useEffect(function(){return window.addEventListener("focus",ie,!1),function(){window.removeEventListener("focus",ie,!1)}},[R,J,M,Y]);var Z=C.useRef([]),xe=function(W){N.current&&N.current.contains(W.target)||(W.preventDefault(),Z.current=[])};C.useEffect(function(){return S&&(document.addEventListener("dragover",Hs,!1),document.addEventListener("drop",xe,!1)),function(){S&&(document.removeEventListener("dragover",Hs),document.removeEventListener("drop",xe))}},[N,S]),C.useEffect(function(){return!i&&b&&N.current&&N.current.focus(),function(){}},[N,b,i]);var de=C.useCallback(function(F){_?_(F):console.error(F)},[_]),z=C.useCallback(function(F){F.preventDefault(),F.persist(),Xn(F),Z.current=[].concat(cm(Z.current),[F.target]),ir(F)&&Promise.resolve(a(F)).then(function(W){if(!(kr(F)&&!A)){var he=W.length,me=he>0&&Yf({files:W,accept:I,minSize:o,maxSize:s,multiple:c,maxFiles:u,validator:P}),$e=he>0&&!me;B({isDragAccept:me,isDragReject:$e,isDragActive:!0,type:"setDraggedFiles"}),d&&d(F)}}).catch(function(W){return de(W)})},[a,d,de,A,I,o,s,c,u,P]),K=C.useCallback(function(F){F.preventDefault(),F.persist(),Xn(F);var W=ir(F);if(W&&F.dataTransfer)try{F.dataTransfer.dropEffect="copy"}catch{}return W&&p&&p(F),!1},[p,A]),te=C.useCallback(function(F){F.preventDefault(),F.persist(),Xn(F);var W=Z.current.filter(function(me){return N.current&&N.current.contains(me)}),he=W.indexOf(F.target);he!==-1&&W.splice(he,1),Z.current=W,!(W.length>0)&&(B({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ir(F)&&h&&h(F))},[N,h,A]),ue=C.useCallback(function(F,W){var he=[],me=[];F.forEach(function($e){var an=Rl($e,I),Dt=yi(an,2),ri=Dt[0],ii=Dt[1],ai=Dl($e,o,s),Qn=yi(ai,2),si=Qn[0],oi=Qn[1],li=P?P($e):null;if(ri&&si&&!li)he.push($e);else{var ci=[ii,oi];li&&(ci=ci.concat(li)),me.push({file:$e,errors:ci.filter(function(eu){return eu})})}}),(!c&&he.length>1||c&&u>=1&&he.length>u)&&(he.forEach(function($e){me.push({file:$e,errors:[Jf]})}),he.splice(0)),B({acceptedFiles:he,fileRejections:me,isDragReject:me.length>0,type:"setFiles"}),f&&f(he,me,W),me.length>0&&x&&x(me,W),he.length>0&&m&&m(he,W)},[B,c,I,o,s,u,f,m,x,P]),Ae=C.useCallback(function(F){F.preventDefault(),F.persist(),Xn(F),Z.current=[],ir(F)&&Promise.resolve(a(F)).then(function(W){kr(F)&&!A||ue(W,F)}).catch(function(W){return de(W)}),B({type:"reset"})},[a,ue,de,A]),Ye=C.useCallback(function(){if(Y.current){B({type:"openDialog"}),E();var F={multiple:c,types:T};window.showOpenFilePicker(F).then(function(W){return a(W)}).then(function(W){ue(W,null),B({type:"closeDialog"})}).catch(function(W){rm(W)?(M(W),B({type:"closeDialog"})):im(W)?(Y.current=!1,R.current?(R.current.value=null,R.current.click()):de(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):de(W)});return}R.current&&(B({type:"openDialog"}),E(),R.current.value=null,R.current.click())},[B,E,M,g,ue,de,T,c]),rn=C.useCallback(function(F){!N.current||!N.current.isEqualNode(F.target)||(F.key===" "||F.key==="Enter"||F.keyCode===32||F.keyCode===13)&&(F.preventDefault(),Ye())},[N,Ye]),Va=C.useCallback(function(){B({type:"focus"})},[]),Ja=C.useCallback(function(){B({type:"blur"})},[]),Ya=C.useCallback(function(){j||(Zf()?setTimeout(Ye,0):Ye())},[j,Ye]),Rt=function(W){return i?null:W},ni=function(W){return w?null:Rt(W)},Yn=function(W){return k?null:Rt(W)},Xn=function(W){A&&W.stopPropagation()},Xc=C.useMemo(function(){return function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=F.refKey,he=W===void 0?"ref":W,me=F.role,$e=F.onKeyDown,an=F.onFocus,Dt=F.onBlur,ri=F.onClick,ii=F.onDragEnter,ai=F.onDragOver,Qn=F.onDragLeave,si=F.onDrop,oi=Sr(F,om);return ce(ce(Ji({onKeyDown:ni(qe($e,rn)),onFocus:ni(qe(an,Va)),onBlur:ni(qe(Dt,Ja)),onClick:Rt(qe(ri,Ya)),onDragEnter:Yn(qe(ii,z)),onDragOver:Yn(qe(ai,K)),onDragLeave:Yn(qe(Qn,te)),onDrop:Yn(qe(si,Ae)),role:typeof me=="string"&&me!==""?me:"presentation"},he,N),!i&&!w?{tabIndex:0}:{}),oi)}},[N,rn,Va,Ja,Ya,z,K,te,Ae,w,k,i]),Qc=C.useCallback(function(F){F.stopPropagation()},[]),Zc=C.useMemo(function(){return function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=F.refKey,he=W===void 0?"ref":W,me=F.onChange,$e=F.onClick,an=Sr(F,lm),Dt=Ji({accept:I,multiple:c,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Rt(qe(me,Ae)),onClick:Rt(qe($e,Qc)),tabIndex:-1},he,R);return ce(ce({},Dt),an)}},[R,r,c,Ae,i]);return ce(ce({},H),{},{isFocused:G&&!i,getRootProps:Xc,getInputProps:Zc,rootRef:N,inputRef:R,open:Rt(Ye)})}function xm(n,e){switch(e.type){case"focus":return ce(ce({},n),{},{isFocused:!0});case"blur":return ce(ce({},n),{},{isFocused:!1});case"openDialog":return ce(ce({},Yi),{},{isFileDialogActive:!0});case"closeDialog":return ce(ce({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return ce(ce({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return ce(ce({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return ce({},Yi);default:return n}}function Gs(){}const vm=()=>{const{isDark:n}=fe(),[e,r]=C.useState([]),[i,a]=C.useState([]),[s,o]=C.useState(!1),[c,u]=C.useState(""),[d,h]=C.useState("all"),[p,f]=C.useState("date"),m=["all","health","policy","technology","research","business"],x=C.useCallback(w=>{r(k=>[...k,...w])},[]),{getRootProps:y,getInputProps:v,isDragActive:g}=Fl({onDrop:x,accept:{"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"text/plain":[".txt"]},multiple:!0}),b=async()=>{if(e.length!==0){o(!0);for(const w of e){const k={id:Math.random().toString(36).substr(2,9),fileName:w.name,fileType:w.type,uploadDate:new Date().toISOString(),category:m[Math.floor(Math.random()*(m.length-1))+1],insights:{summary:`Comprehensive analysis of ${w.name} reveals significant insights related to ${c||"the specified domain"}. The document contains valuable information that can inform strategic decision-making.`,keyPoints:["Primary thesis aligns with current research trends","Methodology demonstrates robust analytical framework","Conclusions supported by substantial evidence base","Recommendations provide actionable strategic guidance"],confidence:Math.floor(Math.random()*20)+80,recommendations:["Cross-reference findings with recent peer-reviewed studies","Consider implementing proposed methodological improvements","Validate conclusions through additional data sources","Develop action plan based on strategic recommendations"]},status:"completed"};await new Promise(A=>setTimeout(A,2e3)),a(A=>[...A,k])}o(!1),r([])}},j=[...i.filter(w=>d==="all"||w.category===d)].sort((w,k)=>{switch(p){case"date":return new Date(k.uploadDate).getTime()-new Date(w.uploadDate).getTime();case"confidence":return k.insights.confidence-w.insights.confidence;case"name":return w.fileName.localeCompare(k.fileName);default:return 0}});return l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${n?"bg-black":"bg-white"}`,children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8 pb-12",children:[l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[l.jsxs("div",{className:`inline-flex items-center space-x-2 px-6 py-3 rounded-full backdrop-blur-sm border mb-6 ${n?"bg-white/5 border-white/10 text-purple-300":"bg-white/50 border-purple-200 text-purple-700"}`,children:[l.jsx(xa,{className:"w-5 h-5"}),l.jsx("span",{className:"font-semibold",children:"Advanced Document Intelligence"})]}),l.jsx("h1",{className:`text-5xl font-bold mb-4 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Insight Engine"}),l.jsx("p",{className:`text-xl max-w-3xl mx-auto transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:"Upload documents and unlock AI-powered research insights, analysis, and strategic recommendations"})]}),l.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[l.jsx(D.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-1",children:l.jsxs("div",{className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl ${n?"bg-white/5 border-white/10":"bg-white/50 border-slate-200"}`,children:[l.jsx("h2",{className:`text-2xl font-bold mb-6 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Document Upload"}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors ${n?"text-slate-300":"text-slate-700"}`,children:"Research Context (Optional)"}),l.jsx("textarea",{value:c,onChange:w=>u(w.target.value),placeholder:"Describe your research focus or specific questions...",className:`w-full p-4 rounded-2xl backdrop-blur-sm border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none ${n?"bg-white/5 border-white/10 text-white placeholder-slate-400":"bg-white/50 border-slate-200 text-slate-900 placeholder-slate-500"}`,rows:3})]}),l.jsxs("div",{...y(),className:`border-2 border-dashed rounded-2xl p-8 text-center cursor-pointer transition-all duration-300 ${g?n?"border-purple-400 bg-purple-500/10":"border-purple-500 bg-purple-100":n?"border-slate-600 hover:border-purple-400 hover:bg-white/5":"border-slate-300 hover:border-purple-400 hover:bg-purple-50"}`,children:[l.jsx("input",{...v()}),l.jsx(cu,{className:`w-12 h-12 mx-auto mb-4 transition-colors ${n?"text-slate-400":"text-slate-500"}`}),l.jsx("p",{className:`text-lg font-semibold mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:g?"Drop files here":"Upload Documents"}),l.jsx("p",{className:`text-sm transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:"PDF, DOCX, TXT files supported"})]}),e.length>0&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("h3",{className:`font-semibold mb-3 transition-colors ${n?"text-white":"text-slate-900"}`,children:["Ready for Analysis (",e.length,")"]}),l.jsx("div",{className:"space-y-2",children:e.map((w,k)=>l.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl backdrop-blur-sm border ${n?"bg-white/5 border-white/10":"bg-white/50 border-slate-200"}`,children:[l.jsx(fr,{className:"w-5 h-5 text-purple-400"}),l.jsx("span",{className:`text-sm font-medium truncate transition-colors ${n?"text-white":"text-slate-900"}`,children:w.name})]},k))})]}),l.jsx(D.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:b,disabled:e.length===0||s,className:"w-full mt-6 bg-gradient-to-r from-purple-500 to-pink-500 text-white py-4 rounded-2xl font-bold shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center justify-center space-x-3 disabled:opacity-50",children:s?l.jsxs(l.Fragment,{children:[l.jsx(oe,{className:"w-5 h-5 animate-pulse"}),l.jsx("span",{children:"Analyzing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Q,{className:"w-5 h-5"}),l.jsx("span",{children:"Generate Insights"})]})})]})}),l.jsx(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"lg:col-span-2",children:l.jsxs("div",{className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl ${n?"bg-white/5 border-white/10":"bg-white/50 border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:`text-2xl font-bold transition-colors ${n?"text-white":"text-slate-900"}`,children:"Analysis Results"}),i.length>0&&l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("select",{value:d,onChange:w=>h(w.target.value),className:`px-4 py-2 rounded-xl backdrop-blur-sm border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500 ${n?"bg-white/5 border-white/10 text-white":"bg-white/50 border-slate-200 text-slate-900"}`,children:m.map(w=>l.jsx("option",{value:w,className:n?"bg-slate-800":"bg-white",children:w.charAt(0).toUpperCase()+w.slice(1)},w))}),l.jsxs("select",{value:p,onChange:w=>f(w.target.value),className:`px-4 py-2 rounded-xl backdrop-blur-sm border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500 ${n?"bg-white/5 border-white/10 text-white":"bg-white/50 border-slate-200 text-slate-900"}`,children:[l.jsx("option",{value:"date",className:n?"bg-slate-800":"bg-white",children:"Date"}),l.jsx("option",{value:"confidence",className:n?"bg-slate-800":"bg-white",children:"Confidence"}),l.jsx("option",{value:"name",className:n?"bg-slate-800":"bg-white",children:"Name"})]})]})]}),j.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(oe,{className:`w-16 h-16 mx-auto mb-4 transition-colors ${n?"text-slate-400":"text-slate-500"}`}),l.jsx("p",{className:`text-xl font-semibold mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:"No Analysis Yet"}),l.jsx("p",{className:`transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:"Upload documents to generate AI-powered insights"})]}):l.jsx("div",{className:"space-y-6",children:j.map((w,k)=>l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.1},className:`backdrop-blur-sm border rounded-2xl p-6 shadow-lg ${n?"bg-white/5 border-white/10":"bg-white/50 border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(fr,{className:"w-6 h-6 text-purple-400"}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold transition-colors ${n?"text-white":"text-slate-900"}`,children:w.fileName}),l.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[l.jsx("span",{className:`text-sm transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:new Date(w.uploadDate).toLocaleDateString()}),l.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-purple-500/20 text-purple-400",children:w.category.toUpperCase()})]})]})]}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-semibold ${w.insights.confidence>=90?"bg-green-500/20 text-green-400":w.insights.confidence>=70?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:[w.insights.confidence,"% Confidence"]})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:`font-semibold mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Summary"}),l.jsx("p",{className:`text-sm leading-relaxed transition-colors ${n?"text-slate-300":"text-slate-700"}`,children:w.insights.summary})]}),l.jsxs("div",{children:[l.jsx("h4",{className:`font-semibold mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Key Insights"}),l.jsx("ul",{className:"space-y-1",children:w.insights.keyPoints.map((A,_)=>l.jsxs("li",{className:`text-sm flex items-start space-x-2 transition-colors ${n?"text-slate-300":"text-slate-700"}`,children:[l.jsx("span",{className:"text-purple-400 mt-1",children:""}),l.jsx("span",{children:A})]},_))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:`font-semibold mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Recommendations"}),l.jsx("ul",{className:"space-y-1",children:w.insights.recommendations.map((A,_)=>l.jsxs("li",{className:`text-sm flex items-start space-x-2 transition-colors ${n?"text-slate-300":"text-slate-700"}`,children:[l.jsx("span",{className:"text-green-400 mt-1",children:""}),l.jsx("span",{children:A})]},_))})]})]})]},w.id))})]})})]})]})})},Kr={}.VITE_WIKI_API_BASE||"https://en.wikipedia.org/w/api.php";async function ym(n,e=10){var r,i,a;try{const s=new URLSearchParams({action:"query",format:"json",list:"search",srsearch:n,srlimit:e.toString(),origin:"*"}),o=await fetch(`${Kr}?${s}`);if(!o.ok)throw new Error(`Wikipedia API error: ${o.status}`);const c=await o.json();return{results:((r=c.query)==null?void 0:r.search)||[],suggestion:((a=(i=c.query)==null?void 0:i.searchinfo)==null?void 0:a.suggestion)||null,source:"wikipedia"}}catch(s){return console.error("Wikipedia search error:",s),Bl(n)}}async function bm(n){var e,r;try{const i=new URLSearchParams({action:"query",format:"json",prop:"extracts|pageimages",exintro:"true",explaintext:"true",exsectionformat:"plain",piprop:"original",titles:n,origin:"*"}),a=await fetch(`${Kr}?${i}`);if(!a.ok)throw new Error(`Wikipedia API error: ${a.status}`);const o=((e=(await a.json()).query)==null?void 0:e.pages)||{},c=Object.values(o)[0];return!c||c.missing?null:{title:c.title,extract:c.extract,thumbnail:((r=c.original)==null?void 0:r.source)||null,url:`https://en.wikipedia.org/wiki/${encodeURIComponent(c.title)}`,source:"wikipedia"}}catch(i){return console.error("Wikipedia summary error:",i),ql(n)}}async function wm(n){var e,r,i,a,s;try{const o=new URLSearchParams({action:"query",format:"json",prop:"revisions",rvprop:"content",rvslots:"main",titles:n,origin:"*"}),c=await fetch(`${Kr}?${o}`);if(!c.ok)throw new Error(`Wikipedia API error: ${c.status}`);const d=((e=(await c.json()).query)==null?void 0:e.pages)||{},h=Object.values(d)[0];if(!h||h.missing)return null;const p=((s=(a=(i=(r=h.revisions)==null?void 0:r[0])==null?void 0:i.slots)==null?void 0:a.main)==null?void 0:s["*"])||"",f=_m(p);return{title:h.title,infobox:f,source:"wikipedia"}}catch(o){return console.error("Wikipedia infobox error:",o),Sm(n)}}function _m(n){const e={},r=n.match(/\{\{[Ii]nfobox[^}]*\}\}/s);if(!r)return e;const i=r[0],a=/\|\s*([^=]+?)\s*=\s*([^|]+?)(?=\s*\||\s*\}\})/g;let s;for(;(s=a.exec(i))!==null;){const o=s[1].trim(),c=s[2].trim().replace(/\[\[([^|\]]+)(\|[^\]]+)?\]\]/g,"$1");e[o]=c}return e}async function jm(n,e=5){var r,i;try{const a=new URLSearchParams({action:"query",format:"json",prop:"links",titles:n,pllimit:e.toString(),plnamespace:"0",origin:"*"}),s=await fetch(`${Kr}?${a}`);if(!s.ok)throw new Error(`Wikipedia API error: ${s.status}`);const c=((r=(await s.json()).query)==null?void 0:r.pages)||{},u=Object.values(c)[0];return{related:((i=u==null?void 0:u.links)==null?void 0:i.map(d=>d.title))||[],source:"wikipedia"}}catch(a){return console.error("Wikipedia related articles error:",a),{related:[],source:"mock"}}}async function km(n){try{const[e,r]=await Promise.all([ym(n,3),bm(n)]),i={topic:n,summary:r,relatedArticles:e.results,source:"wikipedia"};if(e.results.length>0){const a=e.results[0],[s,o]=await Promise.all([wm(a.title),jm(a.title)]);i.infobox=(s==null?void 0:s.infobox)||{},i.related=o.related||[]}return i}catch(e){return console.error("Topic context error:",e),Nm(n)}}function Bl(n){return{results:[{title:`${n} - Wikipedia`,snippet:`${n} is a topic of significant importance with various aspects and implications...`,size:15420,wordcount:2156,timestamp:new Date().toISOString()}],suggestion:null,source:"mock"}}function ql(n){return{title:n,extract:`${n} is a significant topic with multiple dimensions and implications. This comprehensive overview provides essential context and background information for understanding the subject matter.`,thumbnail:"https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=300",url:`https://en.wikipedia.org/wiki/${encodeURIComponent(n)}`,source:"mock"}}function Sm(n){return{title:n,infobox:{Type:"Concept",Category:"General Knowledge",Status:"Active",Related:"Various topics"},source:"mock"}}function Nm(n){return{topic:n,summary:ql(n),relatedArticles:Bl(n).results,infobox:{Type:"Topic",Category:"Knowledge",Relevance:"High"},related:[`Related to ${n}`,`${n} applications`,`${n} history`],source:"mock"}}async function Ta(n,e=[]){try{console.log("Generating smart summary for:",n.title);const r=Hl(n.title+" "+n.description),[i,a]=await Promise.all([Em(r),Pm(n.title)]),s={article:n,wikipedia:i,relatedNews:a,additional:e},o={}.VITE_OPENAI_API_KEY&&{}.VITE_OPENAI_API_KEY!=="demo-key"&&{}.VITE_OPENAI_API_KEY!=="your_openai_api_key",c={}.VITE_CLAUDE_API_KEY&&{}.VITE_CLAUDE_API_KEY!=="demo-key"&&{}.VITE_CLAUDE_API_KEY!=="your_claude_api_key";return o?await Am(s):c?await $m(s):(console.warn("No AI API keys configured, using enhanced mock summary"),Nr(s))}catch(r){return console.error("Smart summary generation error:",r),Nr({article:n,wikipedia:[],relatedNews:[],additional:[]})}}async function Am(n){var e,r;try{const i=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${{}.VITE_OPENAI_API_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:`You are an expert analyst creating comprehensive summaries using RAG (Retrieval-Augmented Generation). 

Create a detailed analysis including:
1. TL;DR (2-3 sentences)
2. Key Points (4-5 bullet points)
3. Timeline of events (if applicable)
4. Context and background
5. Implications and significance
6. Trust score (0-100) based on source credibility
7. Strategic recommendations
8. Related topics for further exploration

Use the provided Wikipedia context and related news to enhance accuracy.

Respond in JSON format:
{
  "tldr": "Brief summary...",
  "keyPoints": ["Point 1", "Point 2", ...],
  "timeline": [{"date": "2025-01-XX", "event": "Description"}],
  "context": "Background information...",
  "implications": "What this means...",
  "trustScore": 85,
  "strategy": {
    "recommendations": ["Rec 1", "Rec 2", ...],
    "priority": "high",
    "timeframe": "immediate"
  },
  "relatedTopics": ["Topic 1", "Topic 2", ...],
  "sources": ["Source 1", "Source 2", ...],
  "confidence": 90
}`},{role:"user",content:`Analyze this article with the provided context:

Article: ${n.article.title}
Description: ${n.article.description}

Wikipedia Context:
${JSON.stringify(n.wikipedia,null,2)}

Related News:
${JSON.stringify(n.relatedNews,null,2)}

Additional Context:
${JSON.stringify(n.additional,null,2)}`}],temperature:.3,max_tokens:2e3})});if(!i.ok)throw new Error(`OpenAI API error: ${i.status}`);const s=(r=(e=(await i.json()).choices[0])==null?void 0:e.message)==null?void 0:r.content;if(!s)throw new Error("No response from OpenAI");return{...JSON.parse(s),generatedAt:new Date().toISOString(),source:"openai-rag"}}catch(i){return console.error("OpenAI summary generation error:",i),Nr(n)}}async function $m(n){var e;try{const r=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"x-api-key":{}.VITE_CLAUDE_API_KEY,"Content-Type":"application/json","anthropic-version":"2023-06-01"},body:JSON.stringify({model:"claude-3-sonnet-20240229",max_tokens:2e3,system:"You are an expert analyst creating comprehensive summaries using RAG. Create detailed analysis with TL;DR, key points, timeline, context, implications, trust score, strategic recommendations, and related topics. Respond in JSON format.",messages:[{role:"user",content:`Analyze this article: ${n.article.title}

Description: ${n.article.description}

Context: ${JSON.stringify(n,null,2)}`}]})});if(!r.ok)throw new Error(`Claude API error: ${r.status}`);const a=(e=(await r.json()).content[0])==null?void 0:e.text;if(!a)throw new Error("No response from Claude");return{...JSON.parse(a),generatedAt:new Date().toISOString(),source:"claude-rag"}}catch(r){return console.error("Claude summary generation error:",r),Nr(n)}}async function Ca(n,e=[]){try{const r=await Tm(n),i=[...e,...r];i.sort((s,o)=>new Date(s.date).getTime()-new Date(o.date).getTime());const a=await Cm(n,i);return{topic:n,events:i.slice(0,15),analysis:a,generatedAt:new Date().toISOString(),source:"rag-timeline"}}catch(r){return console.error("Timeline generation error:",r),Om(n)}}async function Tm(n){try{const e=[`"${n}" timeline chronology`,`"${n}" history development`,`when did "${n}" start`,`"${n}" latest developments`],r=[];for(const i of e)try{const a=await It(i,["general","news"]);r.push(...a.results.slice(0,3).map(s=>({date:s.publishedDate||Im(s.content)||new Date().toISOString(),title:s.title,description:s.content||s.title,source:s.source,url:s.url,relevance:s.relevance||.5})))}catch(a){console.warn(`Timeline search failed for: ${i}`,a)}return r.sort((i,a)=>a.relevance-i.relevance).slice(0,10)}catch(e){return console.error("Timeline search error:",e),[]}}async function Cm(n,e){var i,a;if(!({}.VITE_OPENAI_API_KEY&&{}.VITE_OPENAI_API_KEY!=="demo-key"))return Xi(n);try{const s=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${{}.VITE_OPENAI_API_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:`Analyze the timeline of events and provide insights about patterns, causes, effects, and future implications.

Respond in JSON format:
{
  "summary": "Overview of the timeline...",
  "keyPatterns": ["Pattern 1", "Pattern 2", ...],
  "causeEffect": [{"cause": "X", "effect": "Y", "confidence": 85}],
  "futurePredictions": ["Prediction 1", "Prediction 2", ...],
  "significance": "Why this timeline matters...",
  "strategy": {
    "recommendations": ["Action 1", "Action 2", ...],
    "priority": "high",
    "stakeholders": ["Stakeholder 1", "Stakeholder 2", ...]
  }
}`},{role:"user",content:`Analyze this timeline for "${n}":

Events:
${e.map(u=>`${u.date}: ${u.title} - ${u.description}`).join(`
`)}`}],temperature:.4,max_tokens:1e3})});if(!s.ok)throw new Error(`OpenAI API error: ${s.status}`);const c=(a=(i=(await s.json()).choices[0])==null?void 0:i.message)==null?void 0:a.content;return JSON.parse(c)}catch(s){return console.error("Timeline analysis error:",s),Xi(n)}}function Hl(n){const e=n.toLowerCase().split(/\W+/),r=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by"]);return e.filter(i=>i.length>3&&!r.has(i)).slice(0,5)}async function Em(n){try{return(await Promise.all(n.slice(0,3).map(r=>km(r)))).filter(r=>r&&r.summary)}catch(e){return console.warn("Wikipedia context error:",e),[]}}async function Pm(n){try{return(await It(`"${n}" OR related news`,["news"])).results.slice(0,5)}catch(e){return console.warn("Related news search error:",e),[]}}function Im(n){if(!n)return null;const e=/(\d{4}[-/]\d{1,2}[-/]\d{1,2}|\d{1,2}[-/]\d{1,2}[-/]\d{4})/,r=n.match(e);if(r)try{return new Date(r[1]).toISOString()}catch{return null}return null}function Nr(n){const e=n.article;return{tldr:`${e.title} represents a significant development with multiple implications for stakeholders and future trends. Analysis reveals key patterns and strategic opportunities.`,keyPoints:["Primary development shows substantial impact on the sector","Multiple sources confirm the authenticity and significance","Expert analysis indicates long-term implications","Stakeholder responses suggest broad industry interest","Timeline suggests accelerating pace of change"],timeline:[{date:new Date(Date.now()-864e5*7).toISOString().split("T")[0],event:"Initial reports emerge from multiple sources"},{date:new Date(Date.now()-864e5*3).toISOString().split("T")[0],event:"Expert verification and comprehensive analysis"},{date:new Date().toISOString().split("T")[0],event:"Current developments and strategic implications"}],context:"This development occurs within the broader context of ongoing changes in the sector, with multiple contributing factors and stakeholder interests converging.",implications:"The significance extends beyond immediate effects to include long-term strategic implications for industry, policy, and future developments.",trustScore:Math.floor(Math.random()*20)+80,strategy:{recommendations:["Monitor ongoing developments closely","Assess potential impact on operations","Engage with key stakeholders","Develop contingency plans"],priority:"high",timeframe:"immediate"},relatedTopics:Hl(e.title+" "+e.description),sources:["Wikipedia","News sources","Expert analysis"],confidence:Math.floor(Math.random()*15)+85,generatedAt:new Date().toISOString(),source:"enhanced-mock-rag"}}function Om(n){return{topic:n,events:[{date:new Date(Date.now()-864e5*30).toISOString(),title:`${n} - Initial Development`,description:"First reports and initial analysis from multiple sources",source:"News Network",relevance:.9},{date:new Date(Date.now()-864e5*15).toISOString(),title:`${n} - Expert Analysis`,description:"Comprehensive expert review and verification process",source:"Expert Analysis",relevance:.8},{date:new Date().toISOString(),title:`${n} - Current Status`,description:"Latest developments and strategic implications",source:"Real-time Updates",relevance:1}],analysis:Xi(n),generatedAt:new Date().toISOString(),source:"mock-timeline"}}function Xi(n){return{summary:`The timeline for ${n} shows accelerating development with increasing stakeholder engagement and expert validation.`,keyPatterns:["Accelerating pace of development","Increasing expert attention","Growing stakeholder involvement","Expanding scope of implications"],causeEffect:[{cause:"Initial development",effect:"Expert attention",confidence:85},{cause:"Expert validation",effect:"Stakeholder engagement",confidence:78},{cause:"Stakeholder interest",effect:"Accelerated development",confidence:82}],futurePredictions:["Continued acceleration of development","Increased regulatory attention","Broader industry adoption","Long-term strategic implications"],significance:`This timeline demonstrates the rapid evolution and growing importance of ${n} in the current landscape.`,strategy:{recommendations:["Establish monitoring systems","Engage with key stakeholders","Develop strategic response plans","Allocate resources for analysis"],priority:"high",stakeholders:["Industry leaders","Policy makers","Research institutions","General public"]}}}function Rm(n){const e=Dm(n),r=["technology","health","environment","business","science","politics"],i=r[Math.floor(Math.random()*r.length)],a={technology:["Revolutionary AI Breakthrough Changes Everything","Quantum Computing Reaches New Milestone","Tech Giants Announce Major Partnership","Cybersecurity Threats Evolve Rapidly"],health:["Medical Research Shows Promising Results","New Treatment Shows 90% Success Rate","Global Health Initiative Launches","Breakthrough in Disease Prevention"],environment:["Climate Action Plan Gains Momentum","Renewable Energy Hits Record High","Conservation Efforts Show Results","Green Technology Innovation Unveiled"],business:["Market Analysis Reveals Trends","Economic Indicators Point Upward","Industry Leaders Meet for Summit","Investment Opportunities Emerge"],science:["Scientific Discovery Challenges Theory","Research Team Makes Breakthrough","Space Exploration Reaches Milestone","Laboratory Results Exceed Expectations"],politics:["Policy Changes Announced Today","International Relations Develop","Government Initiative Launches","Political Leaders Reach Agreement"]},s={technology:"Latest developments in artificial intelligence, quantum computing, and emerging technologies are reshaping industries worldwide.",health:"Medical researchers have made significant progress in understanding and treating various health conditions with innovative approaches.",environment:"Environmental scientists and activists are working together to address climate change through sustainable solutions and conservation efforts.",business:"Economic analysts report positive trends in various sectors as companies adapt to changing market conditions and consumer demands.",science:"Scientific communities worldwide are collaborating on groundbreaking research that could revolutionize our understanding of the natural world.",politics:"Political developments continue to shape policy decisions that affect communities and international relations across the globe."},o={technology:"https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=800",health:"https://images.pexels.com/photos/3938023/pexels-photo-3938023.jpeg?auto=compress&cs=tinysrgb&w=800",environment:"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress&cs=tinysrgb&w=800",business:"https://images.pexels.com/photos/590041/pexels-photo-590041.jpeg?auto=compress&cs=tinysrgb&w=800",science:"https://images.pexels.com/photos/2280571/pexels-photo-2280571.jpeg?auto=compress&cs=tinysrgb&w=800",politics:"https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=800"},c=a[i]||a.technology,u=c[Math.floor(Math.random()*c.length)],d=s[i]||s.technology,h=o[i]||o.technology;return{title:u,description:d,image:{url:h,alt:u,source:"fallback"},content:`${d} This comprehensive analysis explores the latest developments and their potential impact on society. Experts from various fields have contributed their insights to provide a complete picture of the current situation. The research methodology involved extensive data collection and analysis from multiple sources to ensure accuracy and reliability. Key findings suggest that these developments will have far-reaching implications for the future. Stakeholders are encouraged to stay informed about these changes and their potential effects on various sectors.`,publishedDate:new Date(Date.now()-Math.random()*864e5*7).toISOString(),author:`${e} Editorial Team`,tags:[i,"analysis","research","breaking news","expert opinion"]}}function Dm(n){try{return new URL(n).hostname.replace("www.","")}catch{return"news-source.com"}}function bi(n,e=0){const r=`https://example-${n}.com/article-${e}`;return Rm(r)}const Mm=()=>{const{isDark:n}=fe(),[e,r]=C.useState([]),[i,a]=C.useState(""),[s,o]=C.useState(null),[c,u]=C.useState(!1),[d,h]=C.useState(!1),[p,f]=C.useState(!1),[m,x]=C.useState(!1),[y,v]=C.useState(!0),g=[{id:"trending",name:"Trending Now",icon:Q,color:"from-red-500 to-orange-500"},{id:"technology",name:"Technology",icon:Q,color:"from-blue-500 to-cyan-500"},{id:"health",name:"Health",icon:oe,color:"from-green-500 to-emerald-500"},{id:"politics",name:"Politics",icon:Fn,color:"from-purple-500 to-pink-500"},{id:"climate",name:"Climate",icon:Q,color:"from-teal-500 to-blue-500"},{id:"business",name:"Business",icon:Q,color:"from-yellow-500 to-orange-500"},{id:"science",name:"Science",icon:Q,color:"from-indigo-500 to-purple-500"}];C.useEffect(()=>{b()},[]);const b=async()=>{v(!0);try{if(Tl)try{const{data:E,error:M}=await Aa.from("articles").select("*").order("created_at",{ascending:!1}).limit(50);if(M)throw M;if(E&&E.length>0){const N=S(E);r(N);return}}catch(E){console.warn("Supabase query failed, falling back to mock data:",E)}const T=g.map(E=>{const M=Array.from({length:8},(N,R)=>{var U;const O=bi(E.id,R);return{id:`${E.id}-${R}`,title:O.title,description:O.description,url:`https://example.com/${E.id}/${R}`,urlToImage:((U=O.image)==null?void 0:U.url)||null,publishedDate:O.publishedDate||new Date().toISOString(),source:O.author||"Intelligence Network",category:E.id}});return{title:E.name,category:E.id,articles:M,icon:E.icon,color:E.color}});r(T)}catch(T){console.error("Error loading discover content:",T),r(g.map(E=>({title:E.name,category:E.id,articles:I(E.id,6),icon:E.icon,color:E.color})))}finally{v(!1)}},S=T=>g.map(M=>({title:M.name,category:M.id,articles:T.filter(N=>N.sector===M.id).slice(0,8).map(N=>({id:N.id,title:N.title,description:N.content.substring(0,200)+"...",url:N.url,urlToImage:N.image_url,publishedDate:N.published_at,source:P(N.url),category:N.sector})),icon:M.icon,color:M.color})).filter(M=>M.articles.length>0),j=async()=>{if(i.trim())try{let T=[];try{T=(await It(i,["news","general"])).results.map(M=>({id:Math.random().toString(36).substr(2,9),title:M.title,description:M.content||M.title,url:M.url,urlToImage:M.img_src||"https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=400",publishedDate:M.publishedDate||new Date().toISOString(),source:P(M.url),category:"search"}))}catch(E){console.warn("Search failed, using mock results:",E),T=Array.from({length:12},(M,N)=>{var O;const R=bi("search",N);return{id:`search-${N}`,title:`${i}: ${R.title}`,description:R.description,url:`https://example.com/search/${N}`,urlToImage:((O=R.image)==null?void 0:O.url)||null,publishedDate:R.publishedDate||new Date().toISOString(),source:R.author||"Search Results",category:"search"}})}r(E=>[{title:`Search: "${i}"`,category:"search",articles:T.slice(0,12),icon:Q,color:"from-glow-purple to-glow-pink"},...E.filter(M=>M.category!=="search")])}catch(T){console.error("Search error:",T)}},w=async T=>{o(T),u(!0),f(!0);try{let E;try{E=await Ta(T)}catch(M){console.warn("Summary generation failed, using mock:",M),E=A(T)}o(M=>M?{...M,summary:E}:null)}catch(E){console.error("Summary generation error:",E),o(M=>M?{...M,summary:A(T)}:null)}finally{f(!1)}},k=async T=>{o(T),h(!0),x(!0);try{let E;try{E=await Ca(T.title)}catch(M){console.warn("Timeline generation failed, using mock:",M),E=_(T)}o(M=>M?{...M,timeline:E}:null)}catch(E){console.error("Timeline generation error:",E),o(M=>M?{...M,timeline:_(T)}:null)}finally{x(!1)}},A=T=>({tldr:`${T.title} represents a significant development in ${T.category}. Key stakeholders are monitoring the situation closely as it unfolds.`,keyPoints:["Major development in the field with widespread implications","Expert analysis suggests long-term impact on industry trends","Stakeholders are actively responding to the situation","Further developments expected in the coming weeks"],context:"This development occurs within a broader context of ongoing changes in the industry, reflecting larger trends and patterns.",implications:"The implications of this development extend beyond immediate effects, potentially influencing future policy and industry standards.",trustScore:Math.floor(Math.random()*30)+70}),_=T=>({events:[{date:new Date(Date.now()-864e5*7).toISOString(),title:"Initial Development",description:"The first signs of this development were observed by industry experts.",source:"Industry Reports"},{date:new Date(Date.now()-864e5*3).toISOString(),title:"Key Milestone Reached",description:"Significant progress was made, attracting attention from major stakeholders.",source:"News Agencies"},{date:new Date().toISOString(),title:"Current Status",description:T.description,source:T.source}],analysis:{summary:"The timeline shows a clear progression of events leading to the current situation, with each milestone building upon previous developments."}}),P=T=>{try{return new URL(T).hostname.replace("www.","")}catch{return"Unknown Source"}},I=(T,E)=>{var N;const M=[];for(let R=0;R<E;R++){const O=bi(T,R);M.push({id:`${T}-${R}`,title:O.title,description:O.description,url:`https://example.com/${T}/${R}`,urlToImage:((N=O.image)==null?void 0:N.url)||null,publishedDate:O.publishedDate||new Date().toISOString(),source:O.author||"Intelligence Network",category:T})}return M};return l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${n?"bg-black":"bg-white"}`,children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[l.jsxs("div",{className:`inline-flex items-center space-x-2 px-6 py-3 rounded-full backdrop-blur-sm border mb-6 ${n?"bg-white/5 border-white/10 text-glow-purple":"bg-slate-100 border-slate-200 text-purple-700"}`,children:[l.jsx(Q,{className:"w-5 h-5"}),l.jsx("span",{className:"font-semibold",children:"Real-time Intelligence Discovery"})]}),l.jsx("h1",{className:`text-6xl font-bold font-display mb-4 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Discover"}),l.jsx("p",{className:`text-xl max-w-3xl mx-auto font-body transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:"Deep browsing with smart summaries, real-time web scraping, and multi-source intelligence aggregation"})]}),l.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(Q,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 transition-colors ${n?"text-slate-400":"text-slate-500"}`}),l.jsx("input",{type:"text",placeholder:"Search globalThis intelligence network...",value:i,onChange:T=>a(T.target.value),onKeyPress:T=>T.key==="Enter"&&j(),className:`w-full pl-12 pr-4 py-4 rounded-2xl backdrop-blur-sm border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-glow-purple ${n?"bg-white/5 border-white/10 text-white placeholder-slate-400":"bg-slate-50 border-slate-200 text-slate-900 placeholder-slate-500"}`})]}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:j,disabled:y,className:"bg-gradient-to-r from-glow-purple to-glow-pink text-white px-8 py-4 rounded-2xl font-bold shadow-glow hover:shadow-glow-lg transition-all duration-300 disabled:opacity-50",children:l.jsx(Q,{className:"w-5 h-5"})}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:b,disabled:y,className:`p-4 rounded-2xl transition-all duration-300 ${n?"bg-white/10 border border-white/20 text-white hover:bg-white/20":"bg-slate-100 border border-slate-200 text-slate-700 hover:bg-slate-200"}`,children:l.jsx(Un,{className:`w-5 h-5 ${y?"animate-spin":""}`})})]})}),y?l.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center py-20",children:l.jsxs("div",{className:"text-center",children:[l.jsx(oe,{className:"w-12 h-12 text-glow-purple mx-auto mb-4 animate-pulse"}),l.jsx("p",{className:`text-xl font-semibold mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Discovering Intelligence..."}),l.jsx("p",{className:`transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:"Scraping real-time sources and generating smart summaries"})]})}):l.jsx("div",{className:"space-y-12",children:e.map((T,E)=>{const M=T.icon;return l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:E*.1},className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:`p-3 rounded-2xl bg-gradient-to-r ${T.color} shadow-lg`,children:l.jsx(M,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:`text-2xl font-bold font-display transition-colors ${n?"text-white":"text-slate-900"}`,children:T.title}),l.jsxs("p",{className:`text-sm transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:[T.articles.length," articles  Real-time updates"]})]})]}),l.jsx("div",{className:"overflow-x-auto pb-4",children:l.jsx("div",{className:"flex space-x-6",style:{width:"max-content"},children:T.articles.map((N,R)=>l.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:R*.05},whileHover:{y:-5,scale:1.02},className:`w-80 backdrop-blur-sm border rounded-3xl p-6 shadow-xl hover:shadow-2xl transition-all duration-500 cursor-pointer group ${n?"bg-white/5 border-white/10 hover:bg-white/10":"bg-white border-slate-200 hover:bg-slate-50"}`,onClick:()=>w(N),children:[l.jsxs("div",{className:"relative mb-4",children:[l.jsx("img",{src:N.urlToImage||"https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=400",alt:N.title,className:"w-full h-40 object-cover rounded-2xl",onError:O=>{O.currentTarget.src="https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=400"}}),l.jsx("div",{className:"absolute top-3 right-3",children:l.jsx("div",{className:"bg-black/50 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-semibold",children:"LIVE"})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:`font-bold text-lg leading-tight line-clamp-2 transition-colors group-hover:text-glow-purple ${n?"text-white":"text-slate-900"}`,children:N.title}),l.jsx("p",{className:`text-sm leading-relaxed line-clamp-3 transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:N.description}),l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Q,{className:"w-3 h-3 text-glow-purple"}),l.jsx("span",{className:`transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:new Date(N.publishedDate).toLocaleDateString()})]}),l.jsx("span",{className:`font-medium transition-colors ${n?"text-glow-purple":"text-purple-600"}`,children:N.source})]}),l.jsxs("div",{className:"flex space-x-2 pt-2",children:[l.jsxs(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:O=>{O.stopPropagation(),w(N)},className:`flex-1 px-3 py-2 rounded-xl text-xs font-semibold transition-all duration-300 flex items-center justify-center space-x-1 ${n?"bg-glow-purple/10 border border-glow-purple/20 text-glow-purple hover:bg-glow-purple/20":"bg-purple-50 border border-purple-200 text-purple-700 hover:bg-purple-100"}`,children:[l.jsx(oe,{className:"w-3 h-3"}),l.jsx("span",{children:"Smart Summary"})]}),l.jsxs(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:O=>{O.stopPropagation(),k(N)},className:`flex-1 px-3 py-2 rounded-xl text-xs font-semibold transition-all duration-300 flex items-center justify-center space-x-1 ${n?"bg-white/10 border border-white/20 text-white hover:bg-white/20":"bg-slate-100 border border-slate-200 text-slate-700 hover:bg-slate-200"}`,children:[l.jsx(Q,{className:"w-3 h-3"}),l.jsx("span",{children:"Timeline"})]})]})]})]},N.id))})})]},T.category)})}),c&&s&&l.jsxs(D.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:()=>u(!1),children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),l.jsxs(D.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},onClick:T=>T.stopPropagation(),className:`relative w-full max-w-4xl max-h-[90vh] overflow-y-auto backdrop-blur-sm border rounded-3xl p-8 shadow-xl ${n?"bg-black/90 border-white/10":"bg-white/90 border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:`text-2xl font-bold transition-colors ${n?"text-white":"text-slate-900"}`,children:"Smart Summary"}),l.jsx("button",{onClick:()=>u(!1),className:`p-2 rounded-xl transition-colors ${n?"hover:bg-white/10":"hover:bg-slate-100"}`,children:l.jsx(mr,{className:"w-5 h-5"})})]}),p?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(oe,{className:"w-12 h-12 text-glow-purple mx-auto mb-4 animate-pulse"}),l.jsx("p",{className:`text-lg font-semibold transition-colors ${n?"text-white":"text-slate-900"}`,children:"Generating Smart Summary..."}),l.jsx("p",{className:`text-sm transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:"Analyzing multiple sources with AI"})]}):s.summary?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`p-6 rounded-2xl border ${n?"bg-glow-purple/10 border-glow-purple/20":"bg-purple-50 border-purple-200"}`,children:[l.jsx("h3",{className:`font-bold mb-3 transition-colors ${n?"text-white":"text-slate-900"}`,children:"TL;DR"}),l.jsx("p",{className:`leading-relaxed transition-colors ${n?"text-slate-300":"text-slate-700"}`,children:s.summary.tldr})]}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold mb-3 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Key Points"}),l.jsx("ul",{className:"space-y-2",children:s.summary.keyPoints.map((T,E)=>l.jsxs("li",{className:`flex items-start space-x-2 transition-colors ${n?"text-slate-300":"text-slate-700"}`,children:[l.jsx("span",{className:"text-glow-purple mt-1",children:""}),l.jsx("span",{children:T})]},E))})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold mb-3 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Context"}),l.jsx("p",{className:`text-sm leading-relaxed transition-colors ${n?"text-slate-300":"text-slate-700"}`,children:s.summary.context})]}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold mb-3 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Implications"}),l.jsx("p",{className:`text-sm leading-relaxed transition-colors ${n?"text-slate-300":"text-slate-700"}`,children:s.summary.implications})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-semibold ${s.summary.trustScore>=90?"bg-green-500/20 text-green-400":s.summary.trustScore>=70?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:["Trust Score: ",s.summary.trustScore,"%"]}),l.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:`px-4 py-2 rounded-xl text-sm font-semibold transition-all duration-300 flex items-center space-x-2 ${n?"bg-white/10 border border-white/20 text-white hover:bg-white/20":"bg-slate-100 border border-slate-200 text-slate-700 hover:bg-slate-200"}`,children:[l.jsx("span",{children:"Read Original"}),l.jsx(Q,{className:"w-4 h-4"})]})]})]}):l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:`text-lg transition-colors ${n?"text-white":"text-slate-900"}`,children:"Failed to generate summary"})})]})]}),d&&s&&l.jsxs(D.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),l.jsxs(D.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},onClick:T=>T.stopPropagation(),className:`relative w-full max-w-4xl max-h-[90vh] overflow-y-auto backdrop-blur-sm border rounded-3xl p-8 shadow-xl ${n?"bg-black/90 border-white/10":"bg-white/90 border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:`text-2xl font-bold transition-colors ${n?"text-white":"text-slate-900"}`,children:"Event Timeline"}),l.jsx("button",{onClick:()=>h(!1),className:`p-2 rounded-xl transition-colors ${n?"hover:bg-white/10":"hover:bg-slate-100"}`,children:l.jsx(mr,{className:"w-5 h-5"})})]}),m?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Q,{className:"w-12 h-12 text-glow-purple mx-auto mb-4 animate-pulse"}),l.jsx("p",{className:`text-lg font-semibold transition-colors ${n?"text-white":"text-slate-900"}`,children:"Generating Timeline..."}),l.jsx("p",{className:`text-sm transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:"Analyzing chronological events"})]}):s.timeline?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"space-y-4",children:s.timeline.events.map((T,E)=>l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"w-3 h-3 bg-glow-purple rounded-full"}),E<s.timeline.events.length-1&&l.jsx("div",{className:"w-px h-16 bg-glow-purple/30 mt-2"})]}),l.jsxs("div",{className:"flex-1 pb-8",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx("span",{className:`text-sm font-medium transition-colors ${n?"text-glow-purple":"text-purple-600"}`,children:new Date(T.date).toLocaleDateString()}),l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${n?"bg-white/10 text-slate-400":"bg-slate-100 text-slate-600"}`,children:T.source})]}),l.jsx("h4",{className:`font-semibold mb-1 transition-colors ${n?"text-white":"text-slate-900"}`,children:T.title}),l.jsx("p",{className:`text-sm leading-relaxed transition-colors ${n?"text-slate-300":"text-slate-700"}`,children:T.description})]})]},E))}),s.timeline.analysis&&l.jsxs("div",{className:`p-6 rounded-2xl border ${n?"bg-white/5 border-white/10":"bg-slate-50 border-slate-200"}`,children:[l.jsx("h3",{className:`font-bold mb-3 transition-colors ${n?"text-white":"text-slate-900"}`,children:"AI Analysis"}),l.jsx("p",{className:`text-sm leading-relaxed transition-colors ${n?"text-slate-300":"text-slate-700"}`,children:s.timeline.analysis.summary})]})]}):l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:`text-lg transition-colors ${n?"text-white":"text-slate-900"}`,children:"Failed to generate timeline"})})]})]})]})})},Wl=C.createContext(void 0),Vr=()=>{const n=C.useContext(Wl);if(n===void 0)throw new Error("useApiKeys must be used within an ApiKeyProvider");return n},zm=({children:n})=>{const[e,r]=C.useState({openai:{}.VITE_OPENAI_API_KEY||"",claude:{}.VITE_CLAUDE_API_KEY||"",mistral:{}.VITE_MISTRAL_API_KEY||"",cohere:{}.VITE_COHERE_API_KEY||"",ollama:{}.VITE_OLLAMA_BASE_URL||"http://localhost:11434",newsapi:{}.VITE_NEWSAPI_KEY||"",bing:{}.VITE_BING_IMAGE_API_KEY||"",google:{}.VITE_GOOGLE_API_KEY||""}),[i,a]=C.useState("claude-3-haiku");C.useEffect(()=>{const d=localStorage.getItem("realitycheck_api_keys");if(d)try{const p=JSON.parse(d);r(f=>{const m={...f};return Object.keys(p).forEach(x=>{p[x]&&p[x].trim()!==""&&(m[x]=p[x])}),m})}catch(p){console.error("Error loading saved API keys:",p)}const h=localStorage.getItem("realitycheck_selected_model");h&&a(h)},[]),C.useEffect(()=>{const d={};Object.entries(e).forEach(([h,p])=>{p&&p.trim()!==""&&(d[h]=p)}),localStorage.setItem("realitycheck_api_keys",JSON.stringify(d))},[e]),C.useEffect(()=>{localStorage.setItem("realitycheck_selected_model",i)},[i]);const s=(d,h)=>{r(p=>({...p,[d]:h}))},o=d=>{const h=e[d];return!h||h==="demo-key"||h.trim()===""||h==="your_openai_api_key"||h==="your_claude_api_key"||h==="your_mistral_api_key"||h==="your_cohere_api_key"||h==="your_newsapi_key"||h==="your_bing_image_search_api_key"||h==="your_google_api_key"?null:h},c=d=>o(d)!==null,u=[{id:"ollama-llama2",name:"Llama 2 (Local)",provider:"Ollama",description:"Local inference, privacy-focused",requiresKey:!1,isAvailable:!0},{id:"ollama-codellama",name:"Code Llama (Local)",provider:"Ollama",description:"Specialized for code and technical tasks",requiresKey:!1,isAvailable:!0},{id:"ollama-mistral",name:"Mistral 7B (Local)",provider:"Ollama",description:"Fast local inference",requiresKey:!1,isAvailable:!0},{id:"gpt-4",name:"GPT-4",provider:"OpenAI",description:"Most capable model for complex reasoning",requiresKey:!0,isAvailable:c("openai")},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",provider:"OpenAI",description:"Fast and efficient for most tasks",requiresKey:!0,isAvailable:c("openai")},{id:"claude-3-sonnet",name:"Claude 3 Sonnet",provider:"Anthropic",description:"Excellent for analysis and reasoning",requiresKey:!0,isAvailable:c("claude")},{id:"claude-3-haiku",name:"Claude 3 Haiku",provider:"Anthropic",description:"Fast and cost-effective",requiresKey:!0,isAvailable:c("claude")},{id:"mistral-large",name:"Mistral Large",provider:"Mistral AI",description:"High-performance multilingual model",requiresKey:!0,isAvailable:c("mistral")},{id:"mistral-medium",name:"Mistral Medium",provider:"Mistral AI",description:"Balanced performance and speed",requiresKey:!0,isAvailable:c("mistral")},{id:"command-r-plus",name:"Command R+",provider:"Cohere",description:"Advanced reasoning and generation",requiresKey:!0,isAvailable:c("cohere")}];return l.jsx(Wl.Provider,{value:{apiKeys:e,updateApiKey:s,getActiveKey:o,hasValidKey:c,selectedModel:i,setSelectedModel:a,availableModels:u},children:n})},At=class At{constructor(){sn(this,"baseUrl");sn(this,"availableModels",[]);this.baseUrl={}.VITE_OLLAMA_BASE_URL||"http://localhost:11434"}static getInstance(){return At.instance||(At.instance=new At),At.instance}async checkConnection(){try{const e=new AbortController,r=setTimeout(()=>e.abort(),5e3),i=await fetch(`${this.baseUrl}/api/tags`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},signal:e.signal,mode:"cors"});if(clearTimeout(r),!i.ok)throw new Error(`Ollama API returned status ${i.status}: ${i.statusText}`);const a=await i.json();return this.availableModels=a.models||[],{connected:!0,models:this.availableModels}}catch(e){if(console.error("Ollama connection error:",e),e instanceof Error){if(e.name==="AbortError")throw new Error("Ollama connection timeout. Please ensure Ollama is running and accessible.");if(e instanceof TypeError||e.message==="Failed to fetch")throw new Error(`Cannot connect to Ollama. Please ensure:
1. Ollama is installed and running (run "ollama serve")
2. Ollama is accessible at `+this.baseUrl+`
3. No firewall is blocking the connection`);if(e.message.includes("CORS"))throw new Error(`CORS error connecting to Ollama. You may need to start Ollama with CORS enabled:
OLLAMA_ORIGINS=* ollama serve`)}return{connected:!1,models:[]}}}async getAvailableModels(){return(await this.checkConnection()).models}async chat(e,r){var i,a;try{const s=await this.checkConnection();if(!s.connected)throw new Error('Ollama not detected. Please start Ollama on your local machine by running "ollama serve" in your terminal.');const o=r||((i=s.models[0])==null?void 0:i.name);if(!o)throw new Error("No Ollama models found. Please install a model using: ollama pull llama2");const c=new AbortController,u=setTimeout(()=>c.abort(),3e4),d=await fetch(`${this.baseUrl}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({model:o,messages:e,stream:!1,options:{temperature:.7,top_p:.9}}),signal:c.signal,mode:"cors"});if(clearTimeout(u),!d.ok)throw d.status===404?new Error(`Model '${o}' not found. Available models: ${s.models.map(p=>p.name).join(", ")}`):new Error(`Ollama API error: ${d.status} ${d.statusText}`);const h=await d.json();return{content:((a=h.message)==null?void 0:a.content)||"No response generated",model:o,usage:{prompt_tokens:h.prompt_eval_count||0,completion_tokens:h.eval_count||0,total_tokens:(h.prompt_eval_count||0)+(h.eval_count||0)}}}catch(s){if(console.error("Ollama chat error:",s),s instanceof Error){if(s.name==="AbortError")throw new Error("Ollama request timeout. The model may be taking too long to respond.");if(s instanceof TypeError||s.message==="Failed to fetch")throw new Error("Lost connection to Ollama. Please ensure Ollama is still running.")}throw s}}async generateEmbeddings(e,r="nomic-embed-text"){try{const i=new AbortController,a=setTimeout(()=>i.abort(),15e3),s=await fetch(`${this.baseUrl}/api/embeddings`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({model:r,prompt:e}),signal:i.signal,mode:"cors"});if(clearTimeout(a),!s.ok)throw new Error(`Ollama embeddings error: ${s.status} ${s.statusText}`);return(await s.json()).embedding||[]}catch(i){return console.error("Ollama embeddings error:",i),[]}}async pullModel(e){try{const r=await fetch(`${this.baseUrl}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:e}),mode:"cors"});if(!r.ok)throw new Error(`Failed to pull model: ${r.status} ${r.statusText}`)}catch(r){throw console.error("Model pull error:",r),r}}getBaseUrl(){return this.baseUrl}setBaseUrl(e){this.baseUrl=e}};sn(At,"instance");let Qi=At;const Ar=Qi.getInstance(),$t=class $t{constructor(){}static getInstance(){return $t.instance||($t.instance=new $t),$t.instance}async chat(e,r,i){try{if(r.startsWith("ollama-")){const a=r.replace("ollama-","");return{...await Ar.chat(e,a),provider:"Ollama"}}if(r.startsWith("gpt-"))return await this.chatWithOpenAI(e,r,i.openai);if(r.startsWith("claude-"))return await this.chatWithClaude(e,r,i.claude);if(r.startsWith("mistral-"))return await this.chatWithMistral(e,r,i.mistral);if(r.startsWith("command-"))return await this.chatWithCohere(e,r,i.cohere);throw new Error(`Unsupported model: ${r}`)}catch(a){throw console.error("AI Service error:",a),a}}async chatWithOpenAI(e,r,i){var a,s,o;if(!i)throw new Error("OpenAI API key not configured");try{const c=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",mode:"cors",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({model:r,messages:e,temperature:.7,max_tokens:2e3})});if(!c.ok){let d=`OpenAI API error: ${c.status}`;try{d=((a=(await c.json()).error)==null?void 0:a.message)||d}catch{}throw new Error(d)}const u=await c.json();return{content:((o=(s=u.choices[0])==null?void 0:s.message)==null?void 0:o.content)||"No response generated",model:r,provider:"OpenAI",usage:u.usage}}catch(c){throw c instanceof TypeError&&c.message.includes("fetch")?new Error("Network error: Unable to connect to OpenAI API. Please check your internet connection."):c}}async chatWithClaude(e,r,i){var o,c,u;if(!i)throw new Error("Claude API key not configured");const a=((o=e.find(d=>d.role==="system"))==null?void 0:o.content)||"",s=e.filter(d=>d.role!=="system");try{const d=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",mode:"cors",headers:{"x-api-key":i,"Content-Type":"application/json","anthropic-version":"2023-06-01"},body:JSON.stringify({model:r,max_tokens:2e3,system:a,messages:s})});if(!d.ok){let p=`Claude API error: ${d.status}`;try{p=((c=(await d.json()).error)==null?void 0:c.message)||p}catch{}throw new Error(p)}const h=await d.json();return{content:((u=h.content[0])==null?void 0:u.text)||"No response generated",model:r,provider:"Anthropic",usage:h.usage}}catch(d){throw d instanceof TypeError&&d.message.includes("fetch")?new Error("Network error: Unable to connect to Claude API. Please check your internet connection."):d}}async chatWithMistral(e,r,i){var a,s,o;if(!i)throw new Error("Mistral API key not configured");try{const c=await fetch("https://api.mistral.ai/v1/chat/completions",{method:"POST",mode:"cors",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({model:r,messages:e,temperature:.7,max_tokens:2e3})});if(!c.ok){let d=`Mistral API error: ${c.status}`;try{d=((a=(await c.json()).error)==null?void 0:a.message)||d}catch{}throw new Error(d)}const u=await c.json();return{content:((o=(s=u.choices[0])==null?void 0:s.message)==null?void 0:o.content)||"No response generated",model:r,provider:"Mistral AI",usage:u.usage}}catch(c){throw c instanceof TypeError&&c.message.includes("fetch")?new Error("Network error: Unable to connect to Mistral API. Please check your internet connection."):c}}async chatWithCohere(e,r,i){var o,c,u,d,h,p,f,m;if(!i)throw new Error("Cohere API key not configured");const a=e[e.length-1],s=e.slice(0,-1).map(x=>({role:x.role==="assistant"?"CHATBOT":"USER",message:x.content}));try{const x=await fetch("https://api.cohere.ai/v1/chat",{method:"POST",mode:"cors",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({model:r,message:a.content,chat_history:s,temperature:.7,max_tokens:2e3})});if(!x.ok){let v=`Cohere API error: ${x.status}`;try{v=(await x.json()).message||v}catch{}throw new Error(v)}const y=await x.json();return{content:y.text||"No response generated",model:r,provider:"Cohere",usage:{prompt_tokens:((c=(o=y.meta)==null?void 0:o.tokens)==null?void 0:c.input_tokens)||0,completion_tokens:((d=(u=y.meta)==null?void 0:u.tokens)==null?void 0:d.output_tokens)||0,total_tokens:(((p=(h=y.meta)==null?void 0:h.tokens)==null?void 0:p.input_tokens)||0)+(((m=(f=y.meta)==null?void 0:f.tokens)==null?void 0:m.output_tokens)||0)}}}catch(x){throw x instanceof TypeError&&x.message.includes("fetch")?new Error("Network error: Unable to connect to Cohere API. Please check your internet connection."):x}}};sn($t,"instance");let Zi=$t;const Lm=Zi.getInstance(),Um=()=>{var xe,de;const{isDark:n}=fe(),{apiKeys:e,selectedModel:r,setSelectedModel:i,availableModels:a}=Vr(),[s,o]=C.useState([]),[c,u]=C.useState(""),[d,h]=C.useState(!1),[p,f]=C.useState([]),[m,x]=C.useState(null),[y,v]=C.useState(!1),[g,b]=C.useState(!1),[S,j]=C.useState(null),[w,k]=C.useState(!1),A=C.useRef(null),_=C.useRef(null),P=a.filter(z=>z.isAvailable||z.provider==="Ollama");C.useEffect(()=>{const K=setTimeout(()=>{var te;(te=A.current)==null||te.scrollIntoView({behavior:"smooth"})},0);return()=>clearTimeout(K)},[s,d]),C.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const K=window.webkitSpeechRecognition||window.SpeechRecognition;_.current=new K,_.current.continuous=!1,_.current.interimResults=!1,_.current.lang="en-US",_.current.onresult=te=>{const ue=te.results[0][0].transcript;u(ue),v(!1)},_.current.onerror=()=>{v(!1)},_.current.onend=()=>{v(!1)}}const z=localStorage.getItem("chatSessions");z&&f(JSON.parse(z))},[]);const I=async()=>{k(!0);try{(await Ar.checkConnection()).connected?j(null):j('Ollama not connected. Please start Ollama by running "ollama serve" in your terminal.')}catch(z){z instanceof Error?j(z.message):j("Failed to connect to Ollama. Please ensure it is running.")}finally{k(!1)}},T=()=>{_.current&&!y&&(v(!0),_.current.start())},E=()=>{_.current&&y&&(_.current.stop(),v(!1))},M=z=>{if(g&&"speechSynthesis"in window){const K=new SpeechSynthesisUtterance(z);K.rate=.9,K.pitch=1,speechSynthesis.speak(K)}},N=async()=>{if(!c.trim())return;const z=P.find(ue=>ue.id===r);if(z!=null&&z.requiresKey&&!z.isAvailable){j(`${z.provider} API key not configured. Please add your API key in settings.`);return}j(null);const K={id:Date.now().toString(),type:"user",content:c,timestamp:new Date},te=[...s,K];o(te),u(""),h(!0);try{const ue=await Lm.chat([{role:"system",content:"You are a helpful AI assistant specialized in research, analysis, and providing accurate information."},...te.map(rn=>({role:rn.type==="user"?"user":"assistant",content:rn.content}))],r,e),Ae={id:(Date.now()+1).toString(),type:"assistant",content:ue.content,timestamp:new Date,model:ue.model,provider:ue.provider,error:!1},Ye=[...te,Ae];o(Ye),g&&M(Ae.content),m&&U(Ye)}catch(ue){console.error("AI response error:",ue);const Ae={id:(Date.now()+1).toString(),type:"assistant",content:ue instanceof Error?ue.message:"An unexpected error occurred. Please try again.",timestamp:new Date,model:r,provider:(z==null?void 0:z.provider)||"Unknown",error:!0};o([...te,Ae]),j(ue instanceof Error?ue.message:"Unknown error occurred")}finally{h(!1)}},R=()=>{const z={id:Date.now().toString(),name:`Chat ${p.length+1}`,messages:[],createdAt:new Date,lastUpdated:new Date},K=[...p,z];f(K),x(z.id),o([]),j(null),localStorage.setItem("chatSessions",JSON.stringify(K))},O=z=>{const K=p.find(te=>te.id===z);K&&(x(z),o(K.messages),j(null))},U=z=>{if(!m)return;const K=p.map(te=>te.id===m?{...te,messages:z,lastUpdated:new Date}:te);f(K),localStorage.setItem("chatSessions",JSON.stringify(K))},H=z=>{const K=p.filter(te=>te.id!==z);f(K),localStorage.setItem("chatSessions",JSON.stringify(K)),m===z&&(x(null),o([]),j(null))},B=()=>{if(s.length===0)return;const z=s.map(Ae=>`**${Ae.type==="user"?"You":`AI (${Ae.provider})`}**: ${Ae.content}

`).join(""),K=new Blob([z],{type:"text/markdown"}),te=URL.createObjectURL(K),ue=document.createElement("a");ue.href=te,ue.download=`chat-export-${new Date().toISOString().split("T")[0]}.md`,ue.click(),URL.revokeObjectURL(te)},G=z=>{navigator.clipboard.writeText(z)},J=()=>{o([]),j(null),m&&U([])},Y=()=>{const z=P.find(K=>K.id===r);return z?z.requiresKey&&!z.isAvailable?l.jsx(_n,{className:"w-4 h-4 text-yellow-400"}):l.jsx(Kt,{className:"w-4 h-4 text-green-400"}):l.jsx(En,{className:"w-4 h-4 text-red-400"})},ie=()=>{const z=P.find(K=>K.id===r);return z?z.requiresKey&&!z.isAvailable?`${z.name} (API Key Required)`:`${z.name} (Ready)`:"No Model Selected"},Z=()=>{if(!c.trim()||d)return!1;const z=P.find(K=>K.id===r);return!(!z||z.requiresKey&&!z.isAvailable)};return l.jsxs("div",{className:`min-h-screen flex flex-col transition-colors duration-300 ${n?"bg-black":"bg-white"}`,children:[l.jsx("div",{className:"pt-20 px-6 py-8 flex-shrink-0",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[l.jsxs("div",{className:`inline-flex items-center space-x-2 px-6 py-3 rounded-full backdrop-blur-sm border mb-4 ${n?"bg-white/5 border-white/10 text-glow-purple":"bg-slate-100 border-slate-200 text-purple-700"}`,children:[l.jsx(xa,{className:"w-5 h-5"}),l.jsx("span",{className:"font-semibold",children:"Multi-Model AI Chat"})]}),l.jsx("h1",{className:`text-5xl font-bold font-display mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Chat"}),l.jsx("p",{className:`text-lg font-body transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:"Chat with multiple AI models including local Ollama and cloud providers"}),l.jsx("div",{className:"mt-4",children:l.jsxs("div",{className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full ${n?"bg-white/5 border border-white/10":"bg-slate-50 border border-slate-200"}`,children:[Y(),l.jsx("span",{className:`font-medium text-sm transition-colors ${n?"text-white":"text-slate-900"}`,children:ie()})]})}),S&&l.jsx(D.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`mt-4 p-4 rounded-2xl border ${n?"bg-red-500/10 border-red-500/20":"bg-red-50 border-red-200"}`,children:l.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[l.jsx(Qa,{className:"w-5 h-5 text-red-400"}),l.jsx("span",{className:`font-medium ${n?"text-red-300":"text-red-700"}`,children:S}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:I,disabled:w,className:`px-4 py-2 rounded-xl font-semibold transition-all duration-300 ${n?"bg-red-500/20 text-red-300 hover:bg-red-500/30":"bg-red-200 text-red-700 hover:bg-red-300"}`,children:w?"Checking...":"Retry"})]})})]})})}),l.jsx("div",{className:"flex-1 flex px-6 pb-6",children:l.jsxs("div",{className:"max-w-7xl mx-auto w-full flex gap-6",children:[l.jsxs(D.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"w-80 flex flex-col",children:[l.jsxs("div",{className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl mb-6 ${n?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsx("h2",{className:`text-xl font-bold font-display mb-4 transition-colors ${n?"text-white":"text-slate-900"}`,children:"AI Models"}),P.length===0?l.jsxs("div",{className:`text-center p-4 rounded-xl border ${n?"bg-yellow-500/10 border-yellow-500/20 text-yellow-300":"bg-yellow-50 border-yellow-200 text-yellow-700"}`,children:[l.jsx(_n,{className:"w-8 h-8 mx-auto mb-2"}),l.jsx("p",{className:"font-medium",children:"No Models Available"}),l.jsx("p",{className:"text-sm mt-1",children:"Please configure API keys in Settings"})]}):l.jsx("div",{className:"space-y-3",children:P.map(z=>l.jsx(D.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(z.id),className:`w-full p-3 rounded-xl border transition-all duration-300 text-left ${r===z.id?n?"bg-glow-purple/20 border-glow-purple/50 text-white":"bg-purple-100 border-purple-300 text-purple-900":n?"bg-white/5 border-white/10 text-white hover:bg-white/10":"bg-slate-50 border-slate-200 text-slate-900 hover:bg-slate-100"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold",children:z.name}),l.jsx("div",{className:`text-xs ${r===z.id?n?"text-purple-300":"text-purple-700":n?"text-slate-400":"text-slate-600"}`,children:z.provider}),l.jsx("div",{className:`text-xs mt-1 ${r===z.id?n?"text-purple-200":"text-purple-600":"text-slate-500"}`,children:z.description})]}),l.jsx("div",{className:"ml-2",children:z.requiresKey&&!z.isAvailable?l.jsx(_n,{className:"w-4 h-4 text-yellow-400"}):z.isAvailable||z.provider==="Ollama"?l.jsx(Kt,{className:"w-4 h-4 text-green-400"}):l.jsx(En,{className:"w-4 h-4 text-red-400"})})]})},z.id))})]}),l.jsxs("div",{className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl flex-1 ${n?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:`text-xl font-bold font-display transition-colors ${n?"text-white":"text-slate-900"}`,children:"Chat History"}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:R,className:`p-2 rounded-xl transition-all duration-300 ${n?"bg-glow-purple/10 text-glow-purple hover:bg-glow-purple/20":"bg-purple-100 text-purple-600 hover:bg-purple-200"}`,children:l.jsx(Ei,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:p.map(z=>l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl border transition-all duration-300 ${m===z.id?n?"bg-glow-purple/20 border-glow-purple/30":"bg-purple-100 border-purple-200":n?"bg-white/5 border-white/10 hover:bg-white/10":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,children:[l.jsxs("button",{onClick:()=>O(z.id),className:"flex-1 text-left",children:[l.jsx("p",{className:`font-medium text-sm transition-colors ${n?"text-white":"text-slate-900"}`,children:z.name}),l.jsxs("p",{className:`text-xs transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:[z.messages.length," messages"]})]}),l.jsx("button",{onClick:()=>H(z.id),className:`p-1 rounded transition-colors ${n?"text-slate-400 hover:text-red-400":"text-slate-500 hover:text-red-500"}`,children:l.jsx(uu,{className:"w-4 h-4"})})]},z.id))})]})]}),l.jsx(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"flex-1 flex flex-col",children:l.jsxs("div",{className:`backdrop-blur-sm border rounded-3xl shadow-xl flex-1 flex flex-col ${n?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-r from-glow-purple to-glow-pink",children:l.jsx(oe,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-semibold transition-colors ${n?"text-white":"text-slate-900"}`,children:((xe=P.find(z=>z.id===r))==null?void 0:xe.name)||"No Model Selected"}),l.jsx("p",{className:`text-sm transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:((de=P.find(z=>z.id===r))==null?void 0:de.provider)||"Unknown Provider"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>b(!g),className:`p-2 rounded-xl transition-all duration-300 ${g?n?"bg-glow-purple/20 text-glow-purple":"bg-purple-100 text-purple-600":n?"bg-white/10 text-slate-400 hover:bg-white/20":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:g?l.jsx(Za,{className:"w-5 h-5"}):l.jsx(du,{className:"w-5 h-5"})}),s.length>0&&l.jsxs(l.Fragment,{children:[l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:B,className:`p-2 rounded-xl transition-all duration-300 ${n?"bg-white/10 text-slate-400 hover:bg-white/20":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:l.jsx(gr,{className:"w-5 h-5"})}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:J,className:`p-2 rounded-xl transition-all duration-300 ${n?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-500 hover:bg-red-100"}`,children:l.jsx(Un,{className:"w-5 h-5"})})]})]})]}),l.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:s.length===0?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Ei,{className:`w-16 h-16 mx-auto mb-4 transition-colors ${n?"text-slate-400":"text-slate-500"}`}),l.jsx("p",{className:`text-xl font-semibold mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Start a Conversation"}),l.jsx("p",{className:`transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:"Ask questions, seek insights, or discuss research topics with AI models"})]})}):l.jsxs("div",{className:"space-y-6",children:[s.map(z=>l.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex ${z.type==="user"?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-4xl flex items-start space-x-3 ${z.type==="user"?"flex-row-reverse space-x-reverse":""}`,children:[l.jsx("div",{className:`p-2 rounded-xl ${z.type==="user"?"bg-gradient-to-r from-glow-purple to-glow-pink":z.error?n?"bg-red-500/20":"bg-red-100":n?"bg-slate-700":"bg-slate-200"}`,children:z.type==="user"?l.jsx(Fo,{className:"w-5 h-5 text-white"}):z.error?l.jsx(Qa,{className:`w-5 h-5 ${n?"text-red-400":"text-red-600"}`}):l.jsx(es,{className:`w-5 h-5 ${n?"text-slate-300":"text-slate-600"}`})}),l.jsxs("div",{className:`p-4 rounded-2xl backdrop-blur-sm border relative group ${z.type==="user"?n?"bg-glow-purple/20 border-glow-purple/30":"bg-purple-100 border-purple-200":z.error?n?"bg-red-500/10 border-red-500/20":"bg-red-50 border-red-200":n?"bg-white/5 border-white/10":"bg-slate-50 border-slate-200"}`,children:[l.jsx("p",{className:`transition-colors leading-relaxed ${n?"text-white":"text-slate-900"}`,children:z.content}),(z.model||z.provider)&&l.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-white/10",children:[l.jsxs("span",{className:`text-xs font-medium transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:[z.provider," - ",z.model]}),l.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>G(z.content),className:`p-1 rounded transition-all duration-200 ${n?"hover:bg-white/10":"hover:bg-slate-100"}`,children:l.jsx(hu,{className:"w-4 h-4"})}),g&&!z.error&&l.jsx("button",{onClick:()=>M(z.content),className:`p-1 rounded transition-all duration-200 ${n?"hover:bg-white/10":"hover:bg-slate-100"}`,children:l.jsx(Za,{className:"w-4 h-4"})})]})]})]})]})},z.id)),d&&l.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:`p-2 rounded-xl ${n?"bg-slate-700":"bg-slate-200"}`,children:l.jsx(es,{className:`w-5 h-5 ${n?"text-slate-300":"text-slate-600"}`})}),l.jsx("div",{className:`p-4 rounded-2xl backdrop-blur-sm border ${n?"bg-white/5 border-white/10":"bg-slate-50 border-slate-200"}`,children:l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-glow-purple rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-glow-purple rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),l.jsx("div",{className:"w-2 h-2 bg-glow-purple rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),l.jsx("div",{ref:A})]})}),l.jsx("div",{className:"p-6 border-t border-white/10 flex-shrink-0",children:l.jsxs("div",{className:"flex space-x-4",children:[l.jsx("input",{type:"text",value:c,onChange:z=>u(z.target.value),onKeyPress:z=>z.key==="Enter"&&N(),placeholder:"Ask your AI assistant anything...",className:`flex-1 p-4 rounded-2xl backdrop-blur-sm border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-glow-purple ${n?"bg-white/5 border-white/10 text-white placeholder-slate-400":"bg-slate-50 border-slate-200 text-slate-900 placeholder-slate-500"}`}),_.current&&l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:y?E:T,className:`p-4 rounded-2xl transition-all duration-300 ${y?"bg-red-500 text-white shadow-glow":n?"bg-white/10 border border-white/20 text-slate-300 hover:bg-white/20":"bg-slate-100 border border-slate-200 text-slate-600 hover:bg-slate-200"}`,children:y?l.jsx(pu,{className:"w-5 h-5"}):l.jsx(fu,{className:"w-5 h-5"})}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:N,disabled:!Z(),className:"bg-gradient-to-r from-glow-purple to-glow-pink text-white p-4 rounded-2xl shadow-glow hover:shadow-glow-lg transition-all duration-300 disabled:opacity-50",children:l.jsx(mu,{className:"w-5 h-5"})})]})})]})})]})})]})},Fm=({isOpen:n,onClose:e})=>{const{isDark:r}=fe(),{apiKeys:i,updateApiKey:a,hasValidKey:s}=Vr(),[o,c]=C.useState({}),[u,d]=C.useState(i),h=[{key:"openai",name:"OpenAI",description:"GPT-4, GPT-3.5 Turbo models",icon:oe,color:"from-green-500 to-emerald-500",placeholder:"sk-...",helpUrl:"https://platform.openai.com/api-keys"},{key:"claude",name:"Anthropic Claude",description:"Claude 3 Sonnet, Haiku models",icon:Q,color:"from-orange-500 to-red-500",placeholder:"sk-ant-...",helpUrl:"https://console.anthropic.com/account/keys"},{key:"mistral",name:"Mistral AI",description:"Mistral Large, Medium models",icon:st,color:"from-blue-500 to-cyan-500",placeholder:"api_key...",helpUrl:"https://console.mistral.ai/api-keys"},{key:"cohere",name:"Cohere",description:"Command R+ models",icon:lt,color:"from-purple-500 to-pink-500",placeholder:"co_...",helpUrl:"https://dashboard.cohere.ai/api-keys"},{key:"ollama",name:"Ollama (Local)",description:"Local model endpoint",icon:st,color:"from-slate-500 to-slate-600",placeholder:"http://localhost:11434",helpUrl:"https://ollama.ai/download"}],p=[{key:"newsapi",name:"NewsAPI",description:"Real-time news articles",icon:lt,color:"from-indigo-500 to-purple-500",placeholder:"api_key...",helpUrl:"https://newsapi.org/account"},{key:"bing",name:"Bing Search",description:"Image search and verification",icon:xt,color:"from-blue-600 to-blue-700",placeholder:"subscription_key...",helpUrl:"https://azure.microsoft.com/en-us/services/cognitive-services/bing-web-search-api/"},{key:"google",name:"Google APIs",description:"Search and fact-checking",icon:oe,color:"from-red-500 to-yellow-500",placeholder:"AIza...",helpUrl:"https://console.cloud.google.com/apis/credentials"}],f=()=>{Object.entries(u).forEach(([y,v])=>{a(y,v)}),e()},m=y=>{c(v=>({...v,[y]:!v[y]}))},x=(y,v)=>{d(g=>({...g,[y]:v}))};return n?l.jsxs(D.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:e,children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),l.jsxs(D.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:y=>y.stopPropagation(),className:`relative w-full max-w-4xl max-h-[90vh] overflow-y-auto backdrop-blur-sm border rounded-3xl p-8 shadow-xl ${r?"bg-black/90 border-white/10":"bg-white/90 border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(_n,{className:"w-6 h-6 text-glow-purple"}),l.jsx("h2",{className:`text-3xl font-bold transition-colors ${r?"text-white":"text-slate-900"}`,children:"API Key Manager"})]}),l.jsx("button",{onClick:e,className:`p-2 rounded-xl transition-colors ${r?"hover:bg-white/10":"hover:bg-slate-100"}`,children:l.jsx(mr,{className:"w-6 h-6"})})]}),l.jsx("div",{className:`p-6 rounded-2xl border mb-8 ${r?"bg-blue-500/10 border-blue-500/20":"bg-blue-50 border-blue-200"}`,children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(st,{className:"w-5 h-5 text-blue-400 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-semibold mb-2 ${r?"text-white":"text-slate-900"}`,children:"Bring Your Own API Keys (BYOK)"}),l.jsx("p",{className:`text-sm leading-relaxed ${r?"text-blue-300":"text-blue-700"}`,children:"RealityCheck AI is designed to work with your own API keys for maximum privacy and control. Keys are stored locally in your browser and never sent to our servers. You only pay for what you use directly to the providers."})]})]})}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-xl font-bold mb-6 ${r?"text-white":"text-slate-900"}`,children:"AI Models"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:h.map(y=>{const v=y.icon,g=s(y.key),b=u[y.key]||"";return l.jsxs("div",{className:`p-6 rounded-2xl border transition-all duration-300 ${r?"bg-white/5 border-white/10":"bg-slate-50 border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[l.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-r ${y.color}`,children:l.jsx(v,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:`font-semibold ${r?"text-white":"text-slate-900"}`,children:y.name}),l.jsx("p",{className:`text-sm ${r?"text-slate-400":"text-slate-600"}`,children:y.description})]}),l.jsx("div",{className:`p-1 rounded-full ${g?"bg-green-500/20":"bg-red-500/20"}`,children:g?l.jsx(ts,{className:"w-4 h-4 text-green-400"}):l.jsx(mr,{className:"w-4 h-4 text-red-400"})})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:o[y.key]?"text":"password",value:b,onChange:S=>x(y.key,S.target.value),placeholder:y.placeholder,className:`w-full p-3 pr-12 rounded-xl border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-glow-purple ${r?"bg-white/5 border-white/10 text-white placeholder-slate-400":"bg-white border-slate-200 text-slate-900 placeholder-slate-500"}`}),l.jsx("button",{onClick:()=>m(y.key),className:`absolute right-3 top-1/2 transform -translate-y-1/2 p-1 rounded transition-colors ${r?"hover:bg-white/10":"hover:bg-slate-100"}`,children:o[y.key]?l.jsx(ns,{className:"w-4 h-4"}):l.jsx(xt,{className:"w-4 h-4"})})]}),l.jsxs("a",{href:y.helpUrl,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center space-x-1 text-xs mt-2 transition-colors hover:text-glow-purple ${r?"text-slate-400":"text-slate-600"}`,children:[l.jsx("span",{children:"Get API key"}),l.jsx("span",{children:""})]})]},y.key)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:`text-xl font-bold mb-6 ${r?"text-white":"text-slate-900"}`,children:"Data Services"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:p.map(y=>{const v=y.icon,g=s(y.key),b=u[y.key]||"";return l.jsxs("div",{className:`p-6 rounded-2xl border transition-all duration-300 ${r?"bg-white/5 border-white/10":"bg-slate-50 border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[l.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-r ${y.color}`,children:l.jsx(v,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:`font-semibold ${r?"text-white":"text-slate-900"}`,children:y.name}),l.jsx("p",{className:`text-sm ${r?"text-slate-400":"text-slate-600"}`,children:y.description})]}),l.jsx("div",{className:`p-1 rounded-full ${g?"bg-green-500/20":"bg-yellow-500/20"}`,children:g?l.jsx(ts,{className:"w-4 h-4 text-green-400"}):l.jsx(Cn,{className:"w-4 h-4 text-yellow-400"})})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:o[y.key]?"text":"password",value:b,onChange:S=>x(y.key,S.target.value),placeholder:y.placeholder,className:`w-full p-3 pr-12 rounded-xl border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-glow-purple ${r?"bg-white/5 border-white/10 text-white placeholder-slate-400":"bg-white border-slate-200 text-slate-900 placeholder-slate-500"}`}),l.jsx("button",{onClick:()=>m(y.key),className:`absolute right-3 top-1/2 transform -translate-y-1/2 p-1 rounded transition-colors ${r?"hover:bg-white/10":"hover:bg-slate-100"}`,children:o[y.key]?l.jsx(ns,{className:"w-4 h-4"}):l.jsx(xt,{className:"w-4 h-4"})})]}),l.jsxs("a",{href:y.helpUrl,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center space-x-1 text-xs mt-2 transition-colors hover:text-glow-purple ${r?"text-slate-400":"text-slate-600"}`,children:[l.jsx("span",{children:"Get API key"}),l.jsx("span",{children:""})]})]},y.key)})})]})]}),l.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-white/10",children:[l.jsx("div",{className:`text-sm ${r?"text-slate-400":"text-slate-600"}`,children:"Keys are stored locally and never sent to our servers"}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:e,className:`px-6 py-3 rounded-2xl font-semibold transition-all duration-300 ${r?"bg-white/10 text-white hover:bg-white/20":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Cancel"}),l.jsx(D.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,className:"bg-gradient-to-r from-glow-purple to-glow-pink text-white px-8 py-3 rounded-2xl font-semibold shadow-glow hover:shadow-glow-lg transition-all duration-300",children:"Save Keys"})]})]})]})]}):null},Bm=()=>{const{isDark:n}=fe(),{availableModels:e,hasValidKey:r}=Vr(),[i,a]=C.useState(!1),[s,o]=C.useState({notifications:!0,autoRefresh:!0,darkMode:n,compactMode:!1,showPreviews:!0,enableVoice:!0,saveHistory:!0,analytics:!1}),c=(p,f)=>{o(m=>({...m,[p]:f}))},u=()=>{localStorage.setItem("realitycheck_settings",JSON.stringify(s))},d=()=>{const p={notifications:!0,autoRefresh:!0,darkMode:!0,compactMode:!1,showPreviews:!0,enableVoice:!0,saveHistory:!0,analytics:!1};o(p),localStorage.setItem("realitycheck_settings",JSON.stringify(p))},h=[{title:"AI Models",icon:oe,settings:[{key:"aiModels",name:"Available Models",description:`${e.filter(p=>p.isAvailable).length}/${e.length} models configured`,type:"action",action:()=>a(!0),actionText:"Manage API Keys"}]},{title:"Interface",icon:gu,settings:[{key:"notifications",name:"Notifications",description:"Show system notifications and alerts",type:"toggle",value:s.notifications},{key:"autoRefresh",name:"Auto Refresh",description:"Automatically refresh content every 30 seconds",type:"toggle",value:s.autoRefresh},{key:"compactMode",name:"Compact Mode",description:"Use smaller cards and reduced spacing",type:"toggle",value:s.compactMode},{key:"showPreviews",name:"Show Previews",description:"Display article previews and thumbnails",type:"toggle",value:s.showPreviews}]},{title:"Features",icon:Q,settings:[{key:"enableVoice",name:"Voice Features",description:"Enable voice input and speech synthesis",type:"toggle",value:s.enableVoice},{key:"saveHistory",name:"Save History",description:"Keep chat and search history locally",type:"toggle",value:s.saveHistory}]},{title:"Privacy",icon:st,settings:[{key:"analytics",name:"Usage Analytics",description:"Help improve the platform by sharing anonymous usage data",type:"toggle",value:s.analytics}]}];return l.jsxs("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${n?"bg-black":"bg-white"}`,children:[l.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[l.jsxs("div",{className:`inline-flex items-center space-x-2 px-6 py-3 rounded-full backdrop-blur-sm border mb-6 ${n?"bg-white/5 border-white/10 text-glow-purple":"bg-slate-100 border-slate-200 text-purple-700"}`,children:[l.jsx(Bo,{className:"w-5 h-5"}),l.jsx("span",{className:"font-semibold",children:"Platform Configuration"})]}),l.jsx("h1",{className:`text-5xl font-bold font-display mb-4 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Settings"}),l.jsx("p",{className:`text-xl max-w-2xl mx-auto font-body transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:"Configure your RealityCheck AI experience, manage API keys, and customize platform behavior"})]}),l.jsx("div",{className:"space-y-8",children:h.map((p,f)=>{const m=p.icon;return l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},className:`backdrop-blur-sm border rounded-3xl p-8 shadow-xl ${n?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[l.jsx("div",{className:"p-3 rounded-2xl bg-gradient-to-r from-glow-purple to-glow-pink",children:l.jsx(m,{className:"w-6 h-6 text-white"})}),l.jsx("h2",{className:`text-2xl font-bold transition-colors ${n?"text-white":"text-slate-900"}`,children:p.title})]}),l.jsx("div",{className:"space-y-4",children:p.settings.map(x=>l.jsxs("div",{className:`flex items-center justify-between p-4 rounded-2xl border ${n?"bg-white/5 border-white/10":"bg-slate-50 border-slate-200"}`,children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`font-semibold mb-1 transition-colors ${n?"text-white":"text-slate-900"}`,children:x.name}),l.jsx("p",{className:`text-sm transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:x.description})]}),l.jsxs("div",{className:"ml-4",children:[x.type==="toggle"&&l.jsx("button",{onClick:()=>"value"in x?c(x.key,!x.value):void 0,className:`p-1 rounded-full transition-colors ${"value"in x&&x.value?"text-glow-purple":n?"text-slate-400":"text-slate-500"}`,children:"value"in x&&x.value?l.jsx(xu,{className:"w-8 h-8"}):l.jsx(vu,{className:"w-8 h-8"})}),x.type==="action"&&l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:"action"in x?x.action:void 0,className:`px-4 py-2 rounded-xl font-semibold transition-all duration-300 ${n?"bg-glow-purple/10 border border-glow-purple/20 text-glow-purple hover:bg-glow-purple/20":"bg-purple-50 border border-purple-200 text-purple-700 hover:bg-purple-100"}`,children:"actionText"in x?x.actionText:""})]})]},x.key))})]},p.title)})}),l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"flex items-center justify-center space-x-4 mt-12",children:[l.jsxs(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:d,className:`px-6 py-3 rounded-2xl font-semibold transition-all duration-300 flex items-center space-x-2 ${n?"bg-white/10 border border-white/20 text-white hover:bg-white/20":"bg-slate-100 border border-slate-200 text-slate-700 hover:bg-slate-200"}`,children:[l.jsx(Un,{className:"w-4 h-4"}),l.jsx("span",{children:"Reset to Defaults"})]}),l.jsxs(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:u,className:"bg-gradient-to-r from-glow-purple to-glow-pink text-white px-8 py-3 rounded-2xl font-semibold shadow-glow hover:shadow-glow-lg transition-all duration-300 flex items-center space-x-2",children:[l.jsx(yu,{className:"w-4 h-4"}),l.jsx("span",{children:"Save Settings"})]})]}),l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:`mt-12 backdrop-blur-sm border rounded-3xl p-8 shadow-xl ${n?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsx("h2",{className:`text-2xl font-bold mb-6 transition-colors ${n?"text-white":"text-slate-900"}`,children:"API Status Overview"}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{service:"OpenAI",key:"openai",icon:oe},{service:"Claude",key:"claude",icon:Q},{service:"Mistral",key:"mistral",icon:st},{service:"Cohere",key:"cohere",icon:lt},{service:"NewsAPI",key:"newsapi",icon:bu},{service:"Bing Search",key:"bing",icon:xt}].map(({service:p,key:f,icon:m})=>{const x=r(f);return l.jsx("div",{className:`p-4 rounded-2xl border ${x?"bg-green-500/10 border-green-500/20":"bg-red-500/10 border-red-500/20"}`,children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(m,{className:"w-5 h-5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:`font-semibold ${x?"text-green-400":"text-red-400"}`,children:p}),l.jsx("p",{className:`text-xs ${x?"text-green-300":"text-red-300"}`,children:x?"Connected":"Not configured"})]})]})},p)})})]})]}),l.jsx(Fm,{isOpen:i,onClose:()=>a(!1)})]})},qm=()=>{var m,x,y,v;const{id:n}=wa(),{isDark:e}=fe(),[r,i]=C.useState(null),[a,s]=C.useState(!0),[o,c]=C.useState(!1);C.useEffect(()=>{(async()=>{s(!0);const b={id:n||"1",title:"AI-Powered Verification Systems Reach New Milestone in Accuracy",content:`Advanced artificial intelligence systems for media verification have achieved unprecedented accuracy rates, marking a significant breakthrough in the fight against misinformation and manipulated content.

The latest developments in machine learning algorithms have enabled verification systems to detect sophisticated deepfakes, manipulated images, and false narratives with over 99.2% accuracy. This represents a quantum leap from previous generations of detection technology.

Key innovations include:

 Multi-modal analysis combining visual, textual, and contextual signals
 Real-time processing capabilities for immediate verification
 Cross-platform integration with major social media networks
 Advanced neural networks trained on millions of verified samples

The implications for journalism, social media platforms, and information integrity are profound. News organizations can now verify content in real-time, while platforms can automatically flag suspicious material before it spreads.

Dr. Sarah Chen, lead researcher at the AI Verification Institute, explains: "We've reached a tipping point where AI can reliably distinguish between authentic and manipulated content. This technology will be crucial in maintaining information integrity in the digital age."

The system has already been deployed by several major news organizations and has successfully identified over 10,000 instances of manipulated content in the past month alone.

However, experts caution that as detection technology improves, so too do the methods used to create convincing fake content. The ongoing arms race between creators and detectors of synthetic media continues to evolve.

Future developments will focus on:

 Improving detection of subtle manipulations
 Reducing false positive rates
 Expanding language and cultural coverage
 Developing real-time browser extensions for consumers

The technology represents a significant step forward in the globalThis effort to combat misinformation and preserve the integrity of digital information.`,url:"https://example.com/ai-verification-milestone",image_url:"https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=1200",sector:"technology",published_at:new Date(Date.now()-36e5).toISOString(),source:"TechNews Today",author:"Dr. Michael Rodriguez",readingTime:8,tags:["AI","Verification","Technology","Misinformation","Machine Learning"],image_check:{status:"verified",confidence_score:96,match_count:0},text_check:{verification_status:"true",confidence_score:94,reasoning:"Content verified through multiple authoritative sources and expert validation. Claims are supported by peer-reviewed research and official statements."},strategy:{summary:"This breakthrough in AI verification technology represents a critical advancement in combating misinformation. Organizations should consider integration opportunities.",priority_level:"high",action_steps:["Evaluate current verification workflows for potential AI integration","Assess budget allocation for advanced verification technology","Train editorial teams on AI-assisted verification processes","Establish partnerships with AI verification providers"]},related_articles:[{id:"2",title:"Social Media Platforms Implement Real-Time Fact Checking",image_url:"https://images.pexels.com/photos/267399/pexels-photo-267399.jpeg?auto=compress&cs=tinysrgb&w=400",published_at:new Date(Date.now()-72e5).toISOString()},{id:"3",title:"Government Agencies Adopt Advanced Media Verification Tools",image_url:"https://images.pexels.com/photos/8728382/pexels-photo-8728382.jpeg?auto=compress&cs=tinysrgb&w=400",published_at:new Date(Date.now()-108e5).toISOString()},{id:"4",title:"Deepfake Detection Technology Shows Promise in Early Trials",image_url:"https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=400",published_at:new Date(Date.now()-144e5).toISOString()}],timeline_events:[{date:new Date(Date.now()-864e5*30).toISOString(),event:"AI Verification Institute announces breakthrough research",relevance:95},{date:new Date(Date.now()-864e5*15).toISOString(),event:"Major news organizations begin pilot testing",relevance:88},{date:new Date(Date.now()-864e5*7).toISOString(),event:"First successful deployment in live newsroom environment",relevance:92},{date:new Date().toISOString(),event:"Public announcement of 99.2% accuracy milestone",relevance:100}]};await new Promise(S=>setTimeout(S,1e3)),i(b),s(!1)})()},[n]);const u=g=>{switch(g){case"verified":case"true":return{icon:Kt,text:"Verified",color:"text-green-400",bg:"bg-green-500/10 border-green-500/20"};case"suspicious":case"mixed":return{icon:Cn,text:"Mixed",color:"text-yellow-400",bg:"bg-yellow-500/10 border-yellow-500/20"};case"manipulated":case"false":return{icon:En,text:"False",color:"text-red-400",bg:"bg-red-500/10 border-red-500/20"};default:return{icon:Ue,text:"Unverified",color:"text-slate-400",bg:"bg-slate-500/10 border-slate-500/20"}}},d=()=>{var g;navigator.share&&r?navigator.share({title:r.title,text:(g=r.strategy)==null?void 0:g.summary,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},h=()=>{c(!o)};if(a)return l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${e?"bg-black":"bg-white"}`,children:l.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:l.jsxs("div",{className:"animate-pulse space-y-6",children:[l.jsx("div",{className:`h-8 rounded ${e?"bg-white/10":"bg-slate-200"}`}),l.jsx("div",{className:`h-64 rounded-2xl ${e?"bg-white/10":"bg-slate-200"}`}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:`h-4 rounded ${e?"bg-white/10":"bg-slate-200"}`}),l.jsx("div",{className:`h-4 rounded w-3/4 ${e?"bg-white/10":"bg-slate-200"}`}),l.jsx("div",{className:`h-4 rounded w-1/2 ${e?"bg-white/10":"bg-slate-200"}`})]})]})})});if(!r)return l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${e?"bg-black":"bg-white"}`,children:l.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8 text-center",children:[l.jsx("h1",{className:`text-2xl font-bold mb-4 ${e?"text-white":"text-slate-900"}`,children:"Article Not Found"}),l.jsx(we,{to:"/discover",className:"text-glow-purple hover:underline",children:"Return to Discover"})]})});const p=u(((m=r.image_check)==null?void 0:m.status)||"unverified"),f=u(((x=r.text_check)==null?void 0:x.verification_status)||"unverified");return l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${e?"bg-black":"bg-white"}`,children:l.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8 pb-12",children:[l.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:l.jsxs(we,{to:"/discover",className:`inline-flex items-center space-x-2 text-sm font-medium transition-colors hover:text-glow-purple ${e?"text-slate-400":"text-slate-600"}`,children:[l.jsx(va,{className:"w-4 h-4"}),l.jsx("span",{children:"Back to Discover"})]})}),l.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(D.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`backdrop-blur-sm border rounded-3xl p-8 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-semibold bg-glow-purple/20 text-glow-purple",children:r.sector.toUpperCase()}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(qo,{className:"w-4 h-4 text-glow-purple"}),l.jsx("span",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:new Date(r.published_at).toLocaleDateString()})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ue,{className:"w-4 h-4 text-glow-purple"}),l.jsxs("span",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:[r.readingTime," min read"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:d,className:`p-2 rounded-xl transition-all duration-300 ${e?"bg-white/10 text-white hover:bg-white/20":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:l.jsx(xr,{className:"w-5 h-5"})}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:h,className:`p-2 rounded-xl transition-all duration-300 ${o?"bg-glow-purple text-white":e?"bg-white/10 text-white hover:bg-white/20":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:l.jsx(wu,{className:"w-5 h-5"})})]})]}),l.jsx("h1",{className:`text-4xl font-bold font-display mb-6 leading-tight ${e?"text-white":"text-slate-900"}`,children:r.title}),l.jsxs("div",{className:"flex items-center space-x-6 mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(lt,{className:"w-4 h-4 text-glow-purple"}),l.jsx("span",{className:`text-sm font-medium ${e?"text-slate-300":"text-slate-700"}`,children:r.source})]}),r.author&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Fo,{className:"w-4 h-4 text-glow-purple"}),l.jsx("span",{className:`text-sm font-medium ${e?"text-slate-300":"text-slate-700"}`,children:r.author})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[l.jsxs("div",{className:`px-4 py-2 rounded-full border text-sm font-semibold flex items-center space-x-2 ${p.bg}`,children:[l.jsx(xt,{className:"w-4 h-4"}),l.jsxs("span",{className:p.color,children:["Image: ",p.text," (",(y=r.image_check)==null?void 0:y.confidence_score,"%)"]})]}),l.jsxs("div",{className:`px-4 py-2 rounded-full border text-sm font-semibold flex items-center space-x-2 ${f.bg}`,children:[l.jsx(fr,{className:"w-4 h-4"}),l.jsxs("span",{className:f.color,children:["Content: ",f.text," (",(v=r.text_check)==null?void 0:v.confidence_score,"%)"]})]})]})]}),r.image_url&&l.jsx("div",{className:"mb-8",children:l.jsx("img",{src:r.image_url,alt:r.title,className:"w-full h-96 object-cover rounded-2xl",onError:g=>{g.currentTarget.src="https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=1200&h=600&fit=crop"}})}),l.jsx("div",{className:`prose prose-lg max-w-none ${e?"prose-invert":""}`,children:r.content.split(`

`).map((g,b)=>l.jsx("p",{className:`mb-6 leading-relaxed ${e?"text-slate-300":"text-slate-700"}`,children:g},b))}),l.jsx("div",{className:"mt-8 pt-6 border-t border-white/10",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(g=>l.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${e?"bg-white/10 text-slate-300":"bg-slate-100 text-slate-600"}`,children:[l.jsx(_u,{className:"w-3 h-3 inline mr-1"}),g]},g))})}),l.jsx("div",{className:"mt-6",children:l.jsxs(D.a,{whileHover:{scale:1.02},whileTap:{scale:.98},href:r.url,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center space-x-2 px-6 py-3 rounded-2xl font-semibold transition-all duration-300 ${e?"bg-glow-purple/10 border border-glow-purple/20 text-glow-purple hover:bg-glow-purple/20":"bg-purple-50 border border-purple-200 text-purple-700 hover:bg-purple-100"}`,children:[l.jsx("span",{children:"Read Original Article"}),l.jsx(Gt,{className:"w-4 h-4"})]})})]})}),l.jsxs("div",{className:"space-y-8",children:[r.strategy&&l.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx(oe,{className:"w-5 h-5 text-glow-purple"}),l.jsx("h3",{className:`font-bold ${e?"text-white":"text-slate-900"}`,children:"AI Strategic Analysis"})]}),l.jsx("p",{className:`text-sm leading-relaxed mb-4 ${e?"text-slate-300":"text-slate-700"}`,children:r.strategy.summary}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:`font-semibold text-sm ${e?"text-white":"text-slate-900"}`,children:"Recommended Actions:"}),l.jsx("ul",{className:"space-y-1",children:r.strategy.action_steps.map((g,b)=>l.jsxs("li",{className:`text-sm flex items-start space-x-2 ${e?"text-slate-300":"text-slate-700"}`,children:[l.jsx(Fn,{className:"w-3 h-3 text-glow-purple mt-1 flex-shrink-0"}),l.jsx("span",{children:g})]},b))})]})]}),l.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsx("h3",{className:`font-bold mb-4 ${e?"text-white":"text-slate-900"}`,children:"Story Timeline"}),l.jsx("div",{className:"space-y-4",children:r.timeline_events.map((g,b)=>l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-glow-purple rounded-full mt-2"}),l.jsxs("div",{children:[l.jsx("p",{className:`text-sm font-medium ${e?"text-white":"text-slate-900"}`,children:g.event}),l.jsx("p",{className:`text-xs ${e?"text-slate-400":"text-slate-600"}`,children:new Date(g.date).toLocaleDateString()})]})]},b))})]}),l.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsx("h3",{className:`font-bold mb-4 ${e?"text-white":"text-slate-900"}`,children:"Related Articles"}),l.jsx("div",{className:"space-y-4",children:r.related_articles.map(g=>l.jsx(we,{to:`/article/${g.id}`,className:"block group",children:l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("img",{src:g.image_url,alt:g.title,className:"w-16 h-16 object-cover rounded-xl",onError:b=>{b.currentTarget.src="https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop"}}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:`text-sm font-medium line-clamp-2 group-hover:text-glow-purple transition-colors ${e?"text-white":"text-slate-900"}`,children:g.title}),l.jsx("p",{className:`text-xs mt-1 ${e?"text-slate-400":"text-slate-600"}`,children:new Date(g.published_at).toLocaleDateString()})]})]})},g.id))})]})]})]})]})})},Hm=()=>{const{id:n}=wa(),{isDark:e}=fe(),[r,i]=C.useState(null),[a,s]=C.useState(!0),[o,c]=C.useState(!1),[u,d]=C.useState(!1),[h,p]=C.useState("summary");C.useEffect(()=>{f()},[n]);const f=async()=>{s(!0);try{const b={id:n||"1",title:"AI-Powered Intelligence Systems Achieve Breakthrough in Real-Time Analysis",description:"Advanced artificial intelligence systems demonstrate unprecedented capabilities in processing and analyzing globalThis information streams with remarkable accuracy and speed.",url:"https://example.com/ai-breakthrough",urlToImage:"https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=1200",publishedDate:new Date().toISOString(),source:"Intelligence Network",category:"technology"};i(b),await Promise.all([m(b),x(b),y(b)])}catch(b){console.error("Error loading article:",b)}finally{s(!1)}},m=async b=>{c(!0);try{const S=await Ta(b);i(j=>j?{...j,summary:S}:null)}catch(S){console.error("Summary loading error:",S)}finally{c(!1)}},x=async b=>{d(!0);try{const S=await Ca(b.title);i(j=>j?{...j,timeline:S}:null)}catch(S){console.error("Timeline loading error:",S)}finally{d(!1)}},y=async b=>{try{const j=(await It(`related to "${b.title}"`,["news"])).results.slice(0,5).map(w=>({title:w.title,url:w.url,source:new URL(w.url).hostname,publishedDate:w.publishedDate||new Date().toISOString()}));i(w=>w?{...w,relatedArticles:j}:null)}catch(S){console.error("Related articles loading error:",S)}},v=()=>{navigator.share&&r?navigator.share({title:r.title,text:r.description,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},g=()=>{if(!(r!=null&&r.summary))return;const b=`# ${r.title}

## TL;DR
${r.summary.tldr}

## Key Points
${r.summary.keyPoints.map(k=>`- ${k}`).join(`
`)}

## Context
${r.summary.context}

## Implications
${r.summary.implications}

## Trust Score
${r.summary.trustScore}%

---
Generated by RealityCheck AI
`,S=new Blob([b],{type:"text/markdown"}),j=URL.createObjectURL(S),w=document.createElement("a");w.href=j,w.download=`summary-${r.title.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.md`,w.click(),URL.revokeObjectURL(j)};return a?l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${e?"bg-black":"bg-white"}`,children:l.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:l.jsxs("div",{className:"animate-pulse space-y-6",children:[l.jsx("div",{className:`h-8 rounded ${e?"bg-white/10":"bg-slate-200"}`}),l.jsx("div",{className:`h-64 rounded-2xl ${e?"bg-white/10":"bg-slate-200"}`}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:`h-4 rounded ${e?"bg-white/10":"bg-slate-200"}`}),l.jsx("div",{className:`h-4 rounded w-3/4 ${e?"bg-white/10":"bg-slate-200"}`})]})]})})}):r?l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${e?"bg-black":"bg-white"}`,children:l.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[l.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:l.jsxs(we,{to:"/discover",className:`inline-flex items-center space-x-2 text-sm font-medium transition-colors hover:text-glow-purple ${e?"text-slate-400":"text-slate-600"}`,children:[l.jsx(va,{className:"w-4 h-4"}),l.jsx("span",{children:"Back to Discover"})]})}),l.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(D.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`backdrop-blur-sm border rounded-3xl p-8 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-semibold bg-glow-purple/20 text-glow-purple",children:r.category.toUpperCase()}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ue,{className:"w-4 h-4 text-glow-purple"}),l.jsx("span",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:new Date(r.publishedDate).toLocaleDateString()})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:v,className:`p-2 rounded-xl transition-all duration-300 ${e?"bg-white/10 text-white hover:bg-white/20":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:l.jsx(xr,{className:"w-5 h-5"})}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:g,className:`p-2 rounded-xl transition-all duration-300 ${e?"bg-white/10 text-white hover:bg-white/20":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:l.jsx(gr,{className:"w-5 h-5"})})]})]}),l.jsx("h1",{className:`text-4xl font-bold font-display mb-6 leading-tight ${e?"text-white":"text-slate-900"}`,children:r.title}),l.jsx("div",{className:"flex items-center space-x-6 mb-6",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(lt,{className:"w-4 h-4 text-glow-purple"}),l.jsx("span",{className:`text-sm font-medium ${e?"text-slate-300":"text-slate-700"}`,children:r.source})]})})]}),r.urlToImage&&l.jsx("div",{className:"mb-8",children:l.jsx("img",{src:r.urlToImage,alt:r.title,className:"w-full h-96 object-cover rounded-2xl",onError:b=>{b.currentTarget.src="https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=1200&h=600&fit=crop"}})}),l.jsx("div",{className:"flex space-x-1 mb-6",children:[{id:"summary",name:"Smart Summary",icon:oe},{id:"timeline",name:"Timeline",icon:vr},{id:"related",name:"Related",icon:Pi}].map(b=>{const S=b.icon;return l.jsxs(D.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>p(b.id),className:`px-4 py-2 rounded-xl font-semibold transition-all duration-300 flex items-center space-x-2 ${h===b.id?e?"bg-glow-purple text-white":"bg-purple-600 text-white":e?"bg-white/10 text-slate-300 hover:bg-white/20":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(S,{className:"w-4 h-4"}),l.jsx("span",{children:b.name})]},b.id)})}),l.jsxs("div",{className:"min-h-[400px]",children:[h==="summary"&&l.jsx("div",{children:o?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(oe,{className:"w-12 h-12 text-glow-purple mx-auto mb-4 animate-pulse"}),l.jsx("p",{className:`text-lg font-semibold ${e?"text-white":"text-slate-900"}`,children:"Generating Smart Summary..."})]}):r.summary?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`p-6 rounded-2xl border ${e?"bg-glow-purple/10 border-glow-purple/20":"bg-purple-50 border-purple-200"}`,children:[l.jsx("h3",{className:`font-bold mb-3 ${e?"text-white":"text-slate-900"}`,children:"TL;DR"}),l.jsx("p",{className:`leading-relaxed ${e?"text-slate-300":"text-slate-700"}`,children:r.summary.tldr})]}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold mb-3 ${e?"text-white":"text-slate-900"}`,children:"Key Points"}),l.jsx("ul",{className:"space-y-2",children:r.summary.keyPoints.map((b,S)=>l.jsxs("li",{className:`flex items-start space-x-2 ${e?"text-slate-300":"text-slate-700"}`,children:[l.jsx(Kt,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:b})]},S))})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold mb-3 ${e?"text-white":"text-slate-900"}`,children:"Context"}),l.jsx("p",{className:`text-sm leading-relaxed ${e?"text-slate-300":"text-slate-700"}`,children:r.summary.context})]}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold mb-3 ${e?"text-white":"text-slate-900"}`,children:"Implications"}),l.jsx("p",{className:`text-sm leading-relaxed ${e?"text-slate-300":"text-slate-700"}`,children:r.summary.implications})]})]})]}):l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:`text-lg ${e?"text-white":"text-slate-900"}`,children:"Summary not available"})})}),h==="timeline"&&l.jsx("div",{children:u?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(vr,{className:"w-12 h-12 text-glow-purple mx-auto mb-4 animate-pulse"}),l.jsx("p",{className:`text-lg font-semibold ${e?"text-white":"text-slate-900"}`,children:"Generating Timeline..."})]}):r.timeline?l.jsx("div",{className:"space-y-4",children:r.timeline.events.map((b,S)=>l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"w-3 h-3 bg-glow-purple rounded-full"}),S<r.timeline.events.length-1&&l.jsx("div",{className:"w-px h-16 bg-glow-purple/30 mt-2"})]}),l.jsxs("div",{className:"flex-1 pb-8",children:[l.jsx("div",{className:"flex items-center space-x-2 mb-2",children:l.jsx("span",{className:`text-sm font-medium ${e?"text-glow-purple":"text-purple-600"}`,children:new Date(b.date).toLocaleDateString()})}),l.jsx("h4",{className:`font-semibold mb-1 ${e?"text-white":"text-slate-900"}`,children:b.title}),l.jsx("p",{className:`text-sm leading-relaxed ${e?"text-slate-300":"text-slate-700"}`,children:b.description})]})]},S))}):l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:`text-lg ${e?"text-white":"text-slate-900"}`,children:"Timeline not available"})})}),h==="related"&&l.jsx("div",{children:r.relatedArticles?l.jsx("div",{className:"space-y-4",children:r.relatedArticles.map((b,S)=>l.jsxs("a",{href:b.url,target:"_blank",rel:"noopener noreferrer",className:`block p-4 rounded-2xl border transition-all duration-300 hover:scale-[1.02] ${e?"bg-white/5 border-white/10 hover:bg-white/10":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,children:[l.jsx("h4",{className:`font-semibold mb-2 ${e?"text-white":"text-slate-900"}`,children:b.title}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:b.source}),l.jsx(Gt,{className:"w-4 h-4"})]})]},S))}):l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:`text-lg ${e?"text-white":"text-slate-900"}`,children:"Related articles not available"})})})]}),l.jsx("div",{className:"mt-8 pt-6 border-t border-white/10",children:l.jsxs(D.a,{whileHover:{scale:1.02},whileTap:{scale:.98},href:r.url,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center space-x-2 px-6 py-3 rounded-2xl font-semibold transition-all duration-300 ${e?"bg-glow-purple/10 border border-glow-purple/20 text-glow-purple hover:bg-glow-purple/20":"bg-purple-50 border border-purple-200 text-purple-700 hover:bg-purple-100"}`,children:[l.jsx("span",{children:"Read Original Article"}),l.jsx(Gt,{className:"w-4 h-4"})]})})]})}),l.jsxs("div",{className:"space-y-6",children:[r.summary&&l.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsx("h3",{className:`font-bold mb-4 ${e?"text-white":"text-slate-900"}`,children:"Trust Analysis"}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:`text-4xl font-bold mb-2 ${r.summary.trustScore>=90?"text-green-400":r.summary.trustScore>=70?"text-yellow-400":"text-red-400"}`,children:[r.summary.trustScore,"%"]}),l.jsx("p",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:"Trust Score"})]})]}),l.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsx("h3",{className:`font-bold mb-4 ${e?"text-white":"text-slate-900"}`,children:"Quick Actions"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:v,className:`w-full p-3 rounded-xl text-left transition-all duration-300 flex items-center space-x-3 ${e?"bg-white/10 hover:bg-white/20":"bg-slate-100 hover:bg-slate-200"}`,children:[l.jsx(xr,{className:"w-4 h-4"}),l.jsx("span",{children:"Share Article"})]}),l.jsxs("button",{onClick:g,className:`w-full p-3 rounded-xl text-left transition-all duration-300 flex items-center space-x-3 ${e?"bg-white/10 hover:bg-white/20":"bg-slate-100 hover:bg-slate-200"}`,children:[l.jsx(gr,{className:"w-4 h-4"}),l.jsx("span",{children:"Download Summary"})]})]})]})]})]})]})}):l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${e?"bg-black":"bg-white"}`,children:l.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8 text-center",children:[l.jsx("h1",{className:`text-2xl font-bold mb-4 ${e?"text-white":"text-slate-900"}`,children:"Article Not Found"}),l.jsx(we,{to:"/discover",className:"text-glow-purple hover:underline",children:"Return to Discover"})]})})},Ks=["https://searx.be","https://search.sapti.me","https://searx.tiekoetter.com","https://searx.work","https://searx.prvcy.eu","https://searx.fmac.xyz","https://search.bus-hit.me"];let wi=0;function Wm(){const n=Ks[wi];return wi=(wi+1)%Ks.length,n}async function Gm(n,e=["general"],r="",i=20){for(let a=0;a<3;a++){const s=Wm();try{const o=new URLSearchParams({q:n,format:"json",categories:e.join(","),engines:"google,bing,duckduckgo,startpage,wikipedia",time_range:r,safesearch:"1",pageno:"1"}),c=await fetch(`${s}/search?${o}`,{headers:{Accept:"application/json","User-Agent":"RealityCheckAI/2.0 (Research Tool)"},signal:AbortSignal.timeout(15e3)});if(!c.ok)throw new Error(`HTTP ${c.status}: ${c.statusText}`);const u=await c.json(),d=(u.results||[]).slice(0,i).map((h,p)=>({title:h.title||"Untitled",url:h.url||"",content:h.content||h.title||"",publishedDate:h.publishedDate||Gl(h.content),img_src:h.img_src||null,category:Jm(h.title+" "+(h.content||"")),source:Vm(h.url),relevance:Ym(n,h.title+" "+(h.content||""),p)})).filter(h=>h.url&&h.title);return{results:d,suggestions:u.suggestions||[],infoboxes:u.infoboxes||[],totalResults:d.length,instance:s,source:"searxng",query:n,timestamp:new Date().toISOString()}}catch(o){console.warn(`SearXNG instance ${s} failed (attempt ${a+1}):`,o),a<2&&await new Promise(c=>setTimeout(c,1e3))}}return console.warn("All SearXNG instances failed, using enhanced mock data"),Qm(n,e,i)}async function Km(n){const e=[`"${n}" timeline chronology`,`"${n}" history development`,`when did "${n}" start begin`,`"${n}" latest recent developments`,`"${n}" events sequence order`],r=[];for(const i of e)try{const a=await Gm(i,["general","news"],"",5);r.push(...a.results.map(s=>({title:s.title,description:s.content,url:s.url,date:s.publishedDate||Gl(s.content)||new Date().toISOString(),source:s.source,relevance:s.relevance,category:s.category})))}catch(a){console.warn(`Timeline search failed for: ${i}`,a)}return r.sort((i,a)=>{const s=a.relevance-i.relevance;return Math.abs(s)>.1?s:new Date(a.date).getTime()-new Date(i.date).getTime()}),{timeline:r.slice(0,15),topic:n,source:"searxng-timeline",timestamp:new Date().toISOString()}}function Vm(n){try{return new URL(n).hostname.replace("www.","")}catch{return"unknown"}}function Jm(n){const e={technology:["ai","tech","software","computer","digital","cyber","innovation"],health:["health","medical","disease","vaccine","hospital","doctor","medicine"],politics:["government","election","political","congress","senate","president","policy"],climate:["climate","environment","weather","carbon","emission","green","sustainability"],business:["business","economy","market","stock","financial","company","trade"],science:["science","research","study","discovery","experiment","scientist","breakthrough"],security:["security","cyber","attack","breach","threat","vulnerability","defense"]},r=n.toLowerCase();for(const[i,a]of Object.entries(e))if(a.some(s=>r.includes(s)))return i;return"general"}function Ym(n,e,r){const i=n.toLowerCase().split(/\s+/),a=e.toLowerCase().split(/\s+/);let s=0,o=0;for(const d of i)a.includes(d)?o++:a.some(h=>h.includes(d)||d.includes(h))&&s++;const c=(o*2+s)/i.length,u=r*.02;return Math.max(0,Math.min(1,c-u))}function Gl(n){if(!n)return null;const e=[/(\d{4}[-/]\d{1,2}[-/]\d{1,2})/,/(\d{1,2}[-/]\d{1,2}[-/]\d{4})/,/(January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{1,2},?\s+\d{4}/i,/(\d{1,2}\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d{4})/i];for(const r of e){const i=n.match(r);if(i)try{return new Date(i[1]).toISOString()}catch{continue}}return null}function Xm(n){return{technology:"https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=400",health:"https://images.pexels.com/photos/3938023/pexels-photo-3938023.jpeg?auto=compress&cs=tinysrgb&w=400",politics:"https://images.pexels.com/photos/8728382/pexels-photo-8728382.jpeg?auto=compress&cs=tinysrgb&w=400",climate:"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress&cs=tinysrgb&w=400",business:"https://images.pexels.com/photos/590041/pexels-photo-590041.jpeg?auto=compress&cs=tinysrgb&w=400",science:"https://images.pexels.com/photos/2280571/pexels-photo-2280571.jpeg?auto=compress&cs=tinysrgb&w=400",security:"https://images.pexels.com/photos/60504/security-protection-anti-virus-software-60504.jpeg?auto=compress&cs=tinysrgb&w=400"}[n]||"https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=400"}function Qm(n,e,r){const i=[];for(let a=0;a<Math.min(r,10);a++){const s=e[0]||"general";i.push({title:`Enhanced ${s} analysis: ${n} - Real-time insights ${a+1}`,url:`https://example.com/enhanced/${encodeURIComponent(n)}/${a}`,content:`Comprehensive analysis of ${n} with real-time data processing and multi-source verification. This enhanced result provides detailed insights and contextual information.`,publishedDate:new Date(Date.now()-Math.random()*864e5).toISOString(),img_src:Xm(s),category:s,source:"Enhanced Intelligence Network",relevance:Math.max(.5,1-a*.1)})}return{results:i,suggestions:[`${n} analysis`,`${n} real-time`,`${n} verification`],infoboxes:[],totalResults:i.length,instance:"mock-enhanced",source:"mock",query:n,timestamp:new Date().toISOString()}}const Kl=({events:n,height:e=300})=>{const{isDark:r}=fe(),i=n.map((s,o)=>({date:new Date(s.date).toLocaleDateString(),impact:s.impact,title:s.title,index:o+1})),a=({active:s,payload:o,label:c})=>{if(s&&o&&o.length){const u=o[0].payload;return l.jsxs("div",{className:`p-3 rounded-lg border shadow-lg ${r?"bg-black/90 border-white/20 text-white":"bg-white border-slate-200 text-slate-900"}`,children:[l.jsx("p",{className:"font-semibold",children:u.title}),l.jsx("p",{className:"text-sm opacity-75",children:c}),l.jsxs("p",{className:"text-sm",children:["Impact: ",u.impact,"/100"]})]})}return null};return l.jsx("div",{className:"w-full",style:{height:e},children:l.jsx($u,{width:"100%",height:"100%",children:l.jsxs(Tu,{data:i,children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"impactGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),l.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:.1})]})}),l.jsx(Cu,{strokeDasharray:"3 3",stroke:r?"#374151":"#e5e7eb"}),l.jsx(Eu,{dataKey:"date",stroke:r?"#9ca3af":"#6b7280",fontSize:12}),l.jsx(Pu,{stroke:r?"#9ca3af":"#6b7280",fontSize:12}),l.jsx(Iu,{content:l.jsx(a,{})}),l.jsx(Ou,{type:"monotone",dataKey:"impact",stroke:"#8b5cf6",strokeWidth:2,fill:"url(#impactGradient)"})]})})})};function Zm(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,s,o,c=[],u=!0,d=!1;try{if(s=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(i=s.call(r)).done)&&(c.push(i.value),c.length!==e);u=!0);}catch(h){d=!0,a=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return c}}function eg(n,e,r){return e=lg(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Vs(n,e){return rg(n)||Zm(n,e)||Vl(n,e)||sg()}function tg(n){return ng(n)||ig(n)||Vl(n)||ag()}function ng(n){if(Array.isArray(n))return ea(n)}function rg(n){if(Array.isArray(n))return n}function ig(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Vl(n,e){if(n){if(typeof n=="string")return ea(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ea(n,e)}}function ea(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function ag(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function og(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function lg(n){var e=og(n,"string");return typeof e=="symbol"?e:String(e)}var cg=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(tg(Object.entries(e).filter(function(a){var s=Vs(a,1),o=s[0];return!i.has(o)}).map(function(a){var s=Vs(a,2),o=s[0],c=s[1];return eg({},o,c)}))))};function ta(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function ug(n){if(Array.isArray(n))return n}function dg(n){if(Array.isArray(n))return ta(n)}function hg(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function pg(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,s,o,c=[],u=!0,d=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(u=(i=s.call(r)).done)&&(c.push(i.value),c.length!==e);u=!0);}catch(h){d=!0,a=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return c}}function fg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gg(n,e){return ug(n)||pg(n,e)||Jl(n,e)||fg()}function Js(n){return dg(n)||hg(n)||Jl(n)||mg()}function Jl(n,e){if(n){if(typeof n=="string")return ta(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ta(n,e):void 0}}function xg(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,a=e.nodeMapper,s=a===void 0?function(h){return h}:a,o=e.methodNames,c=o===void 0?[]:o,u=e.initPropNames,d=u===void 0?[]:u;return C.forwardRef(function(h,p){var f=C.useRef(),m=C.useMemo(function(){var v=Object.fromEntries(d.filter(function(g){return h.hasOwnProperty(g)}).map(function(g){return[g,h[g]]}));return n(v)},[]);Ys(function(){m(s(f.current))},C.useLayoutEffect),Ys(function(){return m._destructor instanceof Function?m._destructor:void 0});var x=C.useCallback(function(v){for(var g=arguments.length,b=new Array(g>1?g-1:0),S=1;S<g;S++)b[S-1]=arguments[S];return m[v]instanceof Function?m[v].apply(m,b):void 0},[m]),y=C.useRef({});return Object.keys(cg(h,[].concat(Js(c),Js(d)))).filter(function(v){return y.current[v]!==h[v]}).forEach(function(v){return x(v,h[v])}),y.current=h,C.useImperativeHandle(p,function(){return Object.fromEntries(c.map(function(v){return[v,function(){for(var g=arguments.length,b=new Array(g),S=0;S<g;S++)b[S]=arguments[S];return x.apply(void 0,[v].concat(b))}]}))},[x]),Uo.createElement(i,{ref:f})})}function Ys(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C.useEffect,r=C.useRef(),i=C.useRef(!1),a=C.useRef(!1),s=C.useState(0),o=gg(s,2);o[0];var c=o[1];i.current&&(a.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),c(function(u){return u+1}),function(){a.current&&r.current&&r.current()}},[])}var na="http://www.w3.org/1999/xhtml";const Xs={svg:"http://www.w3.org/2000/svg",xhtml:na,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jr(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),Xs.hasOwnProperty(e)?{space:Xs[e],local:n}:n}function vg(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===na&&e.documentElement.namespaceURI===na?e.createElement(n):e.createElementNS(r,n)}}function yg(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Yl(n){var e=Jr(n);return(e.local?yg:vg)(e)}function bg(){}function Ea(n){return n==null?bg:function(){return this.querySelector(n)}}function wg(n){typeof n!="function"&&(n=Ea(n));for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a)for(var s=e[a],o=s.length,c=i[a]=new Array(o),u,d,h=0;h<o;++h)(u=s[h])&&(d=n.call(u,u.__data__,h,s))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d);return new Ce(i,this._parents)}function _g(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function jg(){return[]}function Xl(n){return n==null?jg:function(){return this.querySelectorAll(n)}}function kg(n){return function(){return _g(n.apply(this,arguments))}}function Sg(n){typeof n=="function"?n=kg(n):n=Xl(n);for(var e=this._groups,r=e.length,i=[],a=[],s=0;s<r;++s)for(var o=e[s],c=o.length,u,d=0;d<c;++d)(u=o[d])&&(i.push(n.call(u,u.__data__,d,o)),a.push(u));return new Ce(i,a)}function Ql(n){return function(){return this.matches(n)}}function Zl(n){return function(e){return e.matches(n)}}var Ng=Array.prototype.find;function Ag(n){return function(){return Ng.call(this.children,n)}}function $g(){return this.firstElementChild}function Tg(n){return this.select(n==null?$g:Ag(typeof n=="function"?n:Zl(n)))}var Cg=Array.prototype.filter;function Eg(){return Array.from(this.children)}function Pg(n){return function(){return Cg.call(this.children,n)}}function Ig(n){return this.selectAll(n==null?Eg:Pg(typeof n=="function"?n:Zl(n)))}function Og(n){typeof n!="function"&&(n=Ql(n));for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a)for(var s=e[a],o=s.length,c=i[a]=[],u,d=0;d<o;++d)(u=s[d])&&n.call(u,u.__data__,d,s)&&c.push(u);return new Ce(i,this._parents)}function ec(n){return new Array(n.length)}function Rg(){return new Ce(this._enter||this._groups.map(ec),this._parents)}function $r(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}$r.prototype={constructor:$r,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Dg(n){return function(){return n}}function Mg(n,e,r,i,a,s){for(var o=0,c,u=e.length,d=s.length;o<d;++o)(c=e[o])?(c.__data__=s[o],i[o]=c):r[o]=new $r(n,s[o]);for(;o<u;++o)(c=e[o])&&(a[o]=c)}function zg(n,e,r,i,a,s,o){var c,u,d=new Map,h=e.length,p=s.length,f=new Array(h),m;for(c=0;c<h;++c)(u=e[c])&&(f[c]=m=o.call(u,u.__data__,c,e)+"",d.has(m)?a[c]=u:d.set(m,u));for(c=0;c<p;++c)m=o.call(n,s[c],c,s)+"",(u=d.get(m))?(i[c]=u,u.__data__=s[c],d.delete(m)):r[c]=new $r(n,s[c]);for(c=0;c<h;++c)(u=e[c])&&d.get(f[c])===u&&(a[c]=u)}function Lg(n){return n.__data__}function Ug(n,e){if(!arguments.length)return Array.from(this,Lg);var r=e?zg:Mg,i=this._parents,a=this._groups;typeof n!="function"&&(n=Dg(n));for(var s=a.length,o=new Array(s),c=new Array(s),u=new Array(s),d=0;d<s;++d){var h=i[d],p=a[d],f=p.length,m=Fg(n.call(h,h&&h.__data__,d,i)),x=m.length,y=c[d]=new Array(x),v=o[d]=new Array(x),g=u[d]=new Array(f);r(h,p,y,v,g,m,e);for(var b=0,S=0,j,w;b<x;++b)if(j=y[b]){for(b>=S&&(S=b+1);!(w=v[S])&&++S<x;);j._next=w||null}}return o=new Ce(o,i),o._enter=c,o._exit=u,o}function Fg(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Bg(){return new Ce(this._exit||this._groups.map(ec),this._parents)}function qg(n,e,r){var i=this.enter(),a=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?s.remove():r(s),i&&a?i.merge(a).order():a}function Hg(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,a=r.length,s=i.length,o=Math.min(a,s),c=new Array(a),u=0;u<o;++u)for(var d=r[u],h=i[u],p=d.length,f=c[u]=new Array(p),m,x=0;x<p;++x)(m=d[x]||h[x])&&(f[x]=m);for(;u<a;++u)c[u]=r[u];return new Ce(c,this._parents)}function Wg(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],a=i.length-1,s=i[a],o;--a>=0;)(o=i[a])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Gg(n){n||(n=Kg);function e(p,f){return p&&f?n(p.__data__,f.__data__):!p-!f}for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s){for(var o=r[s],c=o.length,u=a[s]=new Array(c),d,h=0;h<c;++h)(d=o[h])&&(u[h]=d);u.sort(e)}return new Ce(a,this._parents).order()}function Kg(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Vg(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Jg(){return Array.from(this)}function Yg(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],a=0,s=i.length;a<s;++a){var o=i[a];if(o)return o}return null}function Xg(){let n=0;for(const e of this)++n;return n}function Qg(){return!this.node()}function Zg(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var a=e[r],s=0,o=a.length,c;s<o;++s)(c=a[s])&&n.call(c,c.__data__,s,a);return this}function e0(n){return function(){this.removeAttribute(n)}}function t0(n){return function(){this.removeAttributeNS(n.space,n.local)}}function n0(n,e){return function(){this.setAttribute(n,e)}}function r0(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function i0(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function a0(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function s0(n,e){var r=Jr(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?t0:e0:typeof e=="function"?r.local?a0:i0:r.local?r0:n0)(r,e))}function tc(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function o0(n){return function(){this.style.removeProperty(n)}}function l0(n,e,r){return function(){this.style.setProperty(n,e,r)}}function c0(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function u0(n,e,r){return arguments.length>1?this.each((e==null?o0:typeof e=="function"?c0:l0)(n,e,r??"")):Xt(this.node(),n)}function Xt(n,e){return n.style.getPropertyValue(e)||tc(n).getComputedStyle(n,null).getPropertyValue(e)}function d0(n){return function(){delete this[n]}}function h0(n,e){return function(){this[n]=e}}function p0(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function f0(n,e){return arguments.length>1?this.each((e==null?d0:typeof e=="function"?p0:h0)(n,e)):this.node()[n]}function nc(n){return n.trim().split(/^|\s+/)}function Pa(n){return n.classList||new rc(n)}function rc(n){this._node=n,this._names=nc(n.getAttribute("class")||"")}rc.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function ic(n,e){for(var r=Pa(n),i=-1,a=e.length;++i<a;)r.add(e[i])}function ac(n,e){for(var r=Pa(n),i=-1,a=e.length;++i<a;)r.remove(e[i])}function m0(n){return function(){ic(this,n)}}function g0(n){return function(){ac(this,n)}}function x0(n,e){return function(){(e.apply(this,arguments)?ic:ac)(this,n)}}function v0(n,e){var r=nc(n+"");if(arguments.length<2){for(var i=Pa(this.node()),a=-1,s=r.length;++a<s;)if(!i.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?x0:e?m0:g0)(r,e))}function y0(){this.textContent=""}function b0(n){return function(){this.textContent=n}}function w0(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function _0(n){return arguments.length?this.each(n==null?y0:(typeof n=="function"?w0:b0)(n)):this.node().textContent}function j0(){this.innerHTML=""}function k0(n){return function(){this.innerHTML=n}}function S0(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function N0(n){return arguments.length?this.each(n==null?j0:(typeof n=="function"?S0:k0)(n)):this.node().innerHTML}function A0(){this.nextSibling&&this.parentNode.appendChild(this)}function $0(){return this.each(A0)}function T0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function C0(){return this.each(T0)}function E0(n){var e=typeof n=="function"?n:Yl(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function P0(){return null}function I0(n,e){var r=typeof n=="function"?n:Yl(n),i=e==null?P0:typeof e=="function"?e:Ea(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function O0(){var n=this.parentNode;n&&n.removeChild(this)}function R0(){return this.each(O0)}function D0(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function M0(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function z0(n){return this.select(n?M0:D0)}function L0(n){return arguments.length?this.property("__data__",n):this.node().__data__}function U0(n){return function(e){n.call(this,e,this.__data__)}}function F0(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function B0(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,a=e.length,s;r<a;++r)s=e[r],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function q0(n,e,r){return function(){var i=this.__on,a,s=U0(e);if(i){for(var o=0,c=i.length;o<c;++o)if((a=i[o]).type===n.type&&a.name===n.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=e;return}}this.addEventListener(n.type,s,r),a={type:n.type,name:n.name,value:e,listener:s,options:r},i?i.push(a):this.__on=[a]}}function H0(n,e,r){var i=F0(n+""),a,s=i.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var u=0,d=c.length,h;u<d;++u)for(a=0,h=c[u];a<s;++a)if((o=i[a]).type===h.type&&o.name===h.name)return h.value}return}for(c=e?q0:B0,a=0;a<s;++a)this.each(c(i[a],e,r));return this}function sc(n,e,r){var i=tc(n),a=i.CustomEvent;typeof a=="function"?a=new a(e,r):(a=i.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),n.dispatchEvent(a)}function W0(n,e){return function(){return sc(this,n,e)}}function G0(n,e){return function(){return sc(this,n,e.apply(this,arguments))}}function K0(n,e){return this.each((typeof e=="function"?G0:W0)(n,e))}function*V0(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],a=0,s=i.length,o;a<s;++a)(o=i[a])&&(yield o)}var oc=[null];function Ce(n,e){this._groups=n,this._parents=e}function Kn(){return new Ce([[document.documentElement]],oc)}function J0(){return this}Ce.prototype=Kn.prototype={constructor:Ce,select:wg,selectAll:Sg,selectChild:Tg,selectChildren:Ig,filter:Og,data:Ug,enter:Rg,exit:Bg,join:qg,merge:Hg,selection:J0,order:Wg,sort:Gg,call:Vg,nodes:Jg,node:Yg,size:Xg,empty:Qg,each:Zg,attr:s0,style:u0,property:f0,classed:v0,text:_0,html:N0,raise:$0,lower:C0,append:E0,insert:I0,remove:R0,clone:z0,datum:L0,on:H0,dispatch:K0,[Symbol.iterator]:V0};function Oe(n){return typeof n=="string"?new Ce([[document.querySelector(n)]],[document.documentElement]):new Ce([[n]],oc)}function Y0(n){let e;for(;e=n.sourceEvent;)n=e;return n}function We(n,e){if(n=Y0(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[n.clientX-a.left-e.clientLeft,n.clientY-a.top-e.clientTop]}}return[n.pageX,n.pageY]}var X0={value:()=>{}};function Vn(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new cr(r)}function cr(n){this._=n}function Q0(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",a=r.indexOf(".");if(a>=0&&(i=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}cr.prototype=Vn.prototype={constructor:cr,on:function(n,e){var r=this._,i=Q0(n+"",r),a,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((a=(n=i[s]).type)&&(a=Z0(r[a],n.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(a=(n=i[s]).type)r[a]=Qs(r[a],n.name,e);else if(e==null)for(a in r)r[a]=Qs(r[a],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new cr(n)},call:function(n,e){if((a=arguments.length-2)>0)for(var r=new Array(a),i=0,a,s;i<a;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,a=s.length;i<a;++i)s[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],a=0,s=i.length;a<s;++a)i[a].value.apply(e,r)}};function Z0(n,e){for(var r=0,i=n.length,a;r<i;++r)if((a=n[r]).name===e)return a.value}function Qs(n,e,r){for(var i=0,a=n.length;i<a;++i)if(n[i].name===e){n[i]=X0,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}const ex={passive:!1},Dn={capture:!0,passive:!1};function _i(n){n.stopImmediatePropagation()}function Wt(n){n.preventDefault(),n.stopImmediatePropagation()}function lc(n){var e=n.document.documentElement,r=Oe(n).on("dragstart.drag",Wt,Dn);"onselectstart"in e?r.on("selectstart.drag",Wt,Dn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function cc(n,e){var r=n.document.documentElement,i=Oe(n).on("dragstart.drag",null);e&&(i.on("click.drag",Wt,Dn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const ar=n=>()=>n;function ra(n,{sourceEvent:e,subject:r,target:i,identifier:a,active:s,x:o,y:c,dx:u,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}ra.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function tx(n){return!n.ctrlKey&&!n.button}function nx(){return this.parentNode}function rx(n,e){return e??{x:n.x,y:n.y}}function ix(){return navigator.maxTouchPoints||"ontouchstart"in this}function ax(){var n=tx,e=nx,r=rx,i=ix,a={},s=Vn("start","drag","end"),o=0,c,u,d,h,p=0;function f(j){j.on("mousedown.drag",m).filter(i).on("touchstart.drag",v).on("touchmove.drag",g,ex).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(j,w){if(!(h||!n.call(this,j,w))){var k=S(this,e.call(this,j,w),j,w,"mouse");k&&(Oe(j.view).on("mousemove.drag",x,Dn).on("mouseup.drag",y,Dn),lc(j.view),_i(j),d=!1,c=j.clientX,u=j.clientY,k("start",j))}}function x(j){if(Wt(j),!d){var w=j.clientX-c,k=j.clientY-u;d=w*w+k*k>p}a.mouse("drag",j)}function y(j){Oe(j.view).on("mousemove.drag mouseup.drag",null),cc(j.view,d),Wt(j),a.mouse("end",j)}function v(j,w){if(n.call(this,j,w)){var k=j.changedTouches,A=e.call(this,j,w),_=k.length,P,I;for(P=0;P<_;++P)(I=S(this,A,j,w,k[P].identifier,k[P]))&&(_i(j),I("start",j,k[P]))}}function g(j){var w=j.changedTouches,k=w.length,A,_;for(A=0;A<k;++A)(_=a[w[A].identifier])&&(Wt(j),_("drag",j,w[A]))}function b(j){var w=j.changedTouches,k=w.length,A,_;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),A=0;A<k;++A)(_=a[w[A].identifier])&&(_i(j),_("end",j,w[A]))}function S(j,w,k,A,_,P){var I=s.copy(),T=We(P||k,w),E,M,N;if((N=r.call(j,new ra("beforestart",{sourceEvent:k,target:f,identifier:_,active:o,x:T[0],y:T[1],dx:0,dy:0,dispatch:I}),A))!=null)return E=N.x-T[0]||0,M=N.y-T[1]||0,function R(O,U,H){var B=T,G;switch(O){case"start":a[_]=R,G=o++;break;case"end":delete a[_],--o;case"drag":T=We(H||U,w),G=o;break}I.call(O,j,new ra(O,{sourceEvent:U,subject:N,target:f,identifier:_,active:G,x:T[0]+E,y:T[1]+M,dx:T[0]-B[0],dy:T[1]-B[1],dispatch:I}),A)}}return f.filter=function(j){return arguments.length?(n=typeof j=="function"?j:ar(!!j),f):n},f.container=function(j){return arguments.length?(e=typeof j=="function"?j:ar(j),f):e},f.subject=function(j){return arguments.length?(r=typeof j=="function"?j:ar(j),f):r},f.touchable=function(j){return arguments.length?(i=typeof j=="function"?j:ar(!!j),f):i},f.on=function(){var j=s.on.apply(s,arguments);return j===s?f:j},f.clickDistance=function(j){return arguments.length?(p=(j=+j)*j,f):Math.sqrt(p)},f}var Qt=0,vn=0,ln=0,uc=1e3,Tr,yn,Cr=0,Ct=0,Yr=0,Mn=typeof performance=="object"&&performance.now?performance:Date,dc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Ia(){return Ct||(dc(sx),Ct=Mn.now()+Yr)}function sx(){Ct=0}function Er(){this._call=this._time=this._next=null}Er.prototype=Oa.prototype={constructor:Er,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?Ia():+r)+(e==null?0:+e),!this._next&&yn!==this&&(yn?yn._next=this:Tr=this,yn=this),this._call=n,this._time=r,ia()},stop:function(){this._call&&(this._call=null,this._time=1/0,ia())}};function Oa(n,e,r){var i=new Er;return i.restart(n,e,r),i}function ox(){Ia(),++Qt;for(var n=Tr,e;n;)(e=Ct-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Qt}function Zs(){Ct=(Cr=Mn.now())+Yr,Qt=vn=0;try{ox()}finally{Qt=0,cx(),Ct=0}}function lx(){var n=Mn.now(),e=n-Cr;e>uc&&(Yr-=e,Cr=n)}function cx(){for(var n,e=Tr,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:Tr=r);yn=n,ia(i)}function ia(n){if(!Qt){vn&&(vn=clearTimeout(vn));var e=n-Ct;e>24?(n<1/0&&(vn=setTimeout(Zs,n-Mn.now()-Yr)),ln&&(ln=clearInterval(ln))):(ln||(Cr=Mn.now(),ln=setInterval(lx,uc)),Qt=1,dc(Zs))}}function eo(n,e,r){var i=new Er;return e=e==null?0:+e,i.restart(a=>{i.stop(),n(a+e)},e,r),i}var ux=Vn("start","end","cancel","interrupt"),dx=[],hc=0,to=1,aa=2,ur=3,no=4,sa=5,dr=6;function Xr(n,e,r,i,a,s){var o=n.__transition;if(!o)n.__transition={};else if(r in o)return;hx(n,r,{name:e,index:i,group:a,on:ux,tween:dx,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:hc})}function Ra(n,e){var r=Be(n,e);if(r.state>hc)throw new Error("too late; already scheduled");return r}function Je(n,e){var r=Be(n,e);if(r.state>ur)throw new Error("too late; already running");return r}function Be(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function hx(n,e,r){var i=n.__transition,a;i[e]=r,r.timer=Oa(s,0,r.time);function s(d){r.state=to,r.timer.restart(o,r.delay,r.time),r.delay<=d&&o(d-r.delay)}function o(d){var h,p,f,m;if(r.state!==to)return u();for(h in i)if(m=i[h],m.name===r.name){if(m.state===ur)return eo(o);m.state===no?(m.state=dr,m.timer.stop(),m.on.call("interrupt",n,n.__data__,m.index,m.group),delete i[h]):+h<e&&(m.state=dr,m.timer.stop(),m.on.call("cancel",n,n.__data__,m.index,m.group),delete i[h])}if(eo(function(){r.state===ur&&(r.state=no,r.timer.restart(c,r.delay,r.time),c(d))}),r.state=aa,r.on.call("start",n,n.__data__,r.index,r.group),r.state===aa){for(r.state=ur,a=new Array(f=r.tween.length),h=0,p=-1;h<f;++h)(m=r.tween[h].value.call(n,n.__data__,r.index,r.group))&&(a[++p]=m);a.length=p+1}}function c(d){for(var h=d<r.duration?r.ease.call(null,d/r.duration):(r.timer.restart(u),r.state=sa,1),p=-1,f=a.length;++p<f;)a[p].call(n,h);r.state===sa&&(r.on.call("end",n,n.__data__,r.index,r.group),u())}function u(){r.state=dr,r.timer.stop(),delete i[e];for(var d in i)return;delete n.__transition}}function hr(n,e){var r=n.__transition,i,a,s=!0,o;if(r){e=e==null?null:e+"";for(o in r){if((i=r[o]).name!==e){s=!1;continue}a=i.state>aa&&i.state<sa,i.state=dr,i.timer.stop(),i.on.call(a?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[o]}s&&delete n.__transition}}function px(n){return this.each(function(){hr(this,n)})}function fx(n,e){var r,i;return function(){var a=Je(this,n),s=a.tween;if(s!==r){i=r=s;for(var o=0,c=i.length;o<c;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}a.tween=i}}function mx(n,e,r){var i,a;if(typeof r!="function")throw new Error;return function(){var s=Je(this,n),o=s.tween;if(o!==i){a=(i=o).slice();for(var c={name:e,value:r},u=0,d=a.length;u<d;++u)if(a[u].name===e){a[u]=c;break}u===d&&a.push(c)}s.tween=a}}function gx(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=Be(this.node(),r).tween,a=0,s=i.length,o;a<s;++a)if((o=i[a]).name===n)return o.value;return null}return this.each((e==null?fx:mx)(r,n,e))}function Da(n,e,r){var i=n._id;return n.each(function(){var a=Je(this,i);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return Be(a,i).value[e]}}function pc(n,e){var r;return(typeof e=="number"?Ru:e instanceof is?as:(r=is(e))?(e=r,as):Du)(n,e)}function xx(n){return function(){this.removeAttribute(n)}}function vx(n){return function(){this.removeAttributeNS(n.space,n.local)}}function yx(n,e,r){var i,a=r+"",s;return function(){var o=this.getAttribute(n);return o===a?null:o===i?s:s=e(i=o,r)}}function bx(n,e,r){var i,a=r+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===a?null:o===i?s:s=e(i=o,r)}}function wx(n,e,r){var i,a,s;return function(){var o,c=r(this),u;return c==null?void this.removeAttribute(n):(o=this.getAttribute(n),u=c+"",o===u?null:o===i&&u===a?s:(a=u,s=e(i=o,c)))}}function _x(n,e,r){var i,a,s;return function(){var o,c=r(this),u;return c==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),u=c+"",o===u?null:o===i&&u===a?s:(a=u,s=e(i=o,c)))}}function jx(n,e){var r=Jr(n),i=r==="transform"?Mu:pc;return this.attrTween(n,typeof e=="function"?(r.local?_x:wx)(r,i,Da(this,"attr."+n,e)):e==null?(r.local?vx:xx)(r):(r.local?bx:yx)(r,i,e))}function kx(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function Sx(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function Nx(n,e){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Sx(n,s)),r}return a._value=e,a}function Ax(n,e){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&kx(n,s)),r}return a._value=e,a}function $x(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Jr(n);return this.tween(r,(i.local?Nx:Ax)(i,e))}function Tx(n,e){return function(){Ra(this,n).delay=+e.apply(this,arguments)}}function Cx(n,e){return e=+e,function(){Ra(this,n).delay=e}}function Ex(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Tx:Cx)(e,n)):Be(this.node(),e).delay}function Px(n,e){return function(){Je(this,n).duration=+e.apply(this,arguments)}}function Ix(n,e){return e=+e,function(){Je(this,n).duration=e}}function Ox(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Px:Ix)(e,n)):Be(this.node(),e).duration}function Rx(n,e){if(typeof e!="function")throw new Error;return function(){Je(this,n).ease=e}}function Dx(n){var e=this._id;return arguments.length?this.each(Rx(e,n)):Be(this.node(),e).ease}function Mx(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Je(this,n).ease=r}}function zx(n){if(typeof n!="function")throw new Error;return this.each(Mx(this._id,n))}function Lx(n){typeof n!="function"&&(n=Ql(n));for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a)for(var s=e[a],o=s.length,c=i[a]=[],u,d=0;d<o;++d)(u=s[d])&&n.call(u,u.__data__,d,s)&&c.push(u);return new ct(i,this._parents,this._name,this._id)}function Ux(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,a=r.length,s=Math.min(i,a),o=new Array(i),c=0;c<s;++c)for(var u=e[c],d=r[c],h=u.length,p=o[c]=new Array(h),f,m=0;m<h;++m)(f=u[m]||d[m])&&(p[m]=f);for(;c<i;++c)o[c]=e[c];return new ct(o,this._parents,this._name,this._id)}function Fx(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Bx(n,e,r){var i,a,s=Fx(e)?Ra:Je;return function(){var o=s(this,n),c=o.on;c!==i&&(a=(i=c).copy()).on(e,r),o.on=a}}function qx(n,e){var r=this._id;return arguments.length<2?Be(this.node(),r).on.on(n):this.each(Bx(r,n,e))}function Hx(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function Wx(){return this.on("end.remove",Hx(this._id))}function Gx(n){var e=this._name,r=this._id;typeof n!="function"&&(n=Ea(n));for(var i=this._groups,a=i.length,s=new Array(a),o=0;o<a;++o)for(var c=i[o],u=c.length,d=s[o]=new Array(u),h,p,f=0;f<u;++f)(h=c[f])&&(p=n.call(h,h.__data__,f,c))&&("__data__"in h&&(p.__data__=h.__data__),d[f]=p,Xr(d[f],e,r,f,d,Be(h,r)));return new ct(s,this._parents,e,r)}function Kx(n){var e=this._name,r=this._id;typeof n!="function"&&(n=Xl(n));for(var i=this._groups,a=i.length,s=[],o=[],c=0;c<a;++c)for(var u=i[c],d=u.length,h,p=0;p<d;++p)if(h=u[p]){for(var f=n.call(h,h.__data__,p,u),m,x=Be(h,r),y=0,v=f.length;y<v;++y)(m=f[y])&&Xr(m,e,r,y,f,x);s.push(f),o.push(h)}return new ct(s,o,e,r)}var Vx=Kn.prototype.constructor;function Jx(){return new Vx(this._groups,this._parents)}function Yx(n,e){var r,i,a;return function(){var s=Xt(this,n),o=(this.style.removeProperty(n),Xt(this,n));return s===o?null:s===r&&o===i?a:a=e(r=s,i=o)}}function fc(n){return function(){this.style.removeProperty(n)}}function Xx(n,e,r){var i,a=r+"",s;return function(){var o=Xt(this,n);return o===a?null:o===i?s:s=e(i=o,r)}}function Qx(n,e,r){var i,a,s;return function(){var o=Xt(this,n),c=r(this),u=c+"";return c==null&&(u=c=(this.style.removeProperty(n),Xt(this,n))),o===u?null:o===i&&u===a?s:(a=u,s=e(i=o,c))}}function Zx(n,e){var r,i,a,s="style."+e,o="end."+s,c;return function(){var u=Je(this,n),d=u.on,h=u.value[s]==null?c||(c=fc(e)):void 0;(d!==r||a!==h)&&(i=(r=d).copy()).on(o,a=h),u.on=i}}function ev(n,e,r){var i=(n+="")=="transform"?zu:pc;return e==null?this.styleTween(n,Yx(n,i)).on("end.style."+n,fc(n)):typeof e=="function"?this.styleTween(n,Qx(n,i,Da(this,"style."+n,e))).each(Zx(this._id,n)):this.styleTween(n,Xx(n,i,e),r).on("end.style."+n,null)}function tv(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function nv(n,e,r){var i,a;function s(){var o=e.apply(this,arguments);return o!==a&&(i=(a=o)&&tv(n,o,r)),i}return s._value=e,s}function rv(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,nv(n,e,r??""))}function iv(n){return function(){this.textContent=n}}function av(n){return function(){var e=n(this);this.textContent=e??""}}function sv(n){return this.tween("text",typeof n=="function"?av(Da(this,"text",n)):iv(n==null?"":n+""))}function ov(n){return function(e){this.textContent=n.call(this,e)}}function lv(n){var e,r;function i(){var a=n.apply(this,arguments);return a!==r&&(e=(r=a)&&ov(a)),e}return i._value=n,i}function cv(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,lv(n))}function uv(){for(var n=this._name,e=this._id,r=mc(),i=this._groups,a=i.length,s=0;s<a;++s)for(var o=i[s],c=o.length,u,d=0;d<c;++d)if(u=o[d]){var h=Be(u,e);Xr(u,n,r,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new ct(i,this._parents,n,r)}function dv(){var n,e,r=this,i=r._id,a=r.size();return new Promise(function(s,o){var c={value:o},u={value:function(){--a===0&&s()}};r.each(function(){var d=Je(this,i),h=d.on;h!==n&&(e=(n=h).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(u)),d.on=e}),a===0&&s()})}var hv=0;function ct(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function mc(){return++hv}var Xe=Kn.prototype;ct.prototype={constructor:ct,select:Gx,selectAll:Kx,selectChild:Xe.selectChild,selectChildren:Xe.selectChildren,filter:Lx,merge:Ux,selection:Jx,transition:uv,call:Xe.call,nodes:Xe.nodes,node:Xe.node,size:Xe.size,empty:Xe.empty,each:Xe.each,on:qx,attr:jx,attrTween:$x,style:ev,styleTween:rv,text:sv,textTween:cv,remove:Wx,tween:gx,delay:Ex,duration:Ox,ease:Dx,easeVarying:zx,end:dv,[Symbol.iterator]:Xe[Symbol.iterator]};function pv(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var fv={time:null,delay:0,duration:250,ease:pv};function mv(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function gv(n){var e,r;n instanceof ct?(e=n._id,n=n._name):(e=mc(),(r=fv).time=Ia(),n=n==null?null:n+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var o=i[s],c=o.length,u,d=0;d<c;++d)(u=o[d])&&Xr(u,n,e,d,o,r||mv(u,e));return new ct(i,this._parents,n,e)}Kn.prototype.interrupt=px;Kn.prototype.transition=gv;const sr=n=>()=>n;function xv(n,{sourceEvent:e,target:r,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function it(n,e,r){this.k=n,this.x=e,this.y=r}it.prototype={constructor:it,scale:function(n){return n===1?this:new it(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new it(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ma=new it(1,0,0);He.prototype=it.prototype;function He(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Ma;return n.__zoom}function ji(n){n.stopImmediatePropagation()}function cn(n){n.preventDefault(),n.stopImmediatePropagation()}function vv(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function yv(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function ro(){return this.__zoom||Ma}function bv(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function wv(){return navigator.maxTouchPoints||"ontouchstart"in this}function _v(n,e,r){var i=n.invertX(e[0][0])-r[0][0],a=n.invertX(e[1][0])-r[1][0],s=n.invertY(e[0][1])-r[0][1],o=n.invertY(e[1][1])-r[1][1];return n.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function jv(){var n=vv,e=yv,r=_v,i=bv,a=wv,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],c=250,u=Lu,d=Vn("start","zoom","end"),h,p,f,m=500,x=150,y=0,v=10;function g(N){N.property("__zoom",ro).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",I).filter(a).on("touchstart.zoom",T).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(N,R,O,U){var H=N.selection?N.selection():N;H.property("__zoom",ro),N!==H?w(N,R,O,U):H.interrupt().each(function(){k(this,arguments).event(U).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},g.scaleBy=function(N,R,O,U){g.scaleTo(N,function(){var H=this.__zoom.k,B=typeof R=="function"?R.apply(this,arguments):R;return H*B},O,U)},g.scaleTo=function(N,R,O,U){g.transform(N,function(){var H=e.apply(this,arguments),B=this.__zoom,G=O==null?j(H):typeof O=="function"?O.apply(this,arguments):O,J=B.invert(G),Y=typeof R=="function"?R.apply(this,arguments):R;return r(S(b(B,Y),G,J),H,o)},O,U)},g.translateBy=function(N,R,O,U){g.transform(N,function(){return r(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof O=="function"?O.apply(this,arguments):O),e.apply(this,arguments),o)},null,U)},g.translateTo=function(N,R,O,U,H){g.transform(N,function(){var B=e.apply(this,arguments),G=this.__zoom,J=U==null?j(B):typeof U=="function"?U.apply(this,arguments):U;return r(Ma.translate(J[0],J[1]).scale(G.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof O=="function"?-O.apply(this,arguments):-O),B,o)},U,H)};function b(N,R){return R=Math.max(s[0],Math.min(s[1],R)),R===N.k?N:new it(R,N.x,N.y)}function S(N,R,O){var U=R[0]-O[0]*N.k,H=R[1]-O[1]*N.k;return U===N.x&&H===N.y?N:new it(N.k,U,H)}function j(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function w(N,R,O,U){N.on("start.zoom",function(){k(this,arguments).event(U).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(U).end()}).tween("zoom",function(){var H=this,B=arguments,G=k(H,B).event(U),J=e.apply(H,B),Y=O==null?j(J):typeof O=="function"?O.apply(H,B):O,ie=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),Z=H.__zoom,xe=typeof R=="function"?R.apply(H,B):R,de=u(Z.invert(Y).concat(ie/Z.k),xe.invert(Y).concat(ie/xe.k));return function(z){if(z===1)z=xe;else{var K=de(z),te=ie/K[2];z=new it(te,Y[0]-K[0]*te,Y[1]-K[1]*te)}G.zoom(null,z)}})}function k(N,R,O){return!O&&N.__zooming||new A(N,R)}function A(N,R){this.that=N,this.args=R,this.active=0,this.sourceEvent=null,this.extent=e.apply(N,R),this.taps=0}A.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,R){return this.mouse&&N!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var R=Oe(this.that).datum();d.call(N,this.that,new xv(N,{sourceEvent:this.sourceEvent,target:g,type:N,transform:this.that.__zoom,dispatch:d}),R)}};function _(N,...R){if(!n.apply(this,arguments))return;var O=k(this,R).event(N),U=this.__zoom,H=Math.max(s[0],Math.min(s[1],U.k*Math.pow(2,i.apply(this,arguments)))),B=We(N);if(O.wheel)(O.mouse[0][0]!==B[0]||O.mouse[0][1]!==B[1])&&(O.mouse[1]=U.invert(O.mouse[0]=B)),clearTimeout(O.wheel);else{if(U.k===H)return;O.mouse=[B,U.invert(B)],hr(this),O.start()}cn(N),O.wheel=setTimeout(G,x),O.zoom("mouse",r(S(b(U,H),O.mouse[0],O.mouse[1]),O.extent,o));function G(){O.wheel=null,O.end()}}function P(N,...R){if(f||!n.apply(this,arguments))return;var O=N.currentTarget,U=k(this,R,!0).event(N),H=Oe(N.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",ie,!0),B=We(N,O),G=N.clientX,J=N.clientY;lc(N.view),ji(N),U.mouse=[B,this.__zoom.invert(B)],hr(this),U.start();function Y(Z){if(cn(Z),!U.moved){var xe=Z.clientX-G,de=Z.clientY-J;U.moved=xe*xe+de*de>y}U.event(Z).zoom("mouse",r(S(U.that.__zoom,U.mouse[0]=We(Z,O),U.mouse[1]),U.extent,o))}function ie(Z){H.on("mousemove.zoom mouseup.zoom",null),cc(Z.view,U.moved),cn(Z),U.event(Z).end()}}function I(N,...R){if(n.apply(this,arguments)){var O=this.__zoom,U=We(N.changedTouches?N.changedTouches[0]:N,this),H=O.invert(U),B=O.k*(N.shiftKey?.5:2),G=r(S(b(O,B),U,H),e.apply(this,R),o);cn(N),c>0?Oe(this).transition().duration(c).call(w,G,U,N):Oe(this).call(g.transform,G,U,N)}}function T(N,...R){if(n.apply(this,arguments)){var O=N.touches,U=O.length,H=k(this,R,N.changedTouches.length===U).event(N),B,G,J,Y;for(ji(N),G=0;G<U;++G)J=O[G],Y=We(J,this),Y=[Y,this.__zoom.invert(Y),J.identifier],H.touch0?!H.touch1&&H.touch0[2]!==Y[2]&&(H.touch1=Y,H.taps=0):(H.touch0=Y,B=!0,H.taps=1+!!h);h&&(h=clearTimeout(h)),B&&(H.taps<2&&(p=Y[0],h=setTimeout(function(){h=null},m)),hr(this),H.start())}}function E(N,...R){if(this.__zooming){var O=k(this,R).event(N),U=N.changedTouches,H=U.length,B,G,J,Y;for(cn(N),B=0;B<H;++B)G=U[B],J=We(G,this),O.touch0&&O.touch0[2]===G.identifier?O.touch0[0]=J:O.touch1&&O.touch1[2]===G.identifier&&(O.touch1[0]=J);if(G=O.that.__zoom,O.touch1){var ie=O.touch0[0],Z=O.touch0[1],xe=O.touch1[0],de=O.touch1[1],z=(z=xe[0]-ie[0])*z+(z=xe[1]-ie[1])*z,K=(K=de[0]-Z[0])*K+(K=de[1]-Z[1])*K;G=b(G,Math.sqrt(z/K)),J=[(ie[0]+xe[0])/2,(ie[1]+xe[1])/2],Y=[(Z[0]+de[0])/2,(Z[1]+de[1])/2]}else if(O.touch0)J=O.touch0[0],Y=O.touch0[1];else return;O.zoom("touch",r(S(G,J,Y),O.extent,o))}}function M(N,...R){if(this.__zooming){var O=k(this,R).event(N),U=N.changedTouches,H=U.length,B,G;for(ji(N),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),B=0;B<H;++B)G=U[B],O.touch0&&O.touch0[2]===G.identifier?delete O.touch0:O.touch1&&O.touch1[2]===G.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(G=We(G,this),Math.hypot(p[0]-G[0],p[1]-G[1])<v)){var J=Oe(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return g.wheelDelta=function(N){return arguments.length?(i=typeof N=="function"?N:sr(+N),g):i},g.filter=function(N){return arguments.length?(n=typeof N=="function"?N:sr(!!N),g):n},g.touchable=function(N){return arguments.length?(a=typeof N=="function"?N:sr(!!N),g):a},g.extent=function(N){return arguments.length?(e=typeof N=="function"?N:sr([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),g):e},g.scaleExtent=function(N){return arguments.length?(s[0]=+N[0],s[1]=+N[1],g):[s[0],s[1]]},g.translateExtent=function(N){return arguments.length?(o[0][0]=+N[0][0],o[1][0]=+N[1][0],o[0][1]=+N[0][1],o[1][1]=+N[1][1],g):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},g.constrain=function(N){return arguments.length?(r=N,g):r},g.duration=function(N){return arguments.length?(c=+N,g):c},g.interpolate=function(N){return arguments.length?(u=N,g):u},g.on=function(){var N=d.on.apply(d,arguments);return N===d?g:N},g.clickDistance=function(N){return arguments.length?(y=(N=+N)*N,g):Math.sqrt(y)},g.tapDistance=function(N){return arguments.length?(v=+N,g):v},g}var kv=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;const Sv=kv;var Nv=typeof self=="object"&&self&&self.Object===Object&&self,Av=Sv||Nv||Function("return this")();const gc=Av;var $v=gc.Symbol;const Pr=$v;var xc=Object.prototype,Tv=xc.hasOwnProperty,Cv=xc.toString,un=Pr?Pr.toStringTag:void 0;function Ev(n){var e=Tv.call(n,un),r=n[un];try{n[un]=void 0;var i=!0}catch{}var a=Cv.call(n);return i&&(e?n[un]=r:delete n[un]),a}var Pv=Object.prototype,Iv=Pv.toString;function Ov(n){return Iv.call(n)}var Rv="[object Null]",Dv="[object Undefined]",io=Pr?Pr.toStringTag:void 0;function Mv(n){return n==null?n===void 0?Dv:Rv:io&&io in Object(n)?Ev(n):Ov(n)}function zv(n){return n!=null&&typeof n=="object"}var Lv="[object Symbol]";function Uv(n){return typeof n=="symbol"||zv(n)&&Mv(n)==Lv}var Fv=/\s/;function Bv(n){for(var e=n.length;e--&&Fv.test(n.charAt(e)););return e}var qv=/^\s+/;function Hv(n){return n&&n.slice(0,Bv(n)+1).replace(qv,"")}function Ir(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var ao=0/0,Wv=/^[-+]0x[0-9a-f]+$/i,Gv=/^0b[01]+$/i,Kv=/^0o[0-7]+$/i,Vv=parseInt;function so(n){if(typeof n=="number")return n;if(Uv(n))return ao;if(Ir(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Ir(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Hv(n);var r=Gv.test(n);return r||Kv.test(n)?Vv(n.slice(2),r?2:8):Wv.test(n)?ao:+n}var Jv=function(){return gc.Date.now()};const ki=Jv;var Yv="Expected a function",Xv=Math.max,Qv=Math.min;function vc(n,e,r){var i,a,s,o,c,u,d=0,h=!1,p=!1,f=!0;if(typeof n!="function")throw new TypeError(Yv);e=so(e)||0,Ir(r)&&(h=!!r.leading,p="maxWait"in r,s=p?Xv(so(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f);function m(k){var A=i,_=a;return i=a=void 0,d=k,o=n.apply(_,A),o}function x(k){return d=k,c=setTimeout(g,e),h?m(k):o}function y(k){var A=k-u,_=k-d,P=e-A;return p?Qv(P,s-_):P}function v(k){var A=k-u,_=k-d;return u===void 0||A>=e||A<0||p&&_>=s}function g(){var k=ki();if(v(k))return b(k);c=setTimeout(g,y(k))}function b(k){return c=void 0,f&&i?m(k):(i=a=void 0,o)}function S(){c!==void 0&&clearTimeout(c),d=0,i=u=a=c=void 0}function j(){return c===void 0?o:b(ki())}function w(){var k=ki(),A=v(k);if(i=arguments,a=this,u=k,A){if(c===void 0)return x(u);if(p)return clearTimeout(c),c=setTimeout(g,e),m(u)}return c===void 0&&(c=setTimeout(g,e)),o}return w.cancel=S,w.flush=j,w}var Zv="Expected a function";function ey(n,e,r){var i=!0,a=!0;if(typeof n!="function")throw new TypeError(Zv);return Ir(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),vc(n,e,{leading:i,maxWait:e,trailing:a})}var Tt=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Tt.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Tt.Bounce.In(n*2)*.5:Tt.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),bn=function(){return performance.now()},yc=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var a=0,s=r;a<s.length;a++){var o=s[a];(e=o._group)===null||e===void 0||e.remove(o),o._group=this,this._tweens[o.getId()]=o,this._tweensAddedDuringUpdate[o.getId()]=o}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,a=e;i<a.length;i++){var s=a[i];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=bn()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var a=0;a<i.length;a++){var s=this._tweens[i[a]],o=!r;s&&s.update(e,o)===!1&&!r&&this.remove(s)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),Ht={Linear:function(n,e){var r=n.length-1,i=r*e,a=Math.floor(i),s=Ht.Utils.Linear;return e<0?s(n[0],n[1],i):e>1?s(n[r],n[r-1],r-i):s(n[a],n[a+1>r?r:a+1],i-a)},Bezier:function(n,e){for(var r=0,i=n.length-1,a=Math.pow,s=Ht.Utils.Bernstein,o=0;o<=i;o++)r+=a(1-e,i-o)*a(e,o)*n[o]*s(i,o);return r},CatmullRom:function(n,e){var r=n.length-1,i=r*e,a=Math.floor(i),s=Ht.Utils.CatmullRom;return n[0]===n[r]?(e<0&&(a=Math.floor(i=r*(1+e))),s(n[(a-1+r)%r],n[a],n[(a+1)%r],n[(a+2)%r],i-a)):e<0?n[0]-(s(n[0],n[0],n[1],n[1],-i)-n[0]):e>1?n[r]-(s(n[r],n[r],n[r-1],n[r-1],i-r)-n[r]):s(n[a?a-1:0],n[a],n[r<a+1?r:a+1],n[r<a+2?r:a+2],i-a)},Utils:{Linear:function(n,e,r){return(e-n)*r+n},Bernstein:function(n,e){var r=Ht.Utils.Factorial;return r(n)/r(e)/r(n-e)},Factorial:function(){var n=[1];return function(e){var r=1;if(n[e])return n[e];for(var i=e;i>1;i--)r*=i;return n[e]=r,r}}(),CatmullRom:function(n,e,r,i,a){var s=(r-n)*.5,o=(i-e)*.5,c=a*a,u=a*c;return(2*e-2*r+s+o)*u+(-3*e+3*r-2*s-o)*c+s*a+e}}},ty=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),oa=new yc,oo=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Tt.Linear.None,this._interpolationFunction=Ht.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=ty.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=oa,oa.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=bn()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var a={};for(var s in this._valuesEnd)a[s]=this._valuesEnd[s];this._valuesEnd=a}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,a,s){for(var o in i){var c=e[o],u=Array.isArray(c),d=u?"array":typeof c,h=!u&&Array.isArray(i[o]);if(!(d==="undefined"||d==="function")){if(h){var p=i[o];if(p.length===0)continue;for(var f=[c],m=0,x=p.length;m<x;m+=1){var y=this._handleRelativeValue(c,p[m]);if(isNaN(y)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(y)}h&&(i[o]=f)}if((d==="object"||u)&&c&&!h){r[o]=u?[]:{};var v=c;for(var g in v)r[o][g]=v[g];a[o]=u?[]:{};var p=i[o];if(!this._isDynamic){var b={};for(var g in p)b[g]=p[g];i[o]=p=b}this._setupProperties(v,r[o],p,a[o],s)}else(typeof r[o]>"u"||s)&&(r[o]=c),u||(r[o]*=1),h?a[o]=i[o].slice().reverse():a[o]=r[o]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=bn()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=bn()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Tt.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=Ht.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,a;if(e===void 0&&(e=bn()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,c=this._duration+((a=this._repeatDelayTime)!==null&&a!==void 0?a:this._delayTime),u=this._duration+this._repeat*c,d=function(){if(i._duration===0||o>u)return 1;var y=Math.trunc(o/c),v=o-y*c,g=Math.min(v/i._duration,1);return g===0&&o===i._duration?1:g},h=d(),p=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,p),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||o>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((o-this._duration)/c)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=f);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=c*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var m=0,x=this._chainedTweens.length;m<x;m++)this._chainedTweens[m].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,a){for(var s in i)if(r[s]!==void 0){var o=r[s]||0,c=i[s],u=Array.isArray(e[s]),d=Array.isArray(c),h=!u&&d;h?e[s]=this._interpolationFunction(c,a):typeof c=="object"&&c?this._updateProperties(e[s],o,c,a):(c=this._handleRelativeValue(o,c),typeof c=="number"&&(e[s]=o+(c-o)*a))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}(),Ve=oa;Ve.getAll.bind(Ve);Ve.removeAll.bind(Ve);Ve.add.bind(Ve);Ve.remove.bind(Ve);Ve.update.bind(Ve);function lo(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function ny(n){if(Array.isArray(n))return n}function ry(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function iy(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function ay(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,s,o,c=[],u=!0,d=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(u=(i=s.call(r)).done)&&(c.push(i.value),c.length!==e);u=!0);}catch(h){d=!0,a=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return c}}function sy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oy(n,e){return ny(n)||ay(n,e)||ly(n,e)||sy()}function ly(n,e){if(n){if(typeof n=="string")return lo(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lo(n,e):void 0}}var cy=iy(function n(e,r){var i=r.default,a=i===void 0?null:i,s=r.triggerUpdate,o=s===void 0?!0:s,c=r.onChange,u=c===void 0?function(d,h){}:c;ry(this,n),this.name=e,this.defaultVal=a,this.triggerUpdate=o,this.onChange=u});function za(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,a=i===void 0?{}:i,s=n.methods,o=s===void 0?{}:s,c=n.aliases,u=c===void 0?{}:c,d=n.init,h=d===void 0?function(){}:d,p=n.update,f=p===void 0?function(){}:p,m=Object.keys(a).map(function(x){return new cy(x,a[x])});return function x(){for(var y=arguments.length,v=new Array(y),g=0;g<y;g++)v[g]=arguments[g];var b=!!(this instanceof x&&this.constructor),S=b?v.shift():void 0,j=v[0],w=j===void 0?{}:j,k=Object.assign({},r instanceof Function?r(w):r,{initialised:!1}),A={};function _(T){return P(T,w),I(),_}var P=function(E,M){h.call(_,E,k,M),k.initialised=!0},I=vc(function(){k.initialised&&(f.call(_,k,A),A={})},1);return m.forEach(function(T){_[T.name]=E(T);function E(M){var N=M.name,R=M.triggerUpdate,O=R===void 0?!1:R,U=M.onChange,H=U===void 0?function(J,Y){}:U,B=M.defaultVal,G=B===void 0?null:B;return function(J){var Y=k[N];if(!arguments.length)return Y;var ie=J===void 0?G:J;return k[N]=ie,H.call(_,ie,k,Y),!A.hasOwnProperty(N)&&(A[N]=Y),O&&I(),_}}}),Object.keys(o).forEach(function(T){_[T]=function(){for(var E,M=arguments.length,N=new Array(M),R=0;R<M;R++)N[R]=arguments[R];return(E=o[T]).call.apply(E,[_,k].concat(N))}}),Object.entries(u).forEach(function(T){var E=oy(T,2),M=E[0],N=E[1];return _[M]=_[N]}),_.resetProps=function(){return m.forEach(function(T){_[T.name](T.defaultVal)}),_},_.resetProps(),k._rerender=I,b&&S&&_(S),_}}var ee=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};function Or(n){"@babel/helpers - typeof";return Or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(n)}var uy=/^\s+/,dy=/\s+$/;function q(n,e){if(n=n||"",e=e||{},n instanceof q)return n;if(!(this instanceof q))return new q(n,e);var r=hy(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}q.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,a,s,o,c;return r=e.r/255,i=e.g/255,a=e.b/255,r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),a<=.03928?c=a/12.92:c=Math.pow((a+.055)/1.055,2.4),.2126*s+.7152*o+.0722*c},setAlpha:function(e){return this._a=bc(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=uo(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=uo(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),a=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+a+"%)":"hsva("+r+", "+i+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=co(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=co(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),a=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+a+"%)":"hsla("+r+", "+i+"%, "+a+"%, "+this._roundA+")"},toHex:function(e){return ho(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return gy(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(se(this._r,255)*100)+"%",g:Math.round(se(this._g,255)*100)+"%",b:Math.round(se(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(se(this._r,255)*100)+"%, "+Math.round(se(this._g,255)*100)+"%, "+Math.round(se(this._b,255)*100)+"%)":"rgba("+Math.round(se(this._r,255)*100)+"%, "+Math.round(se(this._g,255)*100)+"%, "+Math.round(se(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:$y[ho(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+po(this._r,this._g,this._b,this._a),i=r,a=this._gradientType?"GradientType = 1, ":"";if(e){var s=q(e);i="#"+po(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,a=this._a<1&&this._a>=0,s=!r&&a&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return q(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(by,arguments)},brighten:function(){return this._applyModification(wy,arguments)},darken:function(){return this._applyModification(_y,arguments)},desaturate:function(){return this._applyModification(xy,arguments)},saturate:function(){return this._applyModification(vy,arguments)},greyscale:function(){return this._applyModification(yy,arguments)},spin:function(){return this._applyModification(jy,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(Ny,arguments)},complement:function(){return this._applyCombination(ky,arguments)},monochromatic:function(){return this._applyCombination(Ay,arguments)},splitcomplement:function(){return this._applyCombination(Sy,arguments)},triad:function(){return this._applyCombination(fo,[3])},tetrad:function(){return this._applyCombination(fo,[4])}};q.fromRatio=function(n,e){if(Or(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=wn(n[i]));n=r}return q(n,e)};function hy(n){var e={r:0,g:0,b:0},r=1,i=null,a=null,s=null,o=!1,c=!1;return typeof n=="string"&&(n=Py(n)),Or(n)=="object"&&(Qe(n.r)&&Qe(n.g)&&Qe(n.b)?(e=py(n.r,n.g,n.b),o=!0,c=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Qe(n.h)&&Qe(n.s)&&Qe(n.v)?(i=wn(n.s),a=wn(n.v),e=my(n.h,i,a),o=!0,c="hsv"):Qe(n.h)&&Qe(n.s)&&Qe(n.l)&&(i=wn(n.s),s=wn(n.l),e=fy(n.h,i,s),o=!0,c="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=bc(r),{ok:o,format:n.format||c,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function py(n,e,r){return{r:se(n,255)*255,g:se(e,255)*255,b:se(r,255)*255}}function co(n,e,r){n=se(n,255),e=se(e,255),r=se(r,255);var i=Math.max(n,e,r),a=Math.min(n,e,r),s,o,c=(i+a)/2;if(i==a)s=o=0;else{var u=i-a;switch(o=c>.5?u/(2-i-a):u/(i+a),i){case n:s=(e-r)/u+(e<r?6:0);break;case e:s=(r-n)/u+2;break;case r:s=(n-e)/u+4;break}s/=6}return{h:s,s:o,l:c}}function fy(n,e,r){var i,a,s;n=se(n,360),e=se(e,100),r=se(r,100);function o(d,h,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?d+(h-d)*6*p:p<1/2?h:p<2/3?d+(h-d)*(2/3-p)*6:d}if(e===0)i=a=s=r;else{var c=r<.5?r*(1+e):r+e-r*e,u=2*r-c;i=o(u,c,n+1/3),a=o(u,c,n),s=o(u,c,n-1/3)}return{r:i*255,g:a*255,b:s*255}}function uo(n,e,r){n=se(n,255),e=se(e,255),r=se(r,255);var i=Math.max(n,e,r),a=Math.min(n,e,r),s,o,c=i,u=i-a;if(o=i===0?0:u/i,i==a)s=0;else{switch(i){case n:s=(e-r)/u+(e<r?6:0);break;case e:s=(r-n)/u+2;break;case r:s=(n-e)/u+4;break}s/=6}return{h:s,s:o,v:c}}function my(n,e,r){n=se(n,360)*6,e=se(e,100),r=se(r,100);var i=Math.floor(n),a=n-i,s=r*(1-e),o=r*(1-a*e),c=r*(1-(1-a)*e),u=i%6,d=[r,o,s,s,c,r][u],h=[c,r,r,o,s,s][u],p=[s,s,c,r,r,o][u];return{r:d*255,g:h*255,b:p*255}}function ho(n,e,r,i){var a=[Fe(Math.round(n).toString(16)),Fe(Math.round(e).toString(16)),Fe(Math.round(r).toString(16))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function gy(n,e,r,i,a){var s=[Fe(Math.round(n).toString(16)),Fe(Math.round(e).toString(16)),Fe(Math.round(r).toString(16)),Fe(wc(i))];return a&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function po(n,e,r,i){var a=[Fe(wc(i)),Fe(Math.round(n).toString(16)),Fe(Math.round(e).toString(16)),Fe(Math.round(r).toString(16))];return a.join("")}q.equals=function(n,e){return!n||!e?!1:q(n).toRgbString()==q(e).toRgbString()};q.random=function(){return q.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function xy(n,e){e=e===0?0:e||10;var r=q(n).toHsl();return r.s-=e/100,r.s=Qr(r.s),q(r)}function vy(n,e){e=e===0?0:e||10;var r=q(n).toHsl();return r.s+=e/100,r.s=Qr(r.s),q(r)}function yy(n){return q(n).desaturate(100)}function by(n,e){e=e===0?0:e||10;var r=q(n).toHsl();return r.l+=e/100,r.l=Qr(r.l),q(r)}function wy(n,e){e=e===0?0:e||10;var r=q(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),q(r)}function _y(n,e){e=e===0?0:e||10;var r=q(n).toHsl();return r.l-=e/100,r.l=Qr(r.l),q(r)}function jy(n,e){var r=q(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,q(r)}function ky(n){var e=q(n).toHsl();return e.h=(e.h+180)%360,q(e)}function fo(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=q(n).toHsl(),i=[q(n)],a=360/e,s=1;s<e;s++)i.push(q({h:(r.h+s*a)%360,s:r.s,l:r.l}));return i}function Sy(n){var e=q(n).toHsl(),r=e.h;return[q(n),q({h:(r+72)%360,s:e.s,l:e.l}),q({h:(r+216)%360,s:e.s,l:e.l})]}function Ny(n,e,r){e=e||6,r=r||30;var i=q(n).toHsl(),a=360/r,s=[q(n)];for(i.h=(i.h-(a*e>>1)+720)%360;--e;)i.h=(i.h+a)%360,s.push(q(i));return s}function Ay(n,e){e=e||6;for(var r=q(n).toHsv(),i=r.h,a=r.s,s=r.v,o=[],c=1/e;e--;)o.push(q({h:i,s:a,v:s})),s=(s+c)%1;return o}q.mix=function(n,e,r){r=r===0?0:r||50;var i=q(n).toRgb(),a=q(e).toRgb(),s=r/100,o={r:(a.r-i.r)*s+i.r,g:(a.g-i.g)*s+i.g,b:(a.b-i.b)*s+i.b,a:(a.a-i.a)*s+i.a};return q(o)};q.readability=function(n,e){var r=q(n),i=q(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};q.isReadable=function(n,e,r){var i=q.readability(n,e),a,s;switch(s=!1,a=Iy(r),a.level+a.size){case"AAsmall":case"AAAlarge":s=i>=4.5;break;case"AAlarge":s=i>=3;break;case"AAAsmall":s=i>=7;break}return s};q.mostReadable=function(n,e,r){var i=null,a=0,s,o,c,u;r=r||{},o=r.includeFallbackColors,c=r.level,u=r.size;for(var d=0;d<e.length;d++)s=q.readability(n,e[d]),s>a&&(a=s,i=q(e[d]));return q.isReadable(n,i,{level:c,size:u})||!o?i:(r.includeFallbackColors=!1,q.mostReadable(n,["#fff","#000"],r))};var la=q.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},$y=q.hexNames=Ty(la);function Ty(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function bc(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function se(n,e){Cy(n)&&(n="100%");var r=Ey(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Qr(n){return Math.min(1,Math.max(0,n))}function Te(n){return parseInt(n,16)}function Cy(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function Ey(n){return typeof n=="string"&&n.indexOf("%")!=-1}function Fe(n){return n.length==1?"0"+n:""+n}function wn(n){return n<=1&&(n=n*100+"%"),n}function wc(n){return Math.round(parseFloat(n)*255).toString(16)}function mo(n){return Te(n)/255}var ze=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Qe(n){return!!ze.CSS_UNIT.exec(n)}function Py(n){n=n.replace(uy,"").replace(dy,"").toLowerCase();var e=!1;if(la[n])n=la[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=ze.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=ze.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=ze.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=ze.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=ze.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=ze.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=ze.hex8.exec(n))?{r:Te(r[1]),g:Te(r[2]),b:Te(r[3]),a:mo(r[4]),format:e?"name":"hex8"}:(r=ze.hex6.exec(n))?{r:Te(r[1]),g:Te(r[2]),b:Te(r[3]),format:e?"name":"hex"}:(r=ze.hex4.exec(n))?{r:Te(r[1]+""+r[1]),g:Te(r[2]+""+r[2]),b:Te(r[3]+""+r[3]),a:mo(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=ze.hex3.exec(n))?{r:Te(r[1]+""+r[1]),g:Te(r[2]+""+r[2]),b:Te(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function Iy(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function ca(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Oy(n){if(Array.isArray(n))return ca(n)}function _c(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function Ry(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Dy(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ee(n,e){return n.get(_c(n,e))}function go(n,e,r){Ry(n,e),e.set(n,r)}function xo(n,e,r){return n.set(_c(n,e),r),r}function My(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,qy(i.key),i)}}function zy(n,e,r){return e&&My(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ly(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Uy(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fy(n){return Oy(n)||Ly(n)||Hy(n)||Uy()}function By(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function qy(n){var e=By(n,"string");return typeof e=="symbol"?e:e+""}function Hy(n,e){if(n){if(typeof n=="string")return ca(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ca(n,e):void 0}}var Wy=123,Gy=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},jc=function(e,r,i){return(e<<16)+(r<<8)+i},Ky=function(e){var r=q(e).toRgb(),i=r.r,a=r.g,s=r.b;return jc(i,a,s)},vo=function(e,r){return e*Wy%Math.pow(2,r)},_t=new WeakMap,Ze=new WeakMap,Vy=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;Dy(this,n),go(this,_t,void 0),go(this,Ze,void 0),xo(Ze,this,e),this.reset()}return zy(n,[{key:"reset",value:function(){xo(_t,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Ee(_t,this).length>=Math.pow(2,24-Ee(Ze,this)))return null;var i=Ee(_t,this).length,a=vo(i,Ee(Ze,this)),s=Gy(i+(a<<24-Ee(Ze,this)));return Ee(_t,this).push(r),s}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?Ky(r):jc.apply(void 0,Fy(r));if(!i)return null;var a=i&Math.pow(2,24-Ee(Ze,this))-1,s=i>>24-Ee(Ze,this)&Math.pow(2,Ee(Ze,this))-1;return vo(a,Ee(Ze,this))!==s||a>=Ee(_t,this).length?null:Ee(_t,this)[a]}}])}(),Jn,le,kc,Sc,Nt,yo,Nc,Ac,$c,La,ua,da,zn={},Tc=[],Jy=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Zr=Array.isArray;function Ge(n,e){for(var r in e)n[r]=e[r];return n}function Ua(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Yy(n,e,r){var i,a,s,o={};for(s in e)s=="key"?i=e[s]:s=="ref"?a=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Jn.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)o[s]===void 0&&(o[s]=n.defaultProps[s]);return An(n,o,i,a,null)}function An(n,e,r,i,a){var s={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++kc,__i:-1,__u:0};return a==null&&le.vnode!=null&&le.vnode(s),s}function ei(n){return n.children}function pr(n,e){this.props=n,this.context=e}function Zt(n,e){if(e==null)return n.__?Zt(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?Zt(n):null}function Cc(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return Cc(n)}}function bo(n){(!n.__d&&(n.__d=!0)&&Nt.push(n)&&!Rr.__r++||yo!=le.debounceRendering)&&((yo=le.debounceRendering)||Nc)(Rr)}function Rr(){for(var n,e,r,i,a,s,o,c=1;Nt.length;)Nt.length>c&&Nt.sort(Ac),n=Nt.shift(),c=Nt.length,n.__d&&(r=void 0,a=(i=(e=n).__v).__e,s=[],o=[],e.__P&&((r=Ge({},i)).__v=i.__v+1,le.vnode&&le.vnode(r),Fa(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[a]:null,s,a??Zt(i),!!(32&i.__u),o),r.__v=i.__v,r.__.__k[r.__i]=r,Ic(s,r,o),r.__e!=a&&Cc(r)));Rr.__r=0}function Ec(n,e,r,i,a,s,o,c,u,d,h){var p,f,m,x,y,v,g=i&&i.__k||Tc,b=e.length;for(u=Xy(r,e,g,u,b),p=0;p<b;p++)(m=r.__k[p])!=null&&(f=m.__i==-1?zn:g[m.__i]||zn,m.__i=p,v=Fa(n,m,f,a,s,o,c,u,d,h),x=m.__e,m.ref&&f.ref!=m.ref&&(f.ref&&Ba(f.ref,null,m),h.push(m.ref,m.__c||x,m)),y==null&&x!=null&&(y=x),4&m.__u||f.__k===m.__k?u=Pc(m,u,n):typeof m.type=="function"&&v!==void 0?u=v:x&&(u=x.nextSibling),m.__u&=-7);return r.__e=y,u}function Xy(n,e,r,i,a){var s,o,c,u,d,h=r.length,p=h,f=0;for(n.__k=new Array(a),s=0;s<a;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(u=s+f,(o=n.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?An(null,o,null,null,null):Zr(o)?An(ei,{children:o},null,null,null):o.constructor==null&&o.__b>0?An(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,c=null,(d=o.__i=Qy(o,r,u,p))!=-1&&(p--,(c=r[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(a>h?f--:a<h&&f++),typeof o.type!="function"&&(o.__u|=4)):d!=u&&(d==u-1?f--:d==u+1?f++:(d>u?f--:f++,o.__u|=4))):n.__k[s]=null;if(p)for(s=0;s<h;s++)(c=r[s])!=null&&!(2&c.__u)&&(c.__e==i&&(i=Zt(c)),Rc(c,c));return i}function Pc(n,e,r){var i,a;if(typeof n.type=="function"){for(i=n.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=n,e=Pc(i[a],e,r));return e}n.__e!=e&&(e&&n.type&&!r.contains(e)&&(e=Zt(n)),r.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Qy(n,e,r,i){var a,s,o=n.key,c=n.type,u=e[r];if(u===null&&n.key==null||u&&o==u.key&&c==u.type&&!(2&u.__u))return r;if(i>(u!=null&&!(2&u.__u)?1:0))for(a=r-1,s=r+1;a>=0||s<e.length;){if(a>=0){if((u=e[a])&&!(2&u.__u)&&o==u.key&&c==u.type)return a;a--}if(s<e.length){if((u=e[s])&&!(2&u.__u)&&o==u.key&&c==u.type)return s;s++}}return-1}function wo(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||Jy.test(e)?r:r+"px"}function or(n,e,r,i,a){var s,o;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||wo(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||wo(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace($c,"$1")),o=e.toLowerCase(),e=o in n||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=r,r?i?r.u=i.u:(r.u=La,n.addEventListener(e,s?da:ua,s)):n.removeEventListener(e,s?da:ua,s);else{if(a=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function _o(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=La++;else if(e.t<r.u)return;return r(le.event?le.event(e):e)}}}function Fa(n,e,r,i,a,s,o,c,u,d){var h,p,f,m,x,y,v,g,b,S,j,w,k,A,_,P,I,T=e.type;if(e.constructor!=null)return null;128&r.__u&&(u=!!(32&r.__u),s=[c=e.__e=r.__e]),(h=le.__b)&&h(e);e:if(typeof T=="function")try{if(g=e.props,b="prototype"in T&&T.prototype.render,S=(h=T.contextType)&&i[h.__c],j=h?S?S.props.value:h.__:i,r.__c?v=(p=e.__c=r.__c).__=p.__E:(b?e.__c=p=new T(g,j):(e.__c=p=new pr(g,j),p.constructor=T,p.render=eb),S&&S.sub(p),p.props=g,p.state||(p.state={}),p.context=j,p.__n=i,f=p.__d=!0,p.__h=[],p._sb=[]),b&&p.__s==null&&(p.__s=p.state),b&&T.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=Ge({},p.__s)),Ge(p.__s,T.getDerivedStateFromProps(g,p.__s))),m=p.props,x=p.state,p.__v=e,f)b&&T.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),b&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(b&&T.getDerivedStateFromProps==null&&g!==m&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(g,j),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(g,p.__s,j)===!1||e.__v==r.__v){for(e.__v!=r.__v&&(p.props=g,p.state=p.__s,p.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(E){E&&(E.__=e)}),w=0;w<p._sb.length;w++)p.__h.push(p._sb[w]);p._sb=[],p.__h.length&&o.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(g,p.__s,j),b&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(m,x,y)})}if(p.context=j,p.props=g,p.__P=n,p.__e=!1,k=le.__r,A=0,b){for(p.state=p.__s,p.__d=!1,k&&k(e),h=p.render(p.props,p.state,p.context),_=0;_<p._sb.length;_++)p.__h.push(p._sb[_]);p._sb=[]}else do p.__d=!1,k&&k(e),h=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++A<25);p.state=p.__s,p.getChildContext!=null&&(i=Ge(Ge({},i),p.getChildContext())),b&&!f&&p.getSnapshotBeforeUpdate!=null&&(y=p.getSnapshotBeforeUpdate(m,x)),P=h,h!=null&&h.type===ei&&h.key==null&&(P=Oc(h.props.children)),c=Ec(n,Zr(P)?P:[P],e,r,i,a,s,o,c,u,d),p.base=e.__e,e.__u&=-161,p.__h.length&&o.push(p),v&&(p.__E=p.__=null)}catch(E){if(e.__v=null,u||s!=null)if(E.then){for(e.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;s[s.indexOf(c)]=null,e.__e=c}else for(I=s.length;I--;)Ua(s[I]);else e.__e=r.__e,e.__k=r.__k;le.__e(E,e,r)}else s==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):c=e.__e=Zy(r.__e,e,r,i,a,s,o,u,d);return(h=le.diffed)&&h(e),128&e.__u?void 0:c}function Ic(n,e,r){for(var i=0;i<r.length;i++)Ba(r[i],r[++i],r[++i]);le.__c&&le.__c(e,n),n.some(function(a){try{n=a.__h,a.__h=[],n.some(function(s){s.call(a)})}catch(s){le.__e(s,a.__v)}})}function Oc(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Zr(n)?n.map(Oc):Ge({},n)}function Zy(n,e,r,i,a,s,o,c,u){var d,h,p,f,m,x,y,v=r.props,g=e.props,b=e.type;if(b=="svg"?a="http://www.w3.org/2000/svg":b=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),s!=null){for(d=0;d<s.length;d++)if((m=s[d])&&"setAttribute"in m==!!b&&(b?m.localName==b:m.nodeType==3)){n=m,s[d]=null;break}}if(n==null){if(b==null)return document.createTextNode(g);n=document.createElementNS(a,b,g.is&&g),c&&(le.__m&&le.__m(e,s),c=!1),s=null}if(b==null)v===g||c&&n.data==g||(n.data=g);else{if(s=s&&Jn.call(n.childNodes),v=r.props||zn,!c&&s!=null)for(v={},d=0;d<n.attributes.length;d++)v[(m=n.attributes[d]).name]=m.value;for(d in v)if(m=v[d],d!="children"){if(d=="dangerouslySetInnerHTML")p=m;else if(!(d in g)){if(d=="value"&&"defaultValue"in g||d=="checked"&&"defaultChecked"in g)continue;or(n,d,null,m,a)}}for(d in g)m=g[d],d=="children"?f=m:d=="dangerouslySetInnerHTML"?h=m:d=="value"?x=m:d=="checked"?y=m:c&&typeof m!="function"||v[d]===m||or(n,d,m,v[d],a);if(h)c||p&&(h.__html==p.__html||h.__html==n.innerHTML)||(n.innerHTML=h.__html),e.__k=[];else if(p&&(n.innerHTML=""),Ec(e.type=="template"?n.content:n,Zr(f)?f:[f],e,r,i,b=="foreignObject"?"http://www.w3.org/1999/xhtml":a,s,o,s?s[0]:r.__k&&Zt(r,0),c,u),s!=null)for(d=s.length;d--;)Ua(s[d]);c||(d="value",b=="progress"&&x==null?n.removeAttribute("value"):x!=null&&(x!==n[d]||b=="progress"&&!x||b=="option"&&x!=v[d])&&or(n,d,x,v[d],a),d="checked",y!=null&&y!=n[d]&&or(n,d,y,v[d],a))}return n}function Ba(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(a){le.__e(a,r)}}function Rc(n,e,r){var i,a;if(le.unmount&&le.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||Ba(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){le.__e(s,e)}i.base=i.__P=null}if(i=n.__k)for(a=0;a<i.length;a++)i[a]&&Rc(i[a],e,r||typeof n.type!="function");r||Ua(n.__e),n.__c=n.__=n.__e=void 0}function eb(n,e,r){return this.constructor(n,r)}function tb(n,e,r){var i,a,s,o;e==document&&(e=document.documentElement),le.__&&le.__(n,e),a=(i=typeof r=="function")?null:r&&r.__k||e.__k,s=[],o=[],Fa(e,n=(!i&&r||e).__k=Yy(ei,null,[n]),a||zn,zn,e.namespaceURI,!i&&r?[r]:a?null:e.firstChild?Jn.call(e.childNodes):null,s,!i&&r?r:a?a.__e:e.firstChild,i,o),Ic(s,n,o)}function Dc(n,e,r){var i,a,s,o,c=Ge({},n.props);for(s in n.type&&n.type.defaultProps&&(o=n.type.defaultProps),e)s=="key"?i=e[s]:s=="ref"?a=e[s]:c[s]=e[s]===void 0&&o!=null?o[s]:e[s];return arguments.length>2&&(c.children=arguments.length>3?Jn.call(arguments,2):r),An(n.type,c,i||n.key,a||n.ref,null)}Jn=Tc.slice,le={__e:function(n,e,r,i){for(var a,s,o;e=e.__;)if((a=e.__c)&&!a.__)try{if((s=a.constructor)&&s.getDerivedStateFromError!=null&&(a.setState(s.getDerivedStateFromError(n)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(n,i||{}),o=a.__d),o)return a.__E=a}catch(c){n=c}throw n}},kc=0,Sc=function(n){return n!=null&&n.constructor==null},pr.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ge({},this.state),typeof n=="function"&&(n=n(Ge({},r),this.props)),n&&Ge(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),bo(this))},pr.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),bo(this))},pr.prototype.render=ei,Nt=[],Nc=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ac=function(n,e){return n.__v.__b-e.__v.__b},Rr.__r=0,$c=/(PointerCapture)$|Capture$/i,La=0,ua=_o(!1),da=_o(!0);function jo(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function nb(n){if(Array.isArray(n))return n}function rb(n,e,r){return(e=cb(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function ib(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,s,o,c=[],u=!0,d=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(u=(i=s.call(r)).done)&&(c.push(i.value),c.length!==e);u=!0);}catch(h){d=!0,a=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return c}}function ab(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ko(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function sb(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ko(Object(r),!0).forEach(function(i){rb(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):ko(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function ob(n,e){return nb(n)||ib(n,e)||ub(n,e)||ab()}function lb(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cb(n){var e=lb(n,"string");return typeof e=="symbol"?e:e+""}function Dr(n){"@babel/helpers - typeof";return Dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dr(n)}function ub(n,e){if(n){if(typeof n=="string")return jo(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jo(n,e):void 0}}var ha=function(e){if(Dr(e)!=="object")return e;var r=Dc(e);if(r.props){var i;r.props=sb({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(ha):ha(r.props.children))}return r},db=function(e){return Sc(Dc(e))},hb=function(e,r){delete r.__k,tb(ha(e),r)};function pb(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}var fb=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;pb(fb);var mb=za({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.style,s=a===void 0?{}:a,o=!!e&&Dr(e)==="object"&&!!e.node&&typeof e.node=="function",c=Oe(o?e.node():e);c.style("position")==="static"&&c.style("position","relative"),r.tooltipEl=c.append("div").attr("class","float-tooltip-kap"),Object.entries(s).forEach(function(d){var h=ob(d,2),p=h[0],f=h[1];return r.tooltipEl.style(p,f)}),r.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,c.on("mousemove.".concat(u),function(d){r.mouseInside=!0;var h=We(d),p=c.node(),f=p.offsetWidth,m=p.offsetHeight,x=[r.offsetX===null||r.offsetX===void 0?"-".concat(h[0]/f*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?m>130&&m-h[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",h[0]+"px").style("top",h[1]+"px").style("transform","translate(".concat(x.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseover.".concat(u),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseout.".concat(u),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):db(e.content)?(e.tooltipEl.text(""),hb(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function gb(n,e,r){var i,a=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function s(){var o,c=i.length,u,d=0,h=0,p=0;for(o=0;o<c;++o)u=i[o],d+=u.x||0,h+=u.y||0,p+=u.z||0;for(d=(d/c-n)*a,h=(h/c-e)*a,p=(p/c-r)*a,o=0;o<c;++o)u=i[o],d&&(u.x-=d),h&&(u.y-=h),p&&(u.z-=p)}return s.initialize=function(o){i=o},s.x=function(o){return arguments.length?(n=+o,s):n},s.y=function(o){return arguments.length?(e=+o,s):e},s.z=function(o){return arguments.length?(r=+o,s):r},s.strength=function(o){return arguments.length?(a=+o,s):a},s}function xb(n){const e=+this._x.call(null,n);return Mc(this.cover(e),e,n)}function Mc(n,e,r){if(isNaN(e))return n;var i,a=n._root,s={data:r},o=n._x0,c=n._x1,u,d,h,p,f;if(!a)return n._root=s,n;for(;a.length;)if((h=e>=(u=(o+c)/2))?o=u:c=u,i=a,!(a=a[p=+h]))return i[p]=s,n;if(d=+n._x.call(null,a.data),e===d)return s.next=a,i?i[p]=s:n._root=s,n;do i=i?i[p]=new Array(2):n._root=new Array(2),(h=e>=(u=(o+c)/2))?o=u:c=u;while((p=+h)==(f=+(d>=u)));return i[f]=a,i[p]=s,n}function vb(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,a=-1/0;for(let s=0,o;s<e;++s)isNaN(o=+this._x.call(null,n[s]))||(r[s]=o,o<i&&(i=o),o>a&&(a=o));if(i>a)return this;this.cover(i).cover(a);for(let s=0;s<e;++s)Mc(this,r[s],n[s]);return this}function yb(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,a=this._root,s,o;e>n||n>=r;)switch(o=+(n<e),s=new Array(2),s[o]=a,a=s,i*=2,o){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=a)}return this._x0=e,this._x1=r,this}function bb(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function wb(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function ot(n,e,r){this.node=n,this.x0=e,this.x1=r}function _b(n,e){var r,i=this._x0,a,s,o=this._x1,c=[],u=this._root,d,h;for(u&&c.push(new ot(u,i,o)),e==null?e=1/0:(i=n-e,o=n+e);d=c.pop();)if(!(!(u=d.node)||(a=d.x0)>o||(s=d.x1)<i))if(u.length){var p=(a+s)/2;c.push(new ot(u[1],p,s),new ot(u[0],a,p)),(h=+(n>=p))&&(d=c[c.length-1],c[c.length-1]=c[c.length-1-h],c[c.length-1-h]=d)}else{var f=Math.abs(n-+this._x.call(null,u.data));f<e&&(e=f,i=n-f,o=n+f,r=u.data)}return r}function jb(n){if(isNaN(u=+this._x.call(null,n)))return this;var e,r=this._root,i,a,s,o=this._x0,c=this._x1,u,d,h,p,f;if(!r)return this;if(r.length)for(;;){if((h=u>=(d=(o+c)/2))?o=d:c=d,e=r,!(r=r[p=+h]))return this;if(!r.length)break;e[p+1&1]&&(i=e,f=p)}for(;r.data!==n;)if(a=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,a?(s?a.next=s:delete a.next,this):e?(s?e[p]=s:delete e[p],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[f]=r:this._root=r),this):(this._root=s,this)}function kb(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Sb(){return this._root}function Nb(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Ab(n){var e=[],r,i=this._root,a,s,o;for(i&&e.push(new ot(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,s=r.x0,o=r.x1)&&i.length){var c=(s+o)/2;(a=i[1])&&e.push(new ot(a,c,o)),(a=i[0])&&e.push(new ot(a,s,c))}return this}function $b(n){var e=[],r=[],i;for(this._root&&e.push(new ot(this._root,this._x0,this._x1));i=e.pop();){var a=i.node;if(a.length){var s,o=i.x0,c=i.x1,u=(o+c)/2;(s=a[0])&&e.push(new ot(s,o,u)),(s=a[1])&&e.push(new ot(s,u,c))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function Tb(n){return n[0]}function Cb(n){return arguments.length?(this._x=n,this):this._x}function zc(n,e){var r=new qa(e??Tb,NaN,NaN);return n==null?r:r.addAll(n)}function qa(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function So(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Ne=zc.prototype=qa.prototype;Ne.copy=function(){var n=new qa(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=So(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var a=0;a<2;++a)(i=e.source[a])&&(i.length?r.push({source:i,target:e.target[a]=new Array(2)}):e.target[a]=So(i));return n};Ne.add=xb;Ne.addAll=vb;Ne.cover=yb;Ne.data=bb;Ne.extent=wb;Ne.find=_b;Ne.remove=jb;Ne.removeAll=kb;Ne.root=Sb;Ne.size=Nb;Ne.visit=Ab;Ne.visitAfter=$b;Ne.x=Cb;function Eb(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return Lc(this.cover(e,r),e,r,n)}function Lc(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var a,s=n._root,o={data:i},c=n._x0,u=n._y0,d=n._x1,h=n._y1,p,f,m,x,y,v,g,b;if(!s)return n._root=o,n;for(;s.length;)if((y=e>=(p=(c+d)/2))?c=p:d=p,(v=r>=(f=(u+h)/2))?u=f:h=f,a=s,!(s=s[g=v<<1|y]))return a[g]=o,n;if(m=+n._x.call(null,s.data),x=+n._y.call(null,s.data),e===m&&r===x)return o.next=s,a?a[g]=o:n._root=o,n;do a=a?a[g]=new Array(4):n._root=new Array(4),(y=e>=(p=(c+d)/2))?c=p:d=p,(v=r>=(f=(u+h)/2))?u=f:h=f;while((g=v<<1|y)===(b=(x>=f)<<1|m>=p));return a[b]=s,a[g]=o,n}function Pb(n){var e,r,i=n.length,a,s,o=new Array(i),c=new Array(i),u=1/0,d=1/0,h=-1/0,p=-1/0;for(r=0;r<i;++r)isNaN(a=+this._x.call(null,e=n[r]))||isNaN(s=+this._y.call(null,e))||(o[r]=a,c[r]=s,a<u&&(u=a),a>h&&(h=a),s<d&&(d=s),s>p&&(p=s));if(u>h||d>p)return this;for(this.cover(u,d).cover(h,p),r=0;r<i;++r)Lc(this,o[r],c[r],n[r]);return this}function Ib(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,a=this._x1,s=this._y1;if(isNaN(r))a=(r=Math.floor(n))+1,s=(i=Math.floor(e))+1;else{for(var o=a-r||1,c=this._root,u,d;r>n||n>=a||i>e||e>=s;)switch(d=(e<i)<<1|n<r,u=new Array(4),u[d]=c,c=u,o*=2,d){case 0:a=r+o,s=i+o;break;case 1:r=a-o,s=i+o;break;case 2:a=r+o,i=s-o;break;case 3:r=a-o,i=s-o;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=i,this._x1=a,this._y1=s,this}function Ob(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Rb(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function _e(n,e,r,i,a){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=a}function Db(n,e,r){var i,a=this._x0,s=this._y0,o,c,u,d,h=this._x1,p=this._y1,f=[],m=this._root,x,y;for(m&&f.push(new _e(m,a,s,h,p)),r==null?r=1/0:(a=n-r,s=e-r,h=n+r,p=e+r,r*=r);x=f.pop();)if(!(!(m=x.node)||(o=x.x0)>h||(c=x.y0)>p||(u=x.x1)<a||(d=x.y1)<s))if(m.length){var v=(o+u)/2,g=(c+d)/2;f.push(new _e(m[3],v,g,u,d),new _e(m[2],o,g,v,d),new _e(m[1],v,c,u,g),new _e(m[0],o,c,v,g)),(y=(e>=g)<<1|n>=v)&&(x=f[f.length-1],f[f.length-1]=f[f.length-1-y],f[f.length-1-y]=x)}else{var b=n-+this._x.call(null,m.data),S=e-+this._y.call(null,m.data),j=b*b+S*S;if(j<r){var w=Math.sqrt(r=j);a=n-w,s=e-w,h=n+w,p=e+w,i=m.data}}return i}function Mb(n){if(isNaN(h=+this._x.call(null,n))||isNaN(p=+this._y.call(null,n)))return this;var e,r=this._root,i,a,s,o=this._x0,c=this._y0,u=this._x1,d=this._y1,h,p,f,m,x,y,v,g;if(!r)return this;if(r.length)for(;;){if((x=h>=(f=(o+u)/2))?o=f:u=f,(y=p>=(m=(c+d)/2))?c=m:d=m,e=r,!(r=r[v=y<<1|x]))return this;if(!r.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(i=e,g=v)}for(;r.data!==n;)if(a=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,a?(s?a.next=s:delete a.next,this):e?(s?e[v]=s:delete e[v],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[g]=r:this._root=r),this):(this._root=s,this)}function zb(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Lb(){return this._root}function Ub(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Fb(n){var e=[],r,i=this._root,a,s,o,c,u;for(i&&e.push(new _e(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,s=r.x0,o=r.y0,c=r.x1,u=r.y1)&&i.length){var d=(s+c)/2,h=(o+u)/2;(a=i[3])&&e.push(new _e(a,d,h,c,u)),(a=i[2])&&e.push(new _e(a,s,h,d,u)),(a=i[1])&&e.push(new _e(a,d,o,c,h)),(a=i[0])&&e.push(new _e(a,s,o,d,h))}return this}function Bb(n){var e=[],r=[],i;for(this._root&&e.push(new _e(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var a=i.node;if(a.length){var s,o=i.x0,c=i.y0,u=i.x1,d=i.y1,h=(o+u)/2,p=(c+d)/2;(s=a[0])&&e.push(new _e(s,o,c,h,p)),(s=a[1])&&e.push(new _e(s,h,c,u,p)),(s=a[2])&&e.push(new _e(s,o,p,h,d)),(s=a[3])&&e.push(new _e(s,h,p,u,d))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function qb(n){return n[0]}function Hb(n){return arguments.length?(this._x=n,this):this._x}function Wb(n){return n[1]}function Gb(n){return arguments.length?(this._y=n,this):this._y}function Uc(n,e,r){var i=new Ha(e??qb,r??Wb,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function Ha(n,e,r,i,a,s){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=a,this._y1=s,this._root=void 0}function No(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var je=Uc.prototype=Ha.prototype;je.copy=function(){var n=new Ha(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=No(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var a=0;a<4;++a)(i=e.source[a])&&(i.length?r.push({source:i,target:e.target[a]=new Array(4)}):e.target[a]=No(i));return n};je.add=Eb;je.addAll=Pb;je.cover=Ib;je.data=Ob;je.extent=Rb;je.find=Db;je.remove=Mb;je.removeAll=zb;je.root=Lb;je.size=Ub;je.visit=Fb;je.visitAfter=Bb;je.x=Hb;je.y=Gb;function Kb(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return Fc(this.cover(e,r,i),e,r,i,n)}function Fc(n,e,r,i,a){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var s,o=n._root,c={data:a},u=n._x0,d=n._y0,h=n._z0,p=n._x1,f=n._y1,m=n._z1,x,y,v,g,b,S,j,w,k,A,_;if(!o)return n._root=c,n;for(;o.length;)if((j=e>=(x=(u+p)/2))?u=x:p=x,(w=r>=(y=(d+f)/2))?d=y:f=y,(k=i>=(v=(h+m)/2))?h=v:m=v,s=o,!(o=o[A=k<<2|w<<1|j]))return s[A]=c,n;if(g=+n._x.call(null,o.data),b=+n._y.call(null,o.data),S=+n._z.call(null,o.data),e===g&&r===b&&i===S)return c.next=o,s?s[A]=c:n._root=c,n;do s=s?s[A]=new Array(8):n._root=new Array(8),(j=e>=(x=(u+p)/2))?u=x:p=x,(w=r>=(y=(d+f)/2))?d=y:f=y,(k=i>=(v=(h+m)/2))?h=v:m=v;while((A=k<<2|w<<1|j)===(_=(S>=v)<<2|(b>=y)<<1|g>=x));return s[_]=o,s[A]=c,n}function Vb(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),a=new Float64Array(e);let s=1/0,o=1/0,c=1/0,u=-1/0,d=-1/0,h=-1/0;for(let p=0,f,m,x,y;p<e;++p)isNaN(m=+this._x.call(null,f=n[p]))||isNaN(x=+this._y.call(null,f))||isNaN(y=+this._z.call(null,f))||(r[p]=m,i[p]=x,a[p]=y,m<s&&(s=m),m>u&&(u=m),x<o&&(o=x),x>d&&(d=x),y<c&&(c=y),y>h&&(h=y));if(s>u||o>d||c>h)return this;this.cover(s,o,c).cover(u,d,h);for(let p=0;p<e;++p)Fc(this,r[p],i[p],a[p],n[p]);return this}function Jb(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,a=this._y0,s=this._z0,o=this._x1,c=this._y1,u=this._z1;if(isNaN(i))o=(i=Math.floor(n))+1,c=(a=Math.floor(e))+1,u=(s=Math.floor(r))+1;else{for(var d=o-i||1,h=this._root,p,f;i>n||n>=o||a>e||e>=c||s>r||r>=u;)switch(f=(r<s)<<2|(e<a)<<1|n<i,p=new Array(8),p[f]=h,h=p,d*=2,f){case 0:o=i+d,c=a+d,u=s+d;break;case 1:i=o-d,c=a+d,u=s+d;break;case 2:o=i+d,a=c-d,u=s+d;break;case 3:i=o-d,a=c-d,u=s+d;break;case 4:o=i+d,c=a+d,s=u-d;break;case 5:i=o-d,c=a+d,s=u-d;break;case 6:o=i+d,a=c-d,s=u-d;break;case 7:i=o-d,a=c-d,s=u-d;break}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=a,this._z0=s,this._x1=o,this._y1=c,this._z1=u,this}function Yb(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Xb(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function ne(n,e,r,i,a,s,o){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=a,this.y1=s,this.z1=o}function Qb(n,e,r,i){var a,s=this._x0,o=this._y0,c=this._z0,u,d,h,p,f,m,x=this._x1,y=this._y1,v=this._z1,g=[],b=this._root,S,j;for(b&&g.push(new ne(b,s,o,c,x,y,v)),i==null?i=1/0:(s=n-i,o=e-i,c=r-i,x=n+i,y=e+i,v=r+i,i*=i);S=g.pop();)if(!(!(b=S.node)||(u=S.x0)>x||(d=S.y0)>y||(h=S.z0)>v||(p=S.x1)<s||(f=S.y1)<o||(m=S.z1)<c))if(b.length){var w=(u+p)/2,k=(d+f)/2,A=(h+m)/2;g.push(new ne(b[7],w,k,A,p,f,m),new ne(b[6],u,k,A,w,f,m),new ne(b[5],w,d,A,p,k,m),new ne(b[4],u,d,A,w,k,m),new ne(b[3],w,k,h,p,f,A),new ne(b[2],u,k,h,w,f,A),new ne(b[1],w,d,h,p,k,A),new ne(b[0],u,d,h,w,k,A)),(j=(r>=A)<<2|(e>=k)<<1|n>=w)&&(S=g[g.length-1],g[g.length-1]=g[g.length-1-j],g[g.length-1-j]=S)}else{var _=n-+this._x.call(null,b.data),P=e-+this._y.call(null,b.data),I=r-+this._z.call(null,b.data),T=_*_+P*P+I*I;if(T<i){var E=Math.sqrt(i=T);s=n-E,o=e-E,c=r-E,x=n+E,y=e+E,v=r+E,a=b.data}}return a}const Zb=(n,e,r,i,a,s)=>Math.sqrt((n-i)**2+(e-a)**2+(r-s)**2);function ew(n,e,r,i){const a=[],s=n-i,o=e-i,c=r-i,u=n+i,d=e+i,h=r+i;return this.visit((p,f,m,x,y,v,g)=>{if(!p.length)do{const b=p.data;Zb(n,e,r,this._x(b),this._y(b),this._z(b))<=i&&a.push(b)}while(p=p.next);return f>u||m>d||x>h||y<s||v<o||g<c}),a}function tw(n){if(isNaN(f=+this._x.call(null,n))||isNaN(m=+this._y.call(null,n))||isNaN(x=+this._z.call(null,n)))return this;var e,r=this._root,i,a,s,o=this._x0,c=this._y0,u=this._z0,d=this._x1,h=this._y1,p=this._z1,f,m,x,y,v,g,b,S,j,w,k;if(!r)return this;if(r.length)for(;;){if((b=f>=(y=(o+d)/2))?o=y:d=y,(S=m>=(v=(c+h)/2))?c=v:h=v,(j=x>=(g=(u+p)/2))?u=g:p=g,e=r,!(r=r[w=j<<2|S<<1|b]))return this;if(!r.length)break;(e[w+1&7]||e[w+2&7]||e[w+3&7]||e[w+4&7]||e[w+5&7]||e[w+6&7]||e[w+7&7])&&(i=e,k=w)}for(;r.data!==n;)if(a=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,a?(s?a.next=s:delete a.next,this):e?(s?e[w]=s:delete e[w],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[k]=r:this._root=r),this):(this._root=s,this)}function nw(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function rw(){return this._root}function iw(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function aw(n){var e=[],r,i=this._root,a,s,o,c,u,d,h;for(i&&e.push(new ne(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,s=r.x0,o=r.y0,c=r.z0,u=r.x1,d=r.y1,h=r.z1)&&i.length){var p=(s+u)/2,f=(o+d)/2,m=(c+h)/2;(a=i[7])&&e.push(new ne(a,p,f,m,u,d,h)),(a=i[6])&&e.push(new ne(a,s,f,m,p,d,h)),(a=i[5])&&e.push(new ne(a,p,o,m,u,f,h)),(a=i[4])&&e.push(new ne(a,s,o,m,p,f,h)),(a=i[3])&&e.push(new ne(a,p,f,c,u,d,m)),(a=i[2])&&e.push(new ne(a,s,f,c,p,d,m)),(a=i[1])&&e.push(new ne(a,p,o,c,u,f,m)),(a=i[0])&&e.push(new ne(a,s,o,c,p,f,m))}return this}function sw(n){var e=[],r=[],i;for(this._root&&e.push(new ne(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var a=i.node;if(a.length){var s,o=i.x0,c=i.y0,u=i.z0,d=i.x1,h=i.y1,p=i.z1,f=(o+d)/2,m=(c+h)/2,x=(u+p)/2;(s=a[0])&&e.push(new ne(s,o,c,u,f,m,x)),(s=a[1])&&e.push(new ne(s,f,c,u,d,m,x)),(s=a[2])&&e.push(new ne(s,o,m,u,f,h,x)),(s=a[3])&&e.push(new ne(s,f,m,u,d,h,x)),(s=a[4])&&e.push(new ne(s,o,c,x,f,m,p)),(s=a[5])&&e.push(new ne(s,f,c,x,d,m,p)),(s=a[6])&&e.push(new ne(s,o,m,x,f,h,p)),(s=a[7])&&e.push(new ne(s,f,m,x,d,h,p))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function ow(n){return n[0]}function lw(n){return arguments.length?(this._x=n,this):this._x}function cw(n){return n[1]}function uw(n){return arguments.length?(this._y=n,this):this._y}function dw(n){return n[2]}function hw(n){return arguments.length?(this._z=n,this):this._z}function Bc(n,e,r,i){var a=new Wa(e??ow,r??cw,i??dw,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?a:a.addAll(n)}function Wa(n,e,r,i,a,s,o,c,u){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=a,this._z0=s,this._x1=o,this._y1=c,this._z1=u,this._root=void 0}function Ao(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var ve=Bc.prototype=Wa.prototype;ve.copy=function(){var n=new Wa(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=Ao(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var a=0;a<8;++a)(i=e.source[a])&&(i.length?r.push({source:i,target:e.target[a]=new Array(8)}):e.target[a]=Ao(i));return n};ve.add=Kb;ve.addAll=Vb;ve.cover=Jb;ve.data=Yb;ve.extent=Xb;ve.find=Qb;ve.findAllWithinRadius=ew;ve.remove=tw;ve.removeAll=nw;ve.root=rw;ve.size=iw;ve.visit=aw;ve.visitAfter=sw;ve.x=lw;ve.y=uw;ve.z=hw;function at(n){return function(){return n}}function rt(n){return(n()-.5)*1e-6}function pw(n){return n.index}function $o(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function fw(n){var e=pw,r=f,i,a=at(30),s,o,c,u,d,h,p=1;n==null&&(n=[]);function f(g){return 1/Math.min(u[g.source.index],u[g.target.index])}function m(g){for(var b=0,S=n.length;b<p;++b)for(var j=0,w,k,A,_=0,P=0,I=0,T,E;j<S;++j)w=n[j],k=w.source,A=w.target,_=A.x+A.vx-k.x-k.vx||rt(h),c>1&&(P=A.y+A.vy-k.y-k.vy||rt(h)),c>2&&(I=A.z+A.vz-k.z-k.vz||rt(h)),T=Math.sqrt(_*_+P*P+I*I),T=(T-s[j])/T*g*i[j],_*=T,P*=T,I*=T,A.vx-=_*(E=d[j]),c>1&&(A.vy-=P*E),c>2&&(A.vz-=I*E),k.vx+=_*(E=1-E),c>1&&(k.vy+=P*E),c>2&&(k.vz+=I*E)}function x(){if(o){var g,b=o.length,S=n.length,j=new Map(o.map((k,A)=>[e(k,A,o),k])),w;for(g=0,u=new Array(b);g<S;++g)w=n[g],w.index=g,typeof w.source!="object"&&(w.source=$o(j,w.source)),typeof w.target!="object"&&(w.target=$o(j,w.target)),u[w.source.index]=(u[w.source.index]||0)+1,u[w.target.index]=(u[w.target.index]||0)+1;for(g=0,d=new Array(S);g<S;++g)w=n[g],d[g]=u[w.source.index]/(u[w.source.index]+u[w.target.index]);i=new Array(S),y(),s=new Array(S),v()}}function y(){if(o)for(var g=0,b=n.length;g<b;++g)i[g]=+r(n[g],g,n)}function v(){if(o)for(var g=0,b=n.length;g<b;++g)s[g]=+a(n[g],g,n)}return m.initialize=function(g,...b){o=g,h=b.find(S=>typeof S=="function")||Math.random,c=b.find(S=>[1,2,3].includes(S))||2,x()},m.links=function(g){return arguments.length?(n=g,x(),m):n},m.id=function(g){return arguments.length?(e=g,m):e},m.iterations=function(g){return arguments.length?(p=+g,m):p},m.strength=function(g){return arguments.length?(r=typeof g=="function"?g:at(+g),y(),m):r},m.distance=function(g){return arguments.length?(a=typeof g=="function"?g:at(+g),v(),m):a},m}const mw=1664525,gw=1013904223,To=4294967296;function xw(){let n=1;return()=>(n=(mw*n+gw)%To)/To}var Co=3;function Si(n){return n.x}function Eo(n){return n.y}function vw(n){return n.z}var yw=10,bw=Math.PI*(3-Math.sqrt(5)),ww=Math.PI*20/(9+Math.sqrt(221));function _w(n,e){e=e||2;var r=Math.min(Co,Math.max(1,Math.round(e))),i,a=1,s=.001,o=1-Math.pow(s,1/300),c=0,u=.6,d=new Map,h=Oa(m),p=Vn("tick","end"),f=xw();n==null&&(n=[]);function m(){x(),p.call("tick",i),a<s&&(h.stop(),p.call("end",i))}function x(g){var b,S=n.length,j;g===void 0&&(g=1);for(var w=0;w<g;++w)for(a+=(c-a)*o,d.forEach(function(k){k(a)}),b=0;b<S;++b)j=n[b],j.fx==null?j.x+=j.vx*=u:(j.x=j.fx,j.vx=0),r>1&&(j.fy==null?j.y+=j.vy*=u:(j.y=j.fy,j.vy=0)),r>2&&(j.fz==null?j.z+=j.vz*=u:(j.z=j.fz,j.vz=0));return i}function y(){for(var g=0,b=n.length,S;g<b;++g){if(S=n[g],S.index=g,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),S.fz!=null&&(S.z=S.fz),isNaN(S.x)||r>1&&isNaN(S.y)||r>2&&isNaN(S.z)){var j=yw*(r>2?Math.cbrt(.5+g):r>1?Math.sqrt(.5+g):g),w=g*bw,k=g*ww;r===1?S.x=j:r===2?(S.x=j*Math.cos(w),S.y=j*Math.sin(w)):(S.x=j*Math.sin(w)*Math.cos(k),S.y=j*Math.cos(w),S.z=j*Math.sin(w)*Math.sin(k))}(isNaN(S.vx)||r>1&&isNaN(S.vy)||r>2&&isNaN(S.vz))&&(S.vx=0,r>1&&(S.vy=0),r>2&&(S.vz=0))}}function v(g){return g.initialize&&g.initialize(n,f,r),g}return y(),i={tick:x,restart:function(){return h.restart(m),i},stop:function(){return h.stop(),i},numDimensions:function(g){return arguments.length?(r=Math.min(Co,Math.max(1,Math.round(g))),d.forEach(v),i):r},nodes:function(g){return arguments.length?(n=g,y(),d.forEach(v),i):n},alpha:function(g){return arguments.length?(a=+g,i):a},alphaMin:function(g){return arguments.length?(s=+g,i):s},alphaDecay:function(g){return arguments.length?(o=+g,i):+o},alphaTarget:function(g){return arguments.length?(c=+g,i):c},velocityDecay:function(g){return arguments.length?(u=1-g,i):1-u},randomSource:function(g){return arguments.length?(f=g,d.forEach(v),i):f},force:function(g,b){return arguments.length>1?(b==null?d.delete(g):d.set(g,v(b)),i):d.get(g)},find:function(){var g=Array.prototype.slice.call(arguments),b=g.shift()||0,S=(r>1?g.shift():null)||0,j=(r>2?g.shift():null)||0,w=g.shift()||1/0,k=0,A=n.length,_,P,I,T,E,M;for(w*=w,k=0;k<A;++k)E=n[k],_=b-E.x,P=S-(E.y||0),I=j-(E.z||0),T=_*_+P*P+I*I,T<w&&(M=E,w=T);return M},on:function(g,b){return arguments.length>1?(p.on(g,b),i):p.on(g)}}}function jw(){var n,e,r,i,a,s=at(-30),o,c=1,u=1/0,d=.81;function h(x){var y,v=n.length,g=(e===1?zc(n,Si):e===2?Uc(n,Si,Eo):e===3?Bc(n,Si,Eo,vw):null).visitAfter(f);for(a=x,y=0;y<v;++y)r=n[y],g.visit(m)}function p(){if(n){var x,y=n.length,v;for(o=new Array(y),x=0;x<y;++x)v=n[x],o[v.index]=+s(v,x,n)}}function f(x){var y=0,v,g,b=0,S,j,w,k,A=x.length;if(A){for(S=j=w=k=0;k<A;++k)(v=x[k])&&(g=Math.abs(v.value))&&(y+=v.value,b+=g,S+=g*(v.x||0),j+=g*(v.y||0),w+=g*(v.z||0));y*=Math.sqrt(4/A),x.x=S/b,e>1&&(x.y=j/b),e>2&&(x.z=w/b)}else{v=x,v.x=v.data.x,e>1&&(v.y=v.data.y),e>2&&(v.z=v.data.z);do y+=o[v.data.index];while(v=v.next)}x.value=y}function m(x,y,v,g,b){if(!x.value)return!0;var S=[v,g,b][e-1],j=x.x-r.x,w=e>1?x.y-r.y:0,k=e>2?x.z-r.z:0,A=S-y,_=j*j+w*w+k*k;if(A*A/d<_)return _<u&&(j===0&&(j=rt(i),_+=j*j),e>1&&w===0&&(w=rt(i),_+=w*w),e>2&&k===0&&(k=rt(i),_+=k*k),_<c&&(_=Math.sqrt(c*_)),r.vx+=j*x.value*a/_,e>1&&(r.vy+=w*x.value*a/_),e>2&&(r.vz+=k*x.value*a/_)),!0;if(x.length||_>=u)return;(x.data!==r||x.next)&&(j===0&&(j=rt(i),_+=j*j),e>1&&w===0&&(w=rt(i),_+=w*w),e>2&&k===0&&(k=rt(i),_+=k*k),_<c&&(_=Math.sqrt(c*_)));do x.data!==r&&(A=o[x.data.index]*a/_,r.vx+=j*A,e>1&&(r.vy+=w*A),e>2&&(r.vz+=k*A));while(x=x.next)}return h.initialize=function(x,...y){n=x,i=y.find(v=>typeof v=="function")||Math.random,e=y.find(v=>[1,2,3].includes(v))||2,p()},h.strength=function(x){return arguments.length?(s=typeof x=="function"?x:at(+x),p(),h):s},h.distanceMin=function(x){return arguments.length?(c=x*x,h):Math.sqrt(c)},h.distanceMax=function(x){return arguments.length?(u=x*x,h):Math.sqrt(u)},h.theta=function(x){return arguments.length?(d=x*x,h):Math.sqrt(d)},h}function kw(n,e,r,i){var a,s,o=at(.1),c,u;typeof n!="function"&&(n=at(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function d(p){for(var f=0,m=a.length;f<m;++f){var x=a[f],y=x.x-e||1e-6,v=(x.y||0)-r||1e-6,g=(x.z||0)-i||1e-6,b=Math.sqrt(y*y+v*v+g*g),S=(u[f]-b)*c[f]*p/b;x.vx+=y*S,s>1&&(x.vy+=v*S),s>2&&(x.vz+=g*S)}}function h(){if(a){var p,f=a.length;for(c=new Array(f),u=new Array(f),p=0;p<f;++p)u[p]=+n(a[p],p,a),c[p]=isNaN(u[p])?0:+o(a[p],p,a)}}return d.initialize=function(p,...f){a=p,s=f.find(m=>[1,2,3].includes(m))||2,h()},d.strength=function(p){return arguments.length?(o=typeof p=="function"?p:at(+p),h(),d):o},d.radius=function(p){return arguments.length?(n=typeof p=="function"?p:at(+p),h(),d):n},d.x=function(p){return arguments.length?(e=+p,d):e},d.y=function(p){return arguments.length?(r=+p,d):r},d.z=function(p){return arguments.length?(i=+p,d):i},d}const{abs:dn,cos:et,sin:Ft,acos:Sw,atan2:hn,sqrt:ut,pow:Ie}=Math;function pn(n){return n<0?-Ie(-n,1/3):Ie(n,1/3)}const qc=Math.PI,lr=2*qc,dt=qc/2,Nw=1e-6,Ni=Number.MAX_SAFE_INTEGER||9007199254740991,Ai=Number.MIN_SAFE_INTEGER||-9007199254740991,Aw={x:0,y:0,z:0},L={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),ut(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const a=1-n;let s=e;if(i===0)return e[0].t=n,e[0];if(i===1){const c={x:a*s[0].x+n*s[1].x,y:a*s[0].y+n*s[1].y,t:n};return r&&(c.z=a*s[0].z+n*s[1].z),c}if(i<4){let c=a*a,u=n*n,d,h,p,f=0;i===2?(s=[s[0],s[1],s[2],Aw],d=c,h=a*n*2,p=u):i===3&&(d=c*a,h=c*n*3,p=a*u*3,f=n*u);const m={x:d*s[0].x+h*s[1].x+p*s[2].x+f*s[3].x,y:d*s[0].y+h*s[1].y+p*s[2].y+f*s[3].y,t:n};return r&&(m.z=d*s[0].z+h*s[1].z+p*s[2].z+f*s[3].z),m}const o=JSON.parse(JSON.stringify(e));for(;o.length>1;){for(let c=0;c<o.length-1;c++)o[c]={x:o[c].x+(o[c+1].x-o[c].x)*n,y:o[c].y+(o[c+1].y-o[c].y)*n},typeof o[c].z<"u"&&(o[c].z=o[c].z+(o[c+1].z-o[c].z)*n);o.splice(o.length-1,1)}return o[0].t=n,o[0]},computeWithRatios:function(n,e,r,i){const a=1-n,s=r,o=e;let c=s[0],u=s[1],d=s[2],h=s[3],p;if(c*=a,u*=n,o.length===2)return p=c+u,{x:(c*o[0].x+u*o[1].x)/p,y:(c*o[0].y+u*o[1].y)/p,z:i?(c*o[0].z+u*o[1].z)/p:!1,t:n};if(c*=a,u*=2*a,d*=n*n,o.length===3)return p=c+u+d,{x:(c*o[0].x+u*o[1].x+d*o[2].x)/p,y:(c*o[0].y+u*o[1].y+d*o[2].y)/p,z:i?(c*o[0].z+u*o[1].z+d*o[2].z)/p:!1,t:n};if(c*=a,u*=1.5*a,d*=3*a,h*=n*n*n,o.length===4)return p=c+u+d+h,{x:(c*o[0].x+u*o[1].x+d*o[2].x+h*o[3].x)/p,y:(c*o[0].y+u*o[1].y+d*o[2].y+h*o[3].y)/p,z:i?(c*o[0].z+u*o[1].z+d*o[2].z+h*o[3].z)/p:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,a=i.length,s=a-1;a>1;a--,s--){const o=[];for(let c=0,u;c<s;c++)u={x:s*(i[c+1].x-i[c].x),y:s*(i[c+1].y-i[c].y)},e&&(u.z=s*(i[c+1].z-i[c].z)),o.push(u);r.push(o),i=o}return r},between:function(n,e,r){return e<=n&&n<=r||L.approximately(n,e)||L.approximately(n,r)},approximately:function(n,e,r){return dn(n-e)<=(r||Nw)},length:function(n){const r=L.Tvalues.length;let i=0;for(let a=0,s;a<r;a++)s=.5*L.Tvalues[a]+.5,i+=L.Cvalues[a]*L.arcfn(s,n);return .5*i},map:function(n,e,r,i,a){const s=r-e,o=a-i,c=n-e,u=c/s;return i+o*u},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(L.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,a=e.y-n.y,s=r.x-n.x,o=r.y-n.y,c=i*o-a*s,u=i*s+a*o;return hn(c,u)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return ut(r*r+i*i)},closest:function(n,e){let r=Ie(2,63),i,a;return n.forEach(function(s,o){a=L.dist(e,s),a<r&&(r=a,i=o)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Ie(n,e)+Ie(1-n,e),i=r-1;return dn(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Ie(1-n,e),i=Ie(n,e)+r;return r/i},lli8:function(n,e,r,i,a,s,o,c){const u=(n*i-e*r)*(a-o)-(n-r)*(a*c-s*o),d=(n*i-e*r)*(s-c)-(e-i)*(a*c-s*o),h=(n-r)*(s-c)-(e-i)*(a-o);return h==0?!1:{x:u/h,y:d/h}},lli4:function(n,e,r,i){const a=n.x,s=n.y,o=e.x,c=e.y,u=r.x,d=r.y,h=i.x,p=i.y;return L.lli8(a,s,o,c,u,d,h,p)},lli:function(n,e){return L.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new ae(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=Ni,r=Ni,i=Ai,a=Ai;return n.forEach(function(s){const o=s.bbox();e>o.x.min&&(e=o.x.min),r>o.y.min&&(r=o.y.min),i<o.x.max&&(i=o.x.max),a<o.y.max&&(a=o.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+a)/2,max:a,size:a-r}}},shapeintersections:function(n,e,r,i,a){if(!L.bboxoverlap(e,i))return[];const s=[],o=[n.startcap,n.forward,n.back,n.endcap],c=[r.startcap,r.forward,r.back,r.endcap];return o.forEach(function(u){u.virtual||c.forEach(function(d){if(d.virtual)return;const h=u.intersects(d,a);h.length>0&&(h.c1=u,h.c2=d,h.s1=n,h.s2=r,s.push(h))})}),s},makeshape:function(n,e,r){const i=e.points.length,a=n.points.length,s=L.makeline(e.points[i-1],n.points[0]),o=L.makeline(n.points[a-1],e.points[0]),c={startcap:s,forward:n,back:e,endcap:o,bbox:L.findbbox([s,n,e,o])};return c.intersections=function(u){return L.shapeintersections(c,c.bbox,u,u.bbox,r)},c},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=Ni,a=Ai,s,o;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let c=0,u=r.length;c<u;c++)s=r[c],o=n.get(s),o[e]<i&&(i=o[e]),o[e]>a&&(a=o[e]);return{min:i,mid:(i+a)/2,max:a,size:a-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,a=-hn(e.p2.y-i,e.p2.x-r),s=function(o){return{x:(o.x-r)*et(a)-(o.y-i)*Ft(a),y:(o.x-r)*Ft(a)+(o.y-i)*et(a)}};return n.map(s)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=L.align(n,e),a=function(A){return 0<=A&&A<=1};if(r===2){const A=i[0].y,_=i[1].y,P=i[2].y,I=A-2*_+P;if(I!==0){const T=-ut(_*_-A*P),E=-A+_,M=-(T+E)/I,N=-(-T+E)/I;return[M,N].filter(a)}else if(_!==P&&I===0)return[(2*_-P)/(2*_-2*P)].filter(a);return[]}const s=i[0].y,o=i[1].y,c=i[2].y,u=i[3].y;let d=-s+3*o-3*c+u,h=3*s-6*o+3*c,p=-3*s+3*o,f=s;if(L.approximately(d,0)){if(L.approximately(h,0))return L.approximately(p,0)?[]:[-f/p].filter(a);const A=ut(p*p-4*h*f),_=2*h;return[(A-p)/_,(-p-A)/_].filter(a)}h/=d,p/=d,f/=d;const m=(3*p-h*h)/3,x=m/3,y=(2*h*h*h-9*h*p+27*f)/27,v=y/2,g=v*v+x*x*x;let b,S,j,w,k;if(g<0){const A=-m/3,_=A*A*A,P=ut(_),I=-y/(2*P),T=I<-1?-1:I>1?1:I,E=Sw(T),M=pn(P),N=2*M;return j=N*et(E/3)-h/3,w=N*et((E+lr)/3)-h/3,k=N*et((E+2*lr)/3)-h/3,[j,w,k].filter(a)}else{if(g===0)return b=v<0?pn(-v):-pn(v),j=2*b-h/3,w=-b-h/3,[j,w].filter(a);{const A=ut(g);return b=pn(-v+A),S=pn(v+A),[b-S-h/3].filter(a)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],a=e-2*r+i;if(a!==0){const s=-ut(r*r-e*i),o=-e+r,c=-(s+o)/a,u=-(-s+o)/a;return[c,u]}else if(r!==i&&a===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,a){let s,o,c,u,d=0,h=0;const p=L.compute(n,e),f=L.compute(n,r),m=p.x*p.x+p.y*p.y;if(i?(s=ut(Ie(p.y*f.z-f.y*p.z,2)+Ie(p.z*f.x-f.z*p.x,2)+Ie(p.x*f.y-f.x*p.y,2)),o=Ie(m+p.z*p.z,3/2)):(s=p.x*f.y-p.y*f.x,o=Ie(m,3/2)),s===0||o===0)return{k:0,r:0};if(d=s/o,h=o/s,!a){const x=L.curvature(n-.001,e,r,i,!0).k,y=L.curvature(n+.001,e,r,i,!0).k;u=(y-d+(d-x))/2,c=(dn(y-d)+dn(d-x))/2}return{k:d,r:h,dk:u,adk:c}},inflections:function(n){if(n.length<4)return[];const e=L.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,a=e[1].x*e[2].y,s=e[3].x*e[2].y,o=18*(-3*r+2*i+3*a-s),c=18*(3*r-i-3*a),u=18*(a-r);if(L.approximately(o,0)){if(!L.approximately(c,0)){let f=-u/c;if(0<=f&&f<=1)return[f]}return[]}const d=2*o;if(L.approximately(d,0))return[];const h=c*c-4*o*u;if(h<0)return[];const p=Math.sqrt(h);return[(p-c)/d,-(c+p)/d].filter(function(f){return 0<=f&&f<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let a=0,s,o,c,u;a<i;a++)if(s=r[a],o=n[s].mid,c=e[s].mid,u=(n[s].size+e[s].size)/2,dn(o-c)>=u)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),a=e.bbox(),s=1e5,o=r||.5;if(i.x.size+i.y.size<o&&a.x.size+a.y.size<o)return[(s*(n._t1+n._t2)/2|0)/s+"/"+(s*(e._t1+e._t2)/2|0)/s];let c=n.split(.5),u=e.split(.5),d=[{left:c.left,right:u.left},{left:c.left,right:u.right},{left:c.right,right:u.right},{left:c.right,right:u.left}];d=d.filter(function(p){return L.bboxoverlap(p.left.bbox(),p.right.bbox())});let h=[];return d.length===0||(d.forEach(function(p){h=h.concat(L.pairiteration(p.left,p.right,o))}),h=h.filter(function(p,f){return h.indexOf(p)===f})),h},getccenter:function(n,e,r){const i=e.x-n.x,a=e.y-n.y,s=r.x-e.x,o=r.y-e.y,c=i*et(dt)-a*Ft(dt),u=i*Ft(dt)+a*et(dt),d=s*et(dt)-o*Ft(dt),h=s*Ft(dt)+o*et(dt),p=(n.x+e.x)/2,f=(n.y+e.y)/2,m=(e.x+r.x)/2,x=(e.y+r.y)/2,y=p+c,v=f+u,g=m+d,b=x+h,S=L.lli8(p,f,y,v,m,x,g,b),j=L.dist(S,n);let w=hn(n.y-S.y,n.x-S.x),k=hn(e.y-S.y,e.x-S.x),A=hn(r.y-S.y,r.x-S.x),_;return w<A?((w>k||k>A)&&(w+=lr),w>A&&(_=A,A=w,w=_)):A<k&&k<w?(_=A,A=w,w=_):A+=lr,S.s=w,S.e=A,S.r=j,S},numberSort:function(n,e){return n-e}};class $n{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return L.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)L.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new $n(r)}}const{abs:fn,min:Po,max:Io,cos:$w,sin:Tw,acos:Cw,sqrt:mn}=Math,Ew=Math.PI;class ae{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const m=[];r.forEach(function(x){["x","y","z"].forEach(function(y){typeof x[y]<"u"&&m.push(x[y])})}),r=m}let a=!1;const s=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");a=!0}}else if(s!==6&&s!==8&&s!==9&&s!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!a&&(s===9||s===12)||e&&e[0]&&typeof e[0].z<"u",c=this.points=[];for(let m=0,x=o?3:2;m<s;m+=x){var u={x:r[m],y:r[m+1]};o&&(u.z=r[m+2]),c.push(u)}const d=this.order=c.length-1,h=this.dims=["x","y"];o&&h.push("z"),this.dimlen=h.length;const p=L.align(c,{p1:c[0],p2:c[d]}),f=L.dist(c[0],c[d]);this._linear=p.reduce((m,x)=>m+fn(x.y),0)<f/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,a){if(typeof a>"u"&&(a=.5),a===0)return new ae(r,r,i);if(a===1)return new ae(e,r,r);const s=ae.getABC(2,e,r,i,a);return new ae(e,s.A,i)}static cubicFromPoints(e,r,i,a,s){typeof a>"u"&&(a=.5);const o=ae.getABC(3,e,r,i,a);typeof s>"u"&&(s=L.dist(r,o.C));const c=s*(1-a)/a,u=L.dist(e,i),d=(i.x-e.x)/u,h=(i.y-e.y)/u,p=s*d,f=s*h,m=c*d,x=c*h,y={x:r.x-p,y:r.y-f},v={x:r.x+m,y:r.y+x},g=o.A,b={x:g.x+(y.x-g.x)/(1-a),y:g.y+(y.y-g.y)/(1-a)},S={x:g.x+(v.x-g.x)/a,y:g.y+(v.y-g.y)/a},j={x:e.x+(b.x-e.x)/a,y:e.y+(b.y-e.y)/a},w={x:i.x+(S.x-i.x)/(1-a),y:i.y+(S.y-i.y)/(1-a)};return new ae(e,j,w,i)}static getUtils(){return L}getUtils(){return ae.getUtils()}static get PolyBezier(){return $n}valueOf(){return this.toString()}toString(){return L.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,a=["M",r,i,this.order===2?"Q":"C"];for(let s=1,o=e.length;s<o;s++)a.push(e[s].x),a.push(e[s].y);return a.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=L.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=L.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return L.length(this.derivative.bind(this))}static getABC(e=2,r,i,a,s=.5){const o=L.projectionratio(s,e),c=1-o,u={x:o*r.x+c*a.x,y:o*r.y+c*a.y},d=L.abcratio(s,e);return{A:{x:i.x+(i.x-u.x)/d,y:i.y+(i.y-u.y)/d},B:i,C:u,S:r,E:a}}getABC(e,r){r=r||this.get(e);let i=this.points[0],a=this.points[this.order];return ae.getABC(this.order,i,r,a,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,a;r<e;r++)a=r/(e-1),i=this.compute(a),i.t=a,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),a=[];for(let s=0,o,c=0;s<i.length;s++)o=i[s],L.dist(o,e)<r&&(a.push(o),c+=s/i.length);return a.length?t/=a.length:!1}project(e){const r=this.getLUT(),i=r.length-1,a=L.closest(r,e),s=a.mpos,o=(s-1)/i,c=(s+1)/i,u=.1/i;let d=a.mdist,h=o,p=h,f;d+=1;for(let m;h<c+u;h+=u)f=this.compute(h),m=L.dist(e,f),m<d&&(d=m,p=h);return p=p<0?0:p>1?1:p,f=this.compute(p),f.t=p,f.d=d,f}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?L.computeWithRatios(e,this.points,this.ratios,this._3d):L.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let a=1,s,o;a<i;a++)s=e[a],o=e[a-1],r[a]={x:(i-a)/i*s.x+a/i*o.x,y:(i-a)/i*s.y+a/i*o.y};return r[i]=e[i-1],new ae(r)}derivative(e){return L.compute(e,this.dpoints[0],this._3d)}dderivative(e){return L.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new ae(L.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return L.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return L.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=mn(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),a=mn(r.x*r.x+r.y*r.y+r.z*r.z),s=mn(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=a,r.y/=a,r.z/=a,i.x/=s,i.y/=s,i.z/=s;const o={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},c=mn(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=c,o.y/=c,o.z/=c;const u=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:e,x:u[0]*r.x+u[1]*r.y+u[2]*r.z,y:u[3]*r.x+u[4]*r.y+u[5]*r.z,z:u[6]*r.x+u[7]*r.y+u[8]*r.z}}hull(e){let r=this.points,i=[],a=[],s=0;for(a[s++]=r[0],a[s++]=r[1],a[s++]=r[2],this.order===3&&(a[s++]=r[3]);r.length>1;){i=[];for(let o=0,c,u=r.length-1;o<u;o++)c=L.lerp(e,r[o],r[o+1]),a[s++]=c,i.push(c);r=i}return a}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),a={left:this.order===2?new ae([i[0],i[3],i[5]]):new ae([i[0],i[4],i[7],i[9]]),right:this.order===2?new ae([i[5],i[4],i[2]]):new ae([i[9],i[8],i[6],i[3]]),span:i};return a.left._t1=L.map(0,0,1,this._t1,this._t2),a.left._t2=L.map(e,0,1,this._t1,this._t2),a.right._t1=L.map(e,0,1,this._t1,this._t2),a.right._t2=L.map(1,0,1,this._t1,this._t2),r?(r=L.map(r,e,1,0,1),a.right.split(r).left):a}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let a=function(o){return o[i]},s=this.dpoints[0].map(a);e[i]=L.droots(s),this.order===3&&(s=this.dpoints[1].map(a),e[i]=e[i].concat(L.droots(s))),e[i]=e[i].filter(function(o){return o>=0&&o<=1}),r=r.concat(e[i].sort(L.numberSort))}).bind(this)),e.values=r.sort(L.numberSort).filter(function(i,a){return r.indexOf(i)===a}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=L.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return L.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),a=this.normal(e),s={c:i,n:a,x:i.x+a.x*r,y:i.y+a.y*r};return this._3d&&(s.z=i.z+a.z*r),s}if(this._linear){const i=this.normal(0),a=this.points.map(function(s){const o={x:s.x+e*i.x,y:s.y+e*i.y};return s.z&&i.z&&(o.z=s.z+e*i.z),o});return[new ae(a)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const a=L.angle(this.points[0],this.points[3],this.points[1]),s=L.angle(this.points[0],this.points[3],this.points[2]);if(a>0&&s<0||a<0&&s>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),fn(Cw(i))<Ew/3}reduce(){let e,r=0,i=0,a=.01,s,o=[],c=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),r=u[0],e=1;e<u.length;e++)i=u[e],s=this.split(r,i),s._t1=r,s._t2=i,o.push(s),r=i;return o.forEach(function(d){for(r=0,i=0;i<=1;)for(i=r+a;i<=1+a;i+=a)if(s=d.split(r,i),!s.simple()){if(i-=a,fn(r-i)<a)return[];s=d.split(r,i),s._t1=L.map(r,0,1,d._t1,d._t2),s._t2=L.map(i,0,1,d._t1,d._t2),c.push(s),r=i;break}r<1&&(s=d.split(r,1),s._t1=L.map(r,0,1,d._t1,d._t2),s._t2=d._t2,c.push(s))}),c}translate(e,r,i){i=typeof i=="number"?i:r;const a=this.order;let s=this.points.map((o,c)=>(1-c/a)*r+c/a*i);return new ae(this.points.map((o,c)=>({x:o.x+e.x*s[c],y:o.y+e.y*s[c]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const a=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const o=i?i(0):e,c=i?i(1):e,u=[this.offset(0,10),this.offset(1,10)],d=[],h=L.lli4(u[0],u[0].c,u[1],u[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(p){const f=d[p*r]=L.copy(s[p*r]);f.x+=(p?c:o)*u[p].n.x,f.y+=(p?c:o)*u[p].n.y}),i?([0,1].forEach(function(p){if(!(r===2&&p)){var f=s[p+1],m={x:f.x-h.x,y:f.y-h.y},x=i?i((p+1)/r):e;i&&!a&&(x=-x);var y=mn(m.x*m.x+m.y*m.y);m.x/=y,m.y/=y,d[p+1]={x:f.x+x*m.x,y:f.y+x*m.y}}}),new ae(d)):([0,1].forEach(p=>{if(r===2&&p)return;const f=d[p*r],m=this.derivative(p),x={x:f.x+m.x,y:f.y+m.y};d[p+1]=L.lli4(f,x,h,s[p+1])}),new ae(d))}outline(e,r,i,a){if(r=r===void 0?e:r,this._linear){const w=this.normal(0),k=this.points[0],A=this.points[this.points.length-1];let _,P,I;i===void 0&&(i=e,a=r),_={x:k.x+w.x*e,y:k.y+w.y*e},I={x:A.x+w.x*i,y:A.y+w.y*i},P={x:(_.x+I.x)/2,y:(_.y+I.y)/2};const T=[_,P,I];_={x:k.x-w.x*r,y:k.y-w.y*r},I={x:A.x-w.x*a,y:A.y-w.y*a},P={x:(_.x+I.x)/2,y:(_.y+I.y)/2};const E=[I,P,_],M=L.makeline(E[2],T[0]),N=L.makeline(T[2],E[0]),R=[M,new ae(T),N,new ae(E)];return new $n(R)}const s=this.reduce(),o=s.length,c=[];let u=[],d,h=0,p=this.length();const f=typeof i<"u"&&typeof a<"u";function m(w,k,A,_,P){return function(I){const T=_/A,E=(_+P)/A,M=k-w;return L.map(I,0,1,w+T*M,w+E*M)}}s.forEach(function(w){const k=w.length();f?(c.push(w.scale(m(e,i,p,h,k))),u.push(w.scale(m(-r,-a,p,h,k)))):(c.push(w.scale(e)),u.push(w.scale(-r))),h+=k}),u=u.map(function(w){return d=w.points,d[3]?w.points=[d[3],d[2],d[1],d[0]]:w.points=[d[2],d[1],d[0]],w}).reverse();const x=c[0].points[0],y=c[o-1].points[c[o-1].points.length-1],v=u[o-1].points[u[o-1].points.length-1],g=u[0].points[0],b=L.makeline(v,x),S=L.makeline(y,g),j=[b].concat(c).concat([S]).concat(u);return new $n(j)}outlineshapes(e,r,i){r=r||e;const a=this.outline(e,r).curves,s=[];for(let o=1,c=a.length;o<c/2;o++){const u=L.makeshape(a[o],a[c-o],i);u.startcap.virtual=o>1,u.endcap.virtual=o<c/2-1,s.push(u)}return s}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof ae&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=Po(e.p1.x,e.p2.x),i=Po(e.p1.y,e.p2.y),a=Io(e.p1.x,e.p2.x),s=Io(e.p1.y,e.p2.y);return L.roots(this.points,e).filter(o=>{var c=this.get(o);return L.between(c.x,r,a)&&L.between(c.y,i,s)})}selfintersects(e){const r=this.reduce(),i=r.length-2,a=[];for(let s=0,o,c,u;s<i;s++)c=r.slice(s,s+1),u=r.slice(s+2),o=this.curveintersects(c,u,e),a.push(...o);return a}curveintersects(e,r,i){const a=[];e.forEach(function(o){r.forEach(function(c){o.overlaps(c)&&a.push({left:o,right:c})})});let s=[];return a.forEach(function(o){const c=L.pairiteration(o.left,o.right,i);c.length>0&&(s=s.concat(c))}),s}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,a){const s=(a-i)/4,o=this.get(i+s),c=this.get(a-s),u=L.dist(e,r),d=L.dist(e,o),h=L.dist(e,c);return fn(d-u)+fn(h-u)}_iterate(e,r){let i=0,a=1,s;do{s=0,a=1;let o=this.get(i),c,u,d,h,p=!1,f=!1,m,x=a,y=1;do if(f=p,h=d,x=(i+a)/2,c=this.get(x),u=this.get(a),d=L.getccenter(o,c,u),d.interval={start:i,end:a},p=this._error(d,o,i,a)<=e,m=f&&!p,m||(y=a),p){if(a>=1){if(d.interval.end=y=1,h=d,a>1){let g={x:d.x+d.r*$w(d.e),y:d.y+d.r*Tw(d.e)};d.e+=L.angle({x:d.x,y:d.y},g,this.get(1))}break}a=a+(a-i)/2}else a=x;while(!m&&s++<100);if(s>=100)break;h=h||d,r.push(h),i=y}while(a<1);return r}}function pa(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Pw(n){if(Array.isArray(n))return n}function Iw(n){if(Array.isArray(n))return pa(n)}function Ow(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Rw(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,s,o,c=[],u=!0,d=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(u=(i=s.call(r)).done)&&(c.push(i.value),c.length!==e);u=!0);}catch(h){d=!0,a=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return c}}function Dw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zw(n,e){if(n==null)return{};var r,i,a=Lw(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(a[r]=n[r])}return a}function Lw(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function Uw(n,e){return Pw(n)||Rw(n,e)||Hc(n,e)||Dw()}function Fw(n){return Iw(n)||Ow(n)||Hc(n)||Mw()}function Bw(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function qw(n){var e=Bw(n,"string");return typeof e=="symbol"?e:e+""}function Hc(n,e){if(n){if(typeof n=="string")return pa(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pa(n,e):void 0}}var Hw=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(c){return{keyAccessor:c,isProp:!(c instanceof Function)}}),s=n.reduce(function(c,u){var d=c,h=u;return a.forEach(function(p,f){var m=p.keyAccessor,x=p.isProp,y;if(x){var v=h,g=v[m],b=zw(v,[m].map(qw));y=g,h=b}else y=m(h,f);f+1<a.length?(d.hasOwnProperty(y)||(d[y]={}),d=d[y]):r?(d.hasOwnProperty(y)||(d[y]=[]),d[y].push(h)):d[y]=h}),c},{});r instanceof Function&&function c(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;d===a.length?Object.keys(u).forEach(function(h){return u[h]=r(u[h])}):Object.values(u).forEach(function(h){return c(h,d+1)})}(s);var o=s;return i&&(o=[],function c(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];d.length===a.length?o.push({keys:d,vals:u}):Object.entries(u).forEach(function(h){var p=Uw(h,2),f=p[0],m=p[1];return c(m,[].concat(Fw(d),[f]))})}(s),e instanceof Array&&e.length===0&&o.length===1&&(o[0].keys=[])),o};function Ww(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const Gw=Ww("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Kw(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}var Vw=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;Kw(Vw);function fa(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Jw(n){if(Array.isArray(n))return n}function Yw(n){if(Array.isArray(n))return fa(n)}function Oo(n,e,r){if(Wc())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var a=new(n.bind.apply(n,i));return a}function Ln(n,e,r){return(e=n_(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Wc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wc=function(){return!!n})()}function Xw(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Qw(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,s,o,c=[],u=!0,d=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(u=(i=s.call(r)).done)&&(c.push(i.value),c.length!==e);u=!0);}catch(h){d=!0,a=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return c}}function Zw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ro(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function Bt(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ro(Object(r),!0).forEach(function(i){Ln(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Ro(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Tn(n,e){return Jw(n)||Qw(n,e)||Gc(n,e)||Zw()}function Re(n){return Yw(n)||Xw(n)||Gc(n)||e_()}function t_(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function n_(n){var e=t_(n,"string");return typeof e=="symbol"?e:e+""}function ma(n){"@babel/helpers - typeof";return ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(n)}function Gc(n,e){if(n){if(typeof n=="string")return fa(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fa(n,e):void 0}}var r_=Uu(Gw);function Do(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=r_(e(i))})}function i_(n,e){var r=n.nodes,i=n.links,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.nodeFilter,o=s===void 0?function(){return!0}:s,c=a.onLoopError,u=c===void 0?function(m){throw"Invalid DAG structure! Found cycle in node path: ".concat(m.join(" -> "),".")}:c,d={};r.forEach(function(m){return d[e(m)]={data:m,out:[],depth:-1,skip:!o(m)}}),i.forEach(function(m){var x=m.source,y=m.target,v=j(x),g=j(y);if(!d.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!d.hasOwnProperty(g))throw"Missing target node with id: ".concat(g);var b=d[v],S=d[g];b.out.push(S);function j(w){return ma(w)==="object"?e(w):w}});var h=[];f(Object.values(d));var p=Object.assign.apply(Object,[{}].concat(Re(Object.entries(d).filter(function(m){var x=Tn(m,2),y=x[1];return!y.skip}).map(function(m){var x=Tn(m,2),y=x[0],v=x[1];return Ln({},y,v.depth)}))));return p;function f(m){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var j=m[g];if(x.indexOf(j)!==-1){var w=[].concat(Re(x.slice(x.indexOf(j))),[j]).map(function(k){return e(k.data)});return h.some(function(k){return k.length===w.length&&k.every(function(A,_){return A===w[_]})})||(h.push(w),u(w)),1}y>j.depth&&(j.depth=y,f(j.out,[].concat(Re(x),[j]),y+(j.skip?0:1)))},g=0,b=m.length;g<b;g++)v()}}var a_=2,ye=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},Mo=function(e,r){if(!r.isShadow){var i=ee(r.linkDirectionalParticles);r.graphData.links.forEach(function(a){var s=Math.round(Math.abs(i(a)));s?a.__photons=Re(Array(s)).map(function(){return{}}):delete a.__photons})}},Mr=za({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,Mo(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:ye},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:ye},nodeColor:{default:"color",triggerUpdate:!1,onChange:ye},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:ye},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ye},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:ye},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:ye},linkColor:{default:"color",triggerUpdate:!1,onChange:ye},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:ye},linkWidth:{default:1,triggerUpdate:!1,onChange:ye},linkCurvature:{default:0,triggerUpdate:!1,onChange:ye},linkCanvasObject:{triggerUpdate:!1,onChange:ye},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ye},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:ye},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:ye},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:ye},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Mo},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),a(),!e.isShadow&&s(),!e.isShadow&&o(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var c=ee(e.nodeVisibility),u=ee(e.nodeVal),d=ee(e.nodeColor),h=ee(e.nodeCanvasObjectMode),p=e.ctx,f=e.isShadow/e.globalScale,m=e.graphData.nodes.filter(c);p.save(),m.forEach(function(x){var y=h(x);if(e.nodeCanvasObject&&(y==="before"||y==="replace")&&(e.nodeCanvasObject(x,p,e.globalScale),y==="replace")){p.restore();return}var v=Math.sqrt(Math.max(0,u(x)||1))*e.nodeRelSize+f;p.beginPath(),p.arc(x.x,x.y,v,0,2*Math.PI,!1),p.fillStyle=d(x)||"rgba(31, 120, 180, 0.92)",p.fill(),e.nodeCanvasObject&&y==="after"&&e.nodeCanvasObject(x,e.ctx,e.globalScale)}),p.restore()}function a(){var c=ee(e.linkVisibility),u=ee(e.linkColor),d=ee(e.linkWidth),h=ee(e.linkLineDash),p=ee(e.linkCurvature),f=ee(e.linkCanvasObjectMode),m=e.ctx,x=e.isShadow*2,y=e.graphData.links.filter(c);y.forEach(k);var v=[],g=[],b=y;if(e.linkCanvasObject){var S=[],j=[];y.forEach(function(A){return({before:v,after:g,replace:S}[f(A)]||j).push(A)}),b=[].concat(Re(v),g,j),v=v.concat(S)}m.save(),v.forEach(function(A){return e.linkCanvasObject(A,m,e.globalScale)}),m.restore();var w=Hw(b,[u,d,h]);m.save(),Object.entries(w).forEach(function(A){var _=Tn(A,2),P=_[0],I=_[1],T=!P||P==="undefined"?"rgba(0,0,0,0.15)":P;Object.entries(I).forEach(function(E){var M=Tn(E,2),N=M[0],R=M[1],O=(N||1)/e.globalScale+x;Object.entries(R).forEach(function(U){var H=Tn(U,2);H[0];var B=H[1],G=h(B[0]);m.beginPath(),B.forEach(function(J){var Y=J.source,ie=J.target;if(!(!Y||!ie||!Y.hasOwnProperty("x")||!ie.hasOwnProperty("x"))){m.moveTo(Y.x,Y.y);var Z=J.__controlPoints;Z?m[Z.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(m,Re(Z).concat([ie.x,ie.y])):m.lineTo(ie.x,ie.y)}}),m.strokeStyle=T,m.lineWidth=O,m.setLineDash(G||[]),m.stroke()})})}),m.restore(),m.save(),g.forEach(function(A){return e.linkCanvasObject(A,m,e.globalScale)}),m.restore();function k(A){var _=p(A);if(!_){A.__controlPoints=null;return}var P=A.source,I=A.target;if(!(!P||!I||!P.hasOwnProperty("x")||!I.hasOwnProperty("x"))){var T=Math.sqrt(Math.pow(I.x-P.x,2)+Math.pow(I.y-P.y,2));if(T>0){var E=Math.atan2(I.y-P.y,I.x-P.x),M=T*_,N={x:(P.x+I.x)/2+M*Math.cos(E-Math.PI/2),y:(P.y+I.y)/2+M*Math.sin(E-Math.PI/2)};A.__controlPoints=[N.x,N.y]}else{var R=_*70;A.__controlPoints=[I.x,I.y-R,I.x+R,I.y]}}}}function s(){var c=1.6,u=.2,d=ee(e.linkDirectionalArrowLength),h=ee(e.linkDirectionalArrowRelPos),p=ee(e.linkVisibility),f=ee(e.linkDirectionalArrowColor||e.linkColor),m=ee(e.nodeVal),x=e.ctx;x.save(),e.graphData.links.filter(p).forEach(function(y){var v=d(y);if(!(!v||v<0)){var g=y.source,b=y.target;if(!(!g||!b||!g.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var S=Math.sqrt(Math.max(0,m(g)||1))*e.nodeRelSize,j=Math.sqrt(Math.max(0,m(b)||1))*e.nodeRelSize,w=Math.min(1,Math.max(0,h(y))),k=f(y)||"rgba(0,0,0,0.28)",A=v/c/2,_=y.__controlPoints&&Oo(ae,[g.x,g.y].concat(Re(y.__controlPoints),[b.x,b.y])),P=_?function(O){return _.get(O)}:function(O){return{x:g.x+(b.x-g.x)*O||0,y:g.y+(b.y-g.y)*O||0}},I=_?_.length():Math.sqrt(Math.pow(b.x-g.x,2)+Math.pow(b.y-g.y,2)),T=S+v+(I-S-j-v)*w,E=P(T/I),M=P((T-v)/I),N=P((T-v*(1-u))/I),R=Math.atan2(E.y-M.y,E.x-M.x)-Math.PI/2;x.beginPath(),x.moveTo(E.x,E.y),x.lineTo(M.x+A*Math.cos(R),M.y+A*Math.sin(R)),x.lineTo(N.x,N.y),x.lineTo(M.x-A*Math.cos(R),M.y-A*Math.sin(R)),x.fillStyle=k,x.fill()}}}),x.restore()}function o(){var c=ee(e.linkDirectionalParticles),u=ee(e.linkDirectionalParticleSpeed),d=ee(e.linkDirectionalParticleWidth),h=ee(e.linkVisibility),p=ee(e.linkDirectionalParticleColor||e.linkColor),f=e.ctx;f.save(),e.graphData.links.filter(h).forEach(function(m){var x=c(m);if(!(!m.hasOwnProperty("__photons")||!m.__photons.length)){var y=m.source,v=m.target;if(!(!y||!v||!y.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var g=u(m),b=m.__photons||[],S=Math.max(0,d(m)/2)/Math.sqrt(e.globalScale),j=p(m)||"rgba(0,0,0,0.28)";f.fillStyle=j;var w=m.__controlPoints?Oo(ae,[y.x,y.y].concat(Re(m.__controlPoints),[v.x,v.y])):null,k=0,A=!1;b.forEach(function(_){var P=!!_.__singleHop;if(_.hasOwnProperty("__progressRatio")||(_.__progressRatio=P?0:k/x),!P&&k++,_.__progressRatio+=g,_.__progressRatio>=1)if(!P)_.__progressRatio=_.__progressRatio%1;else{A=!0;return}var I=_.__progressRatio,T=w?w.get(I):{x:y.x+(v.x-y.x)*I||0,y:y.y+(v.y-y.y)*I||0};f.beginPath(),f.arc(T.x,T.y,S,0,2*Math.PI,!1),f.fill()}),A&&(m.__photons=m.__photons.filter(function(_){return!_.__singleHop||_.__progressRatio<=1}))}}}),f.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:_w().force("link",fw()).force("charge",jw()).force("center",gb()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&Do(e.graphData.nodes,ee(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&Do(e.graphData.links,ee(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(f){f.source=f[e.linkSource],f.target=f[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(f){return f[e.nodeId]}).links(e.graphData.links);var a=e.dagMode&&i_(e.graphData,function(f){return f[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),s=Math.max.apply(Math,Re(Object.values(a||[]))),o=e.dagLevelDistance||e.graphData.nodes.length/(s||1)*a_*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var c=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(f){return delete f[c]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var u=["rl","bu"].includes(e.dagMode),d=function(m){return(a[m[e.nodeId]]-s/2)*o*(u?-1:1)},h=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(f){return f[h]=d(f)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?kw(function(f){var m=a[f[e.nodeId]]||-1;return(e.dagMode==="radialin"?s-m:m)*o}).strength(function(f){return e.dagNodeFilter(f)?1:0}):null);for(var p=0;p<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);p++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function Kc(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(s){return{default:i[s](),onChange:function(c,u){r.forEach(function(d){return u[d][s](c)})},triggerUpdate:!1}},linkMethod:function(s){return function(o){for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];var h=[];return r.forEach(function(p){var f=o[p],m=f[s].apply(f,u);m!==f&&h.push(m)}),h.length?h[0]:this}}}}var s_=800,o_=4,l_=5,Vc=Kc("forceGraph",Mr),c_=Kc(["forceGraph","shadowGraph"],Mr),u_=Object.assign.apply(Object,Re(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return Ln({},n,Vc.linkProp(n))})).concat(Re(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return Ln({},n,c_.linkProp(n))})))),d_=Object.assign.apply(Object,Re(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return Ln({},n,Vc.linkMethod(n))})));function $i(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(s){s.style.width="".concat(n.width,"px"),s.style.height="".concat(n.height,"px"),s.width=n.width*i,s.height=n.height*i,!e&&!r&&s.getContext("2d").scale(i,i)});var a=He(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/a,(n.height-r)/2/a),n.needsRedraw=!0}}function Jc(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function zo(n,e,r){n.save(),Jc(n),n.clearRect(0,0,e,r),n.restore()}var h_=za({props:Bt({width:{default:window.innerWidth,onChange:function(e,r){return $i(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return $i(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(a){return(a||[]).every(function(s){return!s.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(a){var s=a.type,o=a.objs;o.filter(function(c){if(!c.hasOwnProperty("__indexColor"))return!0;var u=r.colorTracker.lookup(c.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==c}).forEach(function(c){c.__indexColor=r.colorTracker.register({type:s,d:c})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,a,s){return e(i,i.__indexColor,a,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,a,s){return e(i,i.__indexColor,a,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},u_),aliases:{stopAnimation:"pauseAnimation"},methods:Bt({graph2ScreenCoords:function(e,r,i){var a=He(e.canvas);return{x:r*a.k+a.x,y:i*a.k+a.y}},screen2GraphCoords:function(e,r,i){var a=He(e.canvas);return{x:(r-a.x)/a.k,y:(i-a.y)/a.k}},centerAt:function(e,r,i,a){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var s=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return a?e.tweenGroup.add(new oo(o()).to(s,a).easing(Tt.Quadratic.Out).onUpdate(c).start()):c(s),this}return o();function o(){var u=He(e.canvas);return{x:(e.width/2-u.x)/u.k,y:(e.height/2-u.y)/u.k}}function c(u){var d=u.x,h=u.y;e.zoom.translateTo(e.zoom.__baseElem,d===void 0?o().x:d,h===void 0?o().y:h),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new oo({k:a()}).to({k:r},i).easing(Tt.Quadratic.Out).onUpdate(function(o){var c=o.k;return s(c)}).start()):s(r),this;return a();function a(){return He(e.canvas).k}function s(o){e.zoom.scaleTo(e.zoom.__baseElem,o),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,a=arguments.length,s=new Array(a>3?a-3:0),o=3;o<a;o++)s[o-3]=arguments[o];var c=this.getGraphBbox.apply(this,s);if(c){var u={x:(c.x[0]+c.x[1])/2,y:(c.y[0]+c.y[1])/2},d=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(c.x[1]-c.x[0]),(e.height-i*2)/(c.y[1]-c.y[0])));this.centerAt(u.x,u.y,r),this.zoom(d,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=ee(e.nodeVal),a=function(c){return Math.sqrt(Math.max(0,i(c)||1))*e.nodeRelSize},s=e.graphData.nodes.filter(r).map(function(o){return{x:o.x,y:o.y,r:a(o)}});return s.length?{x:[ss(s,function(o){return o.x-o.r}),os(s,function(o){return o.x+o.r})],y:[ss(s,function(o){return o.y-o.r}),os(s,function(o){return o.y+o.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},d_),stateInit:function(){return{lastSetZoom:1,zoom:jv(),forceGraph:new Mr,shadowGraph:new Mr().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new Vy,tweenGroup:new yc}},init:function(e,r){var i=this;e.innerHTML="";var a=document.createElement("div");a.classList.add("force-graph-container"),a.style.position="relative",e.appendChild(a),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),a.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var s=r.canvas.getContext("2d"),o=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),c={x:-1e12,y:-1e12},u=function(){var p=null,f=window.devicePixelRatio,m=c.x>0&&c.y>0?o.getImageData(c.x*f,c.y*f,1,1):null;return m&&(p=r.colorTracker.lookup(m.data)),p};Oe(r.canvas).call(ax().subject(function(){if(!r.enableNodeDrag)return null;var h=u();return h&&h.type==="Node"?h.d:null}).on("start",function(h){var p=h.subject;p.__initialDragPos={x:p.x,y:p.y,fx:p.fx,fy:p.fy},h.active||(p.fx=p.x,p.fy=p.y),r.canvas.classList.add("grabbable")}).on("drag",function(h){var p=h.subject,f=p.__initialDragPos,m=h,x=He(r.canvas).k,y={x:f.x+(m.x-f.x)/x-p.x,y:f.y+(m.y-f.y)/x-p.y};["x","y"].forEach(function(v){return p["f".concat(v)]=p[v]=f[v]+(m[v]-f[v])/x}),!(!p.__dragged&&l_>=Math.sqrt(Fu(["x","y"].map(function(v){return Math.pow(h[v]-f[v],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,p.__dragged=!0,r.onNodeDrag(p,y))}).on("end",function(h){var p=h.subject,f=p.__initialDragPos,m={x:p.x-f.x,y:p.y-f.y};f.fx===void 0&&(p.fx=void 0),f.fy===void 0&&(p.fy=void 0),delete p.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,p.__dragged&&(delete p.__dragged,r.onNodeDragEnd(p,m))})),r.zoom(r.zoom.__baseElem=Oe(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(h){return!h.button&&r.enableZoomPanInteraction&&(h.type!=="wheel"||ee(r.enableZoomInteraction)(h))&&(h.type==="wheel"||ee(r.enablePanInteraction)(h))}).on("zoom",function(h){var p=h.transform;[s,o].forEach(function(f){Jc(f),f.translate(p.x,p.y),f.scale(p.k,p.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(Bt(Bt({},p),i.centerAt())),r.needsRedraw=!0}).on("end",function(h){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(Bt(Bt({},h.transform),i.centerAt()))}),$i(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){He(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=o_/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new mb(a),["pointermove","pointerdown"].forEach(function(h){return a.addEventListener(h,function(p){h==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=p),!r.isPointerDragging&&p.type==="pointermove"&&r.onBackgroundClick&&(p.pressure>0||r.isPointerPressed)&&(p.pointerType!=="touch"||p.movementX===void 0||[p.movementX,p.movementY].some(function(x){return Math.abs(x)>1}))&&(r.isPointerDragging=!0);var f=m(a);c.x=p.pageX-f.left,c.y=p.pageY-f.top;function m(x){var y=x.getBoundingClientRect(),v=window.pageXOffset||document.documentElement.scrollLeft,g=window.pageYOffset||document.documentElement.scrollTop;return{top:y.top+g,left:y.left+v}}},{passive:!0})}),a.addEventListener("pointerup",function(h){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var p=[h,r.pointerDownEvent];requestAnimationFrame(function(){if(h.button===0)if(r.hoverObj){var f=r["on".concat(r.hoverObj.type,"Click")];f&&f.apply(void 0,[r.hoverObj.d].concat(p))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,p);if(h.button===2)if(r.hoverObj){var m=r["on".concat(r.hoverObj.type,"RightClick")];m&&m.apply(void 0,[r.hoverObj.d].concat(p))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,p)})}},{passive:!0}),a.addEventListener("contextmenu",function(h){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(h.preventDefault(),!1)}),r.forceGraph(s),r.shadowGraph(o);var d=ey(function(){zo(o,r.width,r.height),r.shadowGraph.linkWidth(function(p){return ee(r.linkWidth)(p)+r.linkHoverPrecision});var h=He(r.canvas);r.shadowGraph.globalScale(h.k).tickFrame()},s_);r.flushShadowCanvas=d.flush,(this._animationCycle=function h(){var p=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(S){return S.__photons&&S.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var f=r.isPointerDragging?null:u();if(f!==r.hoverObj){var m=r.hoverObj,x=m?m.type:null,y=f?f.type:null;if(x&&x!==y){var v=r["on".concat(x,"Hover")];v&&v(null,m.d)}if(y){var g=r["on".concat(y,"Hover")];g&&g(f.d,x===y?m.d:null)}r.tooltip.content(f&&ee(r["".concat(f.type.toLowerCase(),"Label")])(f.d)||null),r.canvas.classList[f&&r["on".concat(y,"Click")]||!f&&r.onBackgroundClick?"add":"remove"]("clickable"),r.hoverObj=f}p&&d()}if(p){zo(s,r.width,r.height);var b=He(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(s,b),r.forceGraph.globalScale(b).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(s,b)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(h)})()},update:function(e){}});const ti={width:$.number,height:$.number,graphData:$.shape({nodes:$.arrayOf($.object).isRequired,links:$.arrayOf($.object).isRequired}),backgroundColor:$.string,nodeRelSize:$.number,nodeId:$.string,nodeLabel:$.oneOfType([$.string,$.func]),nodeVal:$.oneOfType([$.number,$.string,$.func]),nodeVisibility:$.oneOfType([$.bool,$.string,$.func]),nodeColor:$.oneOfType([$.string,$.func]),nodeAutoColorBy:$.oneOfType([$.string,$.func]),onNodeHover:$.func,onNodeClick:$.func,linkSource:$.string,linkTarget:$.string,linkLabel:$.oneOfType([$.string,$.func]),linkVisibility:$.oneOfType([$.bool,$.string,$.func]),linkColor:$.oneOfType([$.string,$.func]),linkAutoColorBy:$.oneOfType([$.string,$.func]),linkWidth:$.oneOfType([$.number,$.string,$.func]),linkCurvature:$.oneOfType([$.number,$.string,$.func]),linkDirectionalArrowLength:$.oneOfType([$.number,$.string,$.func]),linkDirectionalArrowColor:$.oneOfType([$.string,$.func]),linkDirectionalArrowRelPos:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticles:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleSpeed:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleWidth:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleColor:$.oneOfType([$.string,$.func]),onLinkHover:$.func,onLinkClick:$.func,dagMode:$.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:$.number,dagNodeFilter:$.func,onDagError:$.func,d3AlphaMin:$.number,d3AlphaDecay:$.number,d3VelocityDecay:$.number,warmupTicks:$.number,cooldownTicks:$.number,cooldownTime:$.number,onEngineTick:$.func,onEngineStop:$.func,getGraphBbox:$.func},Yc={zoomToFit:$.func,onNodeRightClick:$.func,onNodeDrag:$.func,onNodeDragEnd:$.func,onLinkRightClick:$.func,linkHoverPrecision:$.number,onBackgroundClick:$.func,onBackgroundRightClick:$.func,enablePointerInteraction:$.bool,enableNodeDrag:$.bool},Ga={showNavInfo:$.bool,nodeOpacity:$.number,nodeResolution:$.number,nodeThreeObject:$.oneOfType([$.object,$.string,$.func]),nodeThreeObjectExtend:$.oneOfType([$.bool,$.string,$.func]),linkOpacity:$.number,linkResolution:$.number,linkCurveRotation:$.oneOfType([$.number,$.string,$.func]),linkMaterial:$.oneOfType([$.object,$.string,$.func]),linkThreeObject:$.oneOfType([$.object,$.string,$.func]),linkThreeObjectExtend:$.oneOfType([$.bool,$.string,$.func]),linkPositionUpdate:$.func,linkDirectionalArrowResolution:$.number,linkDirectionalParticleResolution:$.number,forceEngine:$.oneOf(["d3","ngraph"]),ngraphPhysics:$.object,numDimensions:$.oneOf([1,2,3])},p_=Object.assign({},ti,Yc,{linkLineDash:$.oneOfType([$.arrayOf($.number),$.string,$.func]),nodeCanvasObjectMode:$.oneOfType([$.string,$.func]),nodeCanvasObject:$.func,nodePointerAreaPaint:$.func,linkCanvasObjectMode:$.oneOfType([$.string,$.func]),linkCanvasObject:$.func,linkPointerAreaPaint:$.func,autoPauseRedraw:$.bool,minZoom:$.number,maxZoom:$.number,enableZoomInteraction:$.oneOfType([$.bool,$.func]),enablePanInteraction:$.oneOfType([$.bool,$.func]),onZoom:$.func,onZoomEnd:$.func,onRenderFramePre:$.func,onRenderFramePost:$.func});Object.assign({},ti,Yc,Ga,{enableNavigationControls:$.bool,controlType:$.oneOf(["trackball","orbit","fly"]),rendererConfig:$.object,extraRenderers:$.arrayOf($.shape({render:$.func.isRequired}))});Object.assign({},ti,Ga,{nodeDesc:$.oneOfType([$.string,$.func]),linkDesc:$.oneOfType([$.string,$.func])});Object.assign({},ti,Ga,{markerAttrs:$.object,yOffset:$.number,glScale:$.number});const Ka=xg(h_,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});Ka.displayName="ForceGraph2D";Ka.propTypes=p_;const f_=({nodes:n,links:e,onNodeClick:r,width:i=800,height:a=600})=>{const{isDark:s}=fe(),o=C.useRef(),c=d=>({person:"#3b82f6",place:"#10b981",organization:"#f59e0b",topic:"#8b5cf6",event:"#ef4444"})[d]||"#6b7280",u={nodes:n.map(d=>({...d,color:d.color||c(d.type)})),links:e.map(d=>({...d,color:s?"#4b5563":"#9ca3af"}))};return C.useEffect(()=>{o.current&&(o.current.d3Force("charge").strength(-300),o.current.d3Force("link").distance(100))},[]),l.jsx("div",{className:`rounded-2xl border overflow-hidden ${s?"bg-black border-white/10":"bg-white border-slate-200"}`,children:l.jsx(Ka,{ref:o,graphData:u,width:i,height:a,backgroundColor:s?"#000000":"#ffffff",nodeLabel:"name",nodeColor:"color",nodeRelSize:6,nodeVal:"size",linkColor:"color",linkWidth:2,linkDirectionalParticles:2,linkDirectionalParticleWidth:2,onNodeClick:r,nodeCanvasObject:(d,h,p)=>{const f=d.name,m=12/p;h.font=`${m}px Sans-Serif`,h.textAlign="center",h.textBaseline="middle",h.fillStyle=s?"#ffffff":"#000000",h.fillText(f,d.x,d.y+d.size+10)},cooldownTicks:100,onEngineStop:()=>{var d;return(d=o.current)==null?void 0:d.zoomToFit(400)}})})},m_=()=>{const{slug:n}=wa(),{isDark:e}=fe(),[r,i]=C.useState(null),[a,s]=C.useState(!0),[o,c]=C.useState(!1),[u,d]=C.useState(0),[h,p]=C.useState(""),[f,m]=C.useState(""),[x,y]=C.useState(!1),[v,g]=C.useState(!1);C.useEffect(()=>{S(),b()},[n]),C.useEffect(()=>{let T;return o&&r&&(T=setInterval(()=>{d(E=>E>=r.events.length-1?(c(!1),E):E+1)},3e3)),()=>clearInterval(T)},[o,r]);const b=async()=>{try{const T=await Ar.checkConnection();g(T.connected)}catch{g(!1)}},S=async()=>{s(!0);try{const T=(n==null?void 0:n.replace(/-/g," "))||"Current Events",M=(await Km(T)).timeline.map(O=>({...O,impact:Math.floor(Math.random()*40)+60})),N=j(M,T),R={topic:T,events:M,analysis:w(T),generatedAt:new Date().toISOString(),knowledgeGraph:N};i(R)}catch(T){console.error("Error loading timeline:",T),i(k(n||"current-events"))}finally{s(!1)}},j=(T,E)=>{const M=[{id:"main",name:E,type:"topic",size:20},...T.slice(0,8).map((R,O)=>({id:`event-${O}`,name:R.title.substring(0,30)+"...",type:"event",size:R.impact/5}))],N=T.slice(0,8).map((R,O)=>({source:"main",target:`event-${O}`,relationship:"relates_to",strength:Math.random()}));return{nodes:M,links:N}},w=T=>({summary:`The timeline for ${T} shows accelerating development with increasing stakeholder engagement and expert validation.`,keyPatterns:["Accelerating pace of development","Increasing expert attention","Growing stakeholder involvement","Expanding scope of implications"],causeEffect:[{cause:"Initial development",effect:"Expert attention",confidence:85},{cause:"Expert validation",effect:"Stakeholder engagement",confidence:78},{cause:"Stakeholder interest",effect:"Accelerated development",confidence:82}],futurePredictions:["Continued acceleration of development","Increased regulatory attention","Broader industry adoption","Long-term strategic implications"],significance:`This timeline demonstrates the rapid evolution and growing importance of ${T} in the current landscape.`}),k=T=>{const E=T.replace(/-/g," "),M=[{date:new Date(Date.now()-864e5*30).toISOString(),title:`${E} - Initial Development`,description:"First reports and initial analysis emerge from multiple sources",source:"Global Intelligence Network",relevance:95,category:"development",impact:75},{date:new Date(Date.now()-864e5*20).toISOString(),title:"Expert Analysis and Verification",description:"Subject matter experts provide comprehensive analysis and verification",source:"Expert Analysis Network",relevance:88,category:"analysis",impact:82},{date:new Date(Date.now()-864e5*10).toISOString(),title:"Stakeholder Response and Implications",description:"Key stakeholders respond with strategic implications and next steps",source:"Stakeholder Network",relevance:92,category:"response",impact:90},{date:new Date().toISOString(),title:"Current Status and Future Outlook",description:"Latest developments and future predictions based on current trends",source:"Real-time Intelligence",relevance:100,category:"current",impact:95}];return{topic:E,events:M,analysis:w(E),generatedAt:new Date().toISOString(),knowledgeGraph:j(M,E)}},A=async()=>{if(!(!h.trim()||!v)){y(!0);try{const T=r?`
        Topic: ${r.topic}
        Recent Events: ${r.events.slice(0,3).map(M=>M.title).join(", ")}
        Analysis: ${r.analysis.summary}
      `:"",E=await Ar.chat([{role:"system",content:`You are an expert analyst discussing the timeline and events related to "${r==null?void 0:r.topic}". Use the provided context to give informed responses. Context: ${T}`},{role:"user",content:h}]);m(E.content),p("")}catch{m("Sorry, I encountered an error. Please make sure Ollama is running locally.")}finally{y(!1)}}},_=()=>{navigator.share&&r?navigator.share({title:`Timeline: ${r.topic}`,text:r.analysis.summary,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},P=()=>{if(!r)return;const T=`# Timeline: ${r.topic}

## Summary
${r.analysis.summary}

## Events

${r.events.map(R=>`### ${new Date(R.date).toLocaleDateString()}
**${R.title}**
${R.description}
*Source: ${R.source}*
*Impact: ${R.impact}/100*

`).join("")}

## Analysis

### Key Patterns
${r.analysis.keyPatterns.map(R=>`- ${R}`).join(`
`)}

### Cause & Effect
${r.analysis.causeEffect.map(R=>`- **${R.cause}**  **${R.effect}** (${R.confidence}% confidence)`).join(`
`)}

### Future Predictions
${r.analysis.futurePredictions.map(R=>`- ${R}`).join(`
`)}

### Significance
${r.analysis.significance}

---
Generated by RealityCheck AI on ${new Date(r.generatedAt).toLocaleDateString()}
`,E=new Blob([T],{type:"text/markdown"}),M=URL.createObjectURL(E),N=document.createElement("a");N.href=M,N.download=`timeline-${r.topic.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.md`,N.click(),URL.revokeObjectURL(M)},I=T=>{switch(T){case"development":return"from-blue-500 to-cyan-500";case"analysis":return"from-purple-500 to-pink-500";case"response":return"from-green-500 to-emerald-500";case"current":return"from-red-500 to-orange-500";default:return"from-slate-500 to-slate-600"}};return a?l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${e?"bg-black":"bg-white"}`,children:l.jsx("div",{className:"max-w-6xl mx-auto px-6 py-8",children:l.jsxs("div",{className:"animate-pulse space-y-6",children:[l.jsx("div",{className:`h-8 rounded ${e?"bg-white/10":"bg-slate-200"}`}),l.jsx("div",{className:`h-64 rounded-2xl ${e?"bg-white/10":"bg-slate-200"}`})]})})}):r?l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${e?"bg-black":"bg-white"}`,children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:l.jsxs(we,{to:"/trending",className:`inline-flex items-center space-x-2 text-sm font-medium transition-colors hover:text-glow-purple ${e?"text-slate-400":"text-slate-600"}`,children:[l.jsx(va,{className:"w-4 h-4"}),l.jsx("span",{children:"Back to Trending"})]})}),l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[l.jsxs("div",{className:`inline-flex items-center space-x-2 px-6 py-3 rounded-full backdrop-blur-sm border mb-6 ${e?"bg-white/5 border-white/10 text-glow-purple":"bg-slate-100 border-slate-200 text-purple-700"}`,children:[l.jsx(vr,{className:"w-5 h-5"}),l.jsx("span",{className:"font-semibold",children:"Event Timeline Analysis"})]}),l.jsx("h1",{className:`text-5xl font-bold font-display mb-4 transition-colors ${e?"text-white":"text-slate-900"}`,children:r.topic}),l.jsxs("div",{className:"flex items-center justify-center space-x-6",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(qo,{className:"w-4 h-4 text-glow-purple"}),l.jsxs("span",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:[r.events.length," events tracked"]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(oe,{className:"w-4 h-4 text-glow-purple"}),l.jsx("span",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:"AI-powered analysis"})]})]})]}),l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`backdrop-blur-sm border rounded-3xl p-8 shadow-xl mb-8 ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:`text-2xl font-bold ${e?"text-white":"text-slate-900"}`,children:"Impact Timeline"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>d(Math.max(0,u-1)),disabled:u===0,className:`p-2 rounded-xl transition-all duration-300 disabled:opacity-50 ${e?"bg-white/10 hover:bg-white/20":"bg-slate-100 hover:bg-slate-200"}`,children:l.jsx(ju,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>c(!o),className:`p-2 rounded-xl transition-all duration-300 ${e?"bg-glow-purple text-white":"bg-purple-600 text-white"}`,children:o?l.jsx(ku,{className:"w-4 h-4"}):l.jsx(ga,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>d(Math.min(r.events.length-1,u+1)),disabled:u===r.events.length-1,className:`p-2 rounded-xl transition-all duration-300 disabled:opacity-50 ${e?"bg-white/10 hover:bg-white/20":"bg-slate-100 hover:bg-slate-200"}`,children:l.jsx(Su,{className:"w-4 h-4"})})]})]}),l.jsx(Kl,{events:r.events,height:300})]}),l.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`backdrop-blur-sm border rounded-3xl p-8 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsx("h2",{className:`text-2xl font-bold mb-6 ${e?"text-white":"text-slate-900"}`,children:"Event Timeline"}),l.jsx("div",{className:"space-y-6",children:r.events.map((T,E)=>l.jsxs(D.div,{initial:{opacity:0,x:-20},animate:{opacity:E<=u?1:.3,x:0,scale:E===u?1.02:1},transition:{delay:E*.1},className:`flex space-x-4 cursor-pointer ${E===u?"transform scale-102":""}`,onClick:()=>{d(E)},children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:`w-4 h-4 rounded-full ${E<=u?"bg-glow-purple shadow-glow":e?"bg-slate-600":"bg-slate-300"}`}),E<r.events.length-1&&l.jsx("div",{className:`w-px h-16 mt-2 ${E<u?"bg-glow-purple":e?"bg-slate-600":"bg-slate-300"}`})]}),l.jsxs("div",{className:`flex-1 pb-8 p-4 rounded-2xl transition-all duration-300 ${E===u?e?"bg-glow-purple/10 border border-glow-purple/20":"bg-purple-50 border border-purple-200":e?"bg-white/5 hover:bg-white/10":"bg-slate-50 hover:bg-slate-100"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:`text-sm font-medium ${E===u?"text-glow-purple":e?"text-slate-400":"text-slate-600"}`,children:new Date(T.date).toLocaleDateString()}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-semibold bg-gradient-to-r ${I(T.category)}`,children:l.jsx("span",{className:"text-white",children:T.category.toUpperCase()})}),l.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-semibold ${T.impact>=90?"bg-red-500/20 text-red-400":T.impact>=70?"bg-orange-500/20 text-orange-400":"bg-yellow-500/20 text-yellow-400"}`,children:[T.impact,"% impact"]})]})]}),l.jsx("h4",{className:`font-bold mb-2 transition-colors ${e?"text-white":"text-slate-900"}`,children:T.title}),l.jsx("p",{className:`text-sm leading-relaxed mb-2 transition-colors ${e?"text-slate-300":"text-slate-700"}`,children:T.description}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs transition-colors text-slate-500",children:T.source}),l.jsxs("div",{className:`text-xs px-2 py-1 rounded-full ${T.relevance>=90?"bg-green-500/20 text-green-400":T.relevance>=70?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:[T.relevance,"% relevance"]})]})]})]},E))})]})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx(oe,{className:"w-5 h-5 text-glow-purple"}),l.jsx("h3",{className:`font-bold ${e?"text-white":"text-slate-900"}`,children:"AI Analysis"})]}),l.jsx("p",{className:`text-sm leading-relaxed mb-4 ${e?"text-slate-300":"text-slate-700"}`,children:r.analysis.summary}),l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{children:[l.jsx("h4",{className:`font-semibold text-sm mb-2 ${e?"text-white":"text-slate-900"}`,children:"Key Patterns"}),l.jsx("ul",{className:"space-y-1",children:r.analysis.keyPatterns.map((T,E)=>l.jsxs("li",{className:`text-xs flex items-start space-x-2 ${e?"text-slate-300":"text-slate-700"}`,children:[l.jsx(Ke,{className:"w-3 h-3 text-glow-purple mt-0.5 flex-shrink-0"}),l.jsx("span",{children:T})]},E))})]})})]}),r.knowledgeGraph&&l.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsx("h3",{className:`font-bold mb-4 ${e?"text-white":"text-slate-900"}`,children:"Knowledge Graph"}),l.jsx(f_,{nodes:r.knowledgeGraph.nodes,links:r.knowledgeGraph.links,width:300,height:250})]}),l.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx(Ei,{className:"w-5 h-5 text-glow-purple"}),l.jsx("h3",{className:`font-bold ${e?"text-white":"text-slate-900"}`,children:"Chat with AI"}),!v&&l.jsx("span",{className:"text-xs text-red-400",children:"(Ollama not connected)"})]}),f&&l.jsx("div",{className:`p-3 rounded-xl mb-4 text-sm ${e?"bg-white/5 border border-white/10":"bg-slate-50 border border-slate-200"}`,children:f}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("textarea",{value:h,onChange:T=>p(T.target.value),placeholder:v?"Ask about this timeline...":"Start Ollama to chat",disabled:!v,className:`w-full p-3 rounded-xl border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-glow-purple resize-none ${e?"bg-white/5 border-white/10 text-white placeholder-slate-400":"bg-slate-50 border-slate-200 text-slate-900 placeholder-slate-500"}`,rows:3}),l.jsx("button",{onClick:A,disabled:!h.trim()||x||!v,className:"w-full bg-gradient-to-r from-glow-purple to-glow-pink text-white py-2 rounded-xl font-semibold disabled:opacity-50 transition-all duration-300",children:x?"Thinking...":"Ask AI"})]})]}),l.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:`backdrop-blur-sm border rounded-3xl p-6 shadow-xl ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsx("h3",{className:`font-bold mb-4 ${e?"text-white":"text-slate-900"}`,children:"Actions"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:_,className:`w-full p-3 rounded-xl text-left transition-all duration-300 flex items-center space-x-3 ${e?"bg-white/10 hover:bg-white/20":"bg-slate-100 hover:bg-slate-200"}`,children:[l.jsx(xr,{className:"w-4 h-4"}),l.jsx("span",{children:"Share Timeline"})]}),l.jsxs("button",{onClick:P,className:`w-full p-3 rounded-xl text-left transition-all duration-300 flex items-center space-x-3 ${e?"bg-white/10 hover:bg-white/20":"bg-slate-100 hover:bg-slate-200"}`,children:[l.jsx(gr,{className:"w-4 h-4"}),l.jsx("span",{children:"Download Report"})]})]})]})]})]})]})}):l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${e?"bg-black":"bg-white"}`,children:l.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8 text-center",children:[l.jsx("h1",{className:`text-2xl font-bold mb-4 ${e?"text-white":"text-slate-900"}`,children:"Timeline Not Found"}),l.jsx(we,{to:"/trending",className:"text-glow-purple hover:underline",children:"Return to Trending"})]})})},g_=({metrics:n,animated:e=!0})=>{const{isDark:r}=fe();return l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:n.map((i,a)=>{const s=i.icon;return l.jsxs(D.div,{initial:e?{opacity:0,y:20}:{},animate:e?{opacity:1,y:0}:{},transition:{delay:a*.1},className:`backdrop-blur-sm border rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-300 ${r?"bg-white/5 border-white/10 hover:bg-white/10":"bg-white/70 border-slate-200 hover:bg-white"}`,children:[l.jsx("div",{className:"flex items-center space-x-3 mb-2",children:l.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-r ${i.color}`,children:l.jsx(s,{className:"w-4 h-4 text-white"})})}),l.jsx("div",{className:`text-2xl font-bold mb-1 transition-colors ${r?"text-white":"text-slate-900"}`,children:typeof i.value=="number"?i.value.toLocaleString():i.value}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:`text-sm font-medium transition-colors ${r?"text-slate-300":"text-slate-600"}`,children:i.label}),l.jsxs("div",{className:`flex items-center space-x-1 text-xs font-semibold ${i.change>=0?"text-green-400":"text-red-400"}`,children:[l.jsx(Ke,{className:`w-3 h-3 ${i.change<0?"rotate-180":""}`}),l.jsxs("span",{children:[Math.abs(i.change),"%"]})]})]})]},i.label)})})},x_=()=>[{label:"Articles Today",value:Math.floor(Math.random()*500)+200,change:Math.floor(Math.random()*20)+5,icon:lt,color:"from-blue-500 to-cyan-500"},{label:"New Events",value:Math.floor(Math.random()*50)+10,change:Math.floor(Math.random()*15)+2,icon:Q,color:"from-purple-500 to-pink-500"},{label:"Sources Used",value:Math.floor(Math.random()*100)+50,change:Math.floor(Math.random()*10)+1,icon:xt,color:"from-green-500 to-emerald-500"},{label:"Live Scans",value:Math.floor(Math.random()*1e3)+500,change:Math.floor(Math.random()*25)+10,icon:mt,color:"from-orange-500 to-red-500"},{label:"AI Responses",value:Math.floor(Math.random()*200)+100,change:Math.floor(Math.random()*30)+5,icon:Ke,color:"from-indigo-500 to-purple-500"},{label:"Uptime",value:"99.9%",change:.1,icon:Ue,color:"from-teal-500 to-blue-500"}],v_=({data:n,width:e=800,height:r=400})=>{const{isDark:i}=fe(),a=[...new Set(n.map(h=>h.topic))],s=Array.from({length:24},(h,p)=>p),o=(h,p)=>{const f=n.find(m=>m.topic===h&&m.hour===p);return(f==null?void 0:f.intensity)||0},c=h=>{const p=h/100;return i?`rgba(139, 92, 246, ${p})`:`rgba(139, 92, 246, ${p})`},u=e/s.length,d=r/a.length;return l.jsxs("div",{className:`rounded-2xl border p-4 ${i?"bg-black border-white/10":"bg-white border-slate-200"}`,children:[l.jsx("h3",{className:`text-lg font-bold mb-4 ${i?"text-white":"text-slate-900"}`,children:"Trending Topics Heatmap (24h)"}),l.jsx("div",{className:"relative overflow-x-auto",children:l.jsxs("svg",{width:e,height:r+60,children:[s.map(h=>l.jsxs("text",{x:h*u+u/2,y:r+20,textAnchor:"middle",className:`text-xs ${i?"fill-slate-400":"fill-slate-600"}`,children:[h,":00"]},h)),a.map((h,p)=>l.jsx("text",{x:-10,y:p*d+d/2,textAnchor:"end",dominantBaseline:"middle",className:`text-xs ${i?"fill-slate-400":"fill-slate-600"}`,children:h.length>15?h.substring(0,15)+"...":h},h)),a.map((h,p)=>s.map(f=>{const m=o(h,f);return l.jsx("rect",{x:f*u,y:p*d,width:u-1,height:d-1,fill:c(m),stroke:i?"#374151":"#e5e7eb",strokeWidth:.5,className:"cursor-pointer hover:stroke-purple-400",children:l.jsx("title",{children:`${h} at ${f}:00 - Intensity: ${m}%`})},`${h}-${f}`)}))]})}),l.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-4",children:[l.jsx("span",{className:`text-xs ${i?"text-slate-400":"text-slate-600"}`,children:"Low"}),l.jsx("div",{className:"flex space-x-1",children:[.2,.4,.6,.8,1].map(h=>l.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:`rgba(139, 92, 246, ${h})`}},h))}),l.jsx("span",{className:`text-xs ${i?"text-slate-400":"text-slate-600"}`,children:"High"})]})]})},Lo=()=>{const{isDark:n}=fe(),[e,r]=C.useState([]),[i,a]=C.useState(!0),[s,o]=C.useState("all"),[c,u]=C.useState("topics"),[d,h]=C.useState(""),[p]=C.useState(x_()),[f,m]=C.useState(null),[x,y]=C.useState(!1),v=[{id:"all",name:"All Topics",icon:lt},{id:"news",name:"Breaking News",icon:Q},{id:"technology",name:"Technology",icon:oe},{id:"world",name:"World Events",icon:lt},{id:"science",name:"Science",icon:Fn},{id:"health",name:"Health",icon:mt},{id:"business",name:"Business",icon:rs},{id:"environment",name:"Environment",icon:Pi}];C.useEffect(()=>{g()},[]);const g=async()=>{a(!0);try{const _=await Cl(),P=await Promise.all((_.trending||[]).map(async I=>{try{const T=j(I.category),E={tldr:`${I.query} is currently trending with ${I.results.length} related articles and high engagement across multiple sources.`,keyPoints:I.results.slice(0,3).map(M=>M.title),trustScore:Math.floor(Math.random()*30)+70};return{...I,image:T,summary:E}}catch(T){return console.warn("Failed to enhance topic:",T),{...I,image:j(I.category)}}}));r(P)}catch(_){console.error("Error loading trending data:",_),r(y_())}finally{a(!1)}},b=async()=>{if(d.trim()){a(!0);try{const _=await It(d,["news","general"]),P={query:d,results:_.results.slice(0,10),timestamp:new Date().toISOString(),category:"search",trending_score:100,image:j("search"),summary:{tldr:`Search results for "${d}" reveal ${_.results.length} relevant articles with real-time analysis.`,keyPoints:_.results.slice(0,3).map(I=>I.title),trustScore:85}};r(I=>[P,...I.filter(T=>T.category!=="search")])}catch(_){console.error("Search error:",_)}finally{a(!1)}}},S=async _=>{var P;if(m(_),y(!0),!_.timeline)try{const[I,T]=await Promise.all([_.summary?Promise.resolve(_.summary):Ta({title:_.query,description:((P=_.results[0])==null?void 0:P.content)||_.query,category:_.category}),Ca(_.query)]);m(E=>E?{...E,summary:I,timeline:T}:null)}catch(I){console.error("Analysis generation error:",I)}},j=_=>{const P={technology:"https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=800",health:"https://images.pexels.com/photos/3938023/pexels-photo-3938023.jpeg?auto=compress&cs=tinysrgb&w=800",environment:"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress&cs=tinysrgb&w=800",business:"https://images.pexels.com/photos/590041/pexels-photo-590041.jpeg?auto=compress&cs=tinysrgb&w=800",science:"https://images.pexels.com/photos/2280571/pexels-photo-2280571.jpeg?auto=compress&cs=tinysrgb&w=800",news:"https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=800",world:"https://images.pexels.com/photos/8728382/pexels-photo-8728382.jpeg?auto=compress&cs=tinysrgb&w=800",security:"https://images.pexels.com/photos/60504/security-protection-anti-virus-software-60504.jpeg?auto=compress&cs=tinysrgb&w=800"};return P[_]||P.news},w=s==="all"?e:e.filter(_=>_.category===s),k=_=>({technology:"from-blue-500 to-cyan-500",environment:"from-green-500 to-emerald-500",news:"from-red-500 to-orange-500",world:"from-purple-500 to-pink-500",science:"from-indigo-500 to-purple-500",health:"from-pink-500 to-rose-500",business:"from-yellow-500 to-orange-500",security:"from-slate-500 to-slate-600"})[_]||"from-glow-purple to-glow-pink",A=e.flatMap(_=>Array.from({length:24},(P,I)=>({topic:_.query.substring(0,20),hour:I,intensity:Math.floor(Math.random()*100),category:_.category})));return l.jsx("div",{className:`min-h-screen pt-20 transition-colors duration-300 ${n?"bg-black":"bg-white"}`,children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[l.jsxs("div",{className:`inline-flex items-center space-x-2 px-6 py-3 rounded-full backdrop-blur-sm border mb-6 ${n?"bg-white/5 border-white/10 text-glow-purple":"bg-slate-100 border-slate-200 text-purple-700"}`,children:[l.jsx(Ke,{className:"w-5 h-5"}),l.jsx("span",{className:"font-semibold",children:"Real-time Global Intelligence"})]}),l.jsx("h1",{className:`text-6xl font-bold font-display mb-4 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Trending Now"}),l.jsx("p",{className:`text-xl max-w-3xl mx-auto font-body transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:"Discover what's happening right now with AI-powered trend analysis, timelines, and strategic insights"})]}),l.jsx(g_,{metrics:p}),l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 mb-6",children:[l.jsxs("div",{className:"flex-1 flex gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(Ci,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 transition-colors ${n?"text-slate-400":"text-slate-500"}`}),l.jsx("input",{type:"text",placeholder:"Search trending topics and get AI analysis...",value:d,onChange:_=>h(_.target.value),onKeyPress:_=>_.key==="Enter"&&b(),className:`w-full pl-12 pr-4 py-4 rounded-2xl backdrop-blur-sm border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-glow-purple ${n?"bg-white/5 border-white/10 text-white placeholder-slate-400":"bg-slate-50 border-slate-200 text-slate-900 placeholder-slate-500"}`})]}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:b,disabled:i,className:"bg-gradient-to-r from-glow-purple to-glow-pink text-white px-8 py-4 rounded-2xl font-bold shadow-glow hover:shadow-glow-lg transition-all duration-300 disabled:opacity-50",children:l.jsx(Ci,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"flex items-center space-x-2",children:[{id:"topics",name:"Topics",icon:Ke},{id:"clusters",name:"Clusters",icon:Pi},{id:"heatmap",name:"Heatmap",icon:rs},{id:"timeline",name:"Timeline",icon:vr}].map(_=>{const P=_.icon;return l.jsxs(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(_.id),className:`px-4 py-2 rounded-xl font-semibold transition-all duration-300 flex items-center space-x-2 ${c===_.id?n?"bg-glow-purple text-white":"bg-purple-600 text-white":n?"bg-white/10 text-slate-300 hover:bg-white/20":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[l.jsx(P,{className:"w-4 h-4"}),l.jsx("span",{children:_.name})]},_.id)})})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(_=>{const P=_.icon,I=s===_.id;return l.jsxs(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(_.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 flex items-center space-x-2 ${I?n?"bg-glow-purple/20 text-glow-purple border border-glow-purple/30":"bg-purple-100 text-purple-700 border border-purple-200":n?"bg-white/5 text-slate-400 border border-white/10 hover:bg-white/10":"bg-slate-100 text-slate-600 border border-slate-200 hover:bg-slate-200"}`,children:[l.jsx(P,{className:"w-3 h-3"}),l.jsx("span",{children:_.name})]},_.id)})})]}),i?l.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center py-20",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Ke,{className:"w-12 h-12 text-glow-purple mx-auto mb-4 animate-pulse"}),l.jsx("p",{className:`text-xl font-semibold mb-2 transition-colors ${n?"text-white":"text-slate-900"}`,children:"Analyzing Global Trends..."}),l.jsx("p",{className:`transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:"Processing real-time data and generating AI insights"})]})}):l.jsxs("div",{children:[c==="topics"&&l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map((_,P)=>l.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:P*.1},className:`backdrop-blur-sm border rounded-3xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-500 group cursor-pointer ${n?"bg-white/5 border-white/10 hover:bg-white/10":"bg-white border-slate-200 hover:bg-slate-50"}`,onClick:()=>S(_),children:[l.jsxs("div",{className:"relative h-48 overflow-hidden",children:[l.jsx("img",{src:_.image,alt:_.query,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",onError:I=>{I.currentTarget.src=j(_.category)}}),l.jsxs("div",{className:"absolute top-4 right-4 flex space-x-2",children:[l.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold bg-gradient-to-r ${k(_.category)}`,children:l.jsx("span",{className:"text-white",children:_.category.toUpperCase()})}),l.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${_.trending_score>=90?"bg-red-500 text-white":_.trending_score>=70?"bg-orange-500 text-white":"bg-yellow-500 text-black"}`,children:Math.round(_.trending_score)})]}),l.jsx("div",{className:"absolute bottom-4 left-4",children:l.jsxs("div",{className:"bg-black/50 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center space-x-1",children:[l.jsx(ga,{className:"w-3 h-3"}),l.jsx("span",{children:"LIVE"})]})})]}),l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:`font-bold text-lg mb-3 transition-colors ${n?"text-white":"text-slate-900"}`,children:_.query}),_.summary&&l.jsx("p",{className:`text-sm leading-relaxed mb-4 line-clamp-3 transition-colors ${n?"text-slate-300":"text-slate-600"}`,children:_.summary.tldr}),l.jsx("div",{className:"space-y-2 mb-4",children:_.results.slice(0,2).map((I,T)=>l.jsxs("div",{className:`p-2 rounded-xl border transition-all duration-300 ${n?"bg-white/5 border-white/10":"bg-slate-50 border-slate-200"}`,children:[l.jsx("h4",{className:`font-semibold text-xs mb-1 line-clamp-1 transition-colors ${n?"text-white":"text-slate-900"}`,children:I.title}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:`text-xs transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:I.source}),l.jsx(Gt,{className:"w-3 h-3"})]})]},T))}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(oe,{className:"w-4 h-4 text-glow-purple"}),l.jsx("span",{className:`text-sm font-semibold transition-colors ${n?"text-glow-purple":"text-purple-600"}`,children:"AI Analysis"})]}),l.jsx("div",{className:"flex items-center space-x-2 text-xs",children:l.jsxs("span",{className:`transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:[_.results.length," sources"]})})]})]})]},_.query))}),c==="heatmap"&&l.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:l.jsx(v_,{data:A,width:800,height:400})}),c==="timeline"&&l.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:l.jsxs("div",{className:`backdrop-blur-sm border rounded-3xl p-8 shadow-xl ${n?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[l.jsx("h2",{className:`text-2xl font-bold mb-6 ${n?"text-white":"text-slate-900"}`,children:"Trending Timeline Analysis"}),l.jsx(Kl,{events:w.map(_=>({date:_.timestamp,title:_.query,impact:_.trending_score,category:_.category})),height:400})]})})]}),x&&f&&l.jsxs(D.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:()=>y(!1),children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),l.jsxs(D.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},onClick:_=>_.stopPropagation(),className:`relative w-full max-w-6xl max-h-[90vh] overflow-y-auto backdrop-blur-sm border rounded-3xl p-8 shadow-xl ${n?"bg-black/90 border-white/10":"bg-white/90 border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h2",{className:`text-3xl font-bold transition-colors ${n?"text-white":"text-slate-900"}`,children:["AI Analysis: ",f.query]}),l.jsx("button",{onClick:()=>y(!1),className:`p-2 rounded-xl transition-colors ${n?"hover:bg-white/10":"hover:bg-slate-100"}`,children:""})]}),l.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[l.jsxs("div",{children:[f.summary&&l.jsxs("div",{className:`p-6 rounded-2xl border mb-6 ${n?"bg-glow-purple/10 border-glow-purple/20":"bg-purple-50 border-purple-200"}`,children:[l.jsx("h3",{className:`font-bold mb-3 ${n?"text-white":"text-slate-900"}`,children:"AI Summary"}),l.jsx("p",{className:`leading-relaxed mb-4 ${n?"text-slate-300":"text-slate-700"}`,children:f.summary.tldr}),l.jsxs("div",{className:`text-sm px-3 py-1 rounded-full inline-block ${f.summary.trustScore>=80?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:["Trust Score: ",f.summary.trustScore,"%"]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold mb-4 ${n?"text-white":"text-slate-900"}`,children:"Key Articles"}),l.jsx("div",{className:"space-y-3",children:f.results.slice(0,5).map((_,P)=>l.jsxs("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",className:`block p-4 rounded-2xl border transition-all duration-300 hover:scale-[1.02] ${n?"bg-white/5 border-white/10 hover:bg-white/10":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,children:[l.jsx("h4",{className:`font-semibold mb-2 line-clamp-2 ${n?"text-white":"text-slate-900"}`,children:_.title}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:`text-sm ${n?"text-slate-400":"text-slate-600"}`,children:_.source}),l.jsx(Gt,{className:"w-4 h-4"})]})]},P))})]})]}),l.jsx("div",{children:f.timeline&&l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold mb-4 ${n?"text-white":"text-slate-900"}`,children:"Event Timeline"}),l.jsx("div",{className:"space-y-4",children:f.timeline.events.map((_,P)=>l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"w-3 h-3 bg-glow-purple rounded-full"}),P<f.timeline.events.length-1&&l.jsx("div",{className:"w-px h-16 bg-glow-purple/30 mt-2"})]}),l.jsxs("div",{className:"flex-1 pb-8",children:[l.jsx("div",{className:"flex items-center space-x-2 mb-2",children:l.jsx("span",{className:`text-sm font-medium ${n?"text-glow-purple":"text-purple-600"}`,children:new Date(_.date).toLocaleDateString()})}),l.jsx("h4",{className:`font-semibold mb-1 ${n?"text-white":"text-slate-900"}`,children:_.title}),l.jsx("p",{className:`text-sm leading-relaxed ${n?"text-slate-300":"text-slate-700"}`,children:_.description})]})]},P))})]})})]})]})]}),l.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center mt-12",children:l.jsxs(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:g,disabled:i,className:`px-8 py-4 rounded-2xl font-semibold transition-all duration-300 flex items-center space-x-3 mx-auto ${n?"bg-white/10 border border-white/20 text-white hover:bg-white/20":"bg-slate-100 border border-slate-200 text-slate-700 hover:bg-slate-200"}`,children:[l.jsx(Un,{className:`w-5 h-5 ${i?"animate-spin":""}`}),l.jsx("span",{children:"Refresh Trends"})]})})]})})};function y_(){return[{query:"AI breakthrough quantum computing integration",category:"technology",trending_score:95},{query:"Global climate summit emergency protocols",category:"environment",trending_score:88},{query:"Medical AI diagnostic accuracy milestone",category:"health",trending_score:92},{query:"Economic market volatility analysis",category:"business",trending_score:78},{query:"Space exploration mission success",category:"science",trending_score:85}].map(e=>({...e,results:Array.from({length:8},(r,i)=>({title:`${e.query} - Breaking Development ${i+1}`,content:`Latest analysis and expert commentary on ${e.query} with comprehensive coverage.`,url:`https://example.com/${e.category}/${i}`,source:"Intelligence Network",publishedDate:new Date(Date.now()-Math.random()*864e5).toISOString()})),timestamp:new Date().toISOString(),image:b_(e.category),summary:{tldr:`${e.query} is trending with significant implications for the ${e.category} sector.`,keyPoints:[`Key development in ${e.category}`,"Expert analysis confirms impact","Strategic implications identified"],trustScore:Math.floor(Math.random()*20)+80}}))}function b_(n){const e={technology:"https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=800",health:"https://images.pexels.com/photos/3938023/pexels-photo-3938023.jpeg?auto=compress&cs=tinysrgb&w=800",environment:"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress&cs=tinysrgb&w=800",business:"https://images.pexels.com/photos/590041/pexels-photo-590041.jpeg?auto=compress&cs=tinysrgb&w=800",science:"https://images.pexels.com/photos/2280571/pexels-photo-2280571.jpeg?auto=compress&cs=tinysrgb&w=800",news:"https://images.pexels.com/photos/518543/pexels-photo-518543.jpeg?auto=compress&cs=tinysrgb&w=800"};return e[n]||e.news}const w_=()=>{const{isDark:n,toggleTheme:e}=fe(),{hasValidKey:r}=Vr(),i=qn(),a=[{path:"/discover",name:"Discover",icon:Ti},{path:"/trending",name:"Trending",icon:Ke},{path:"/globalThis-pulse",name:"Global Pulse",icon:Ke},{path:"/insight-engine",name:"Insight Engine",icon:oe},{path:"/chat",name:"Chat",icon:Q}],s=r("openai")||r("claude")||r("mistral")||r("cohere");return l.jsx(D.nav,{initial:{y:-100},animate:{y:0},className:`fixed top-0 left-0 right-0 z-50 backdrop-blur-xl border-b transition-all duration-300 ${n?"bg-black/80 border-slate-800/50":"bg-white/80 border-slate-200/50"}`,children:l.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(we,{to:"/",className:"flex items-center space-x-3 group",children:[l.jsx(D.div,{whileHover:{scale:1.05,rotate:5},className:`p-3 rounded-xl shadow-lg transition-all duration-300 ${n?"bg-gradient-to-r from-glow-purple to-glow-pink shadow-glow-purple/25":"bg-gradient-to-r from-purple-500 to-pink-500 shadow-purple-500/25"}`,children:l.jsx(st,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("span",{className:`text-xl font-bold font-display transition-colors ${n?"text-white":"text-slate-900"}`,children:"RealityCheck AI"}),l.jsx("p",{className:`text-sm font-medium transition-colors ${n?"text-glow-purple":"text-purple-600"}`,children:"Multi-Model Intelligence"})]})]}),l.jsx("div",{className:"hidden lg:flex items-center space-x-1",children:a.map(o=>{const c=o.icon,u=i.pathname===o.path;return l.jsx(we,{to:o.path,children:l.jsxs(D.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-xl flex items-center space-x-2 transition-all duration-300 ${u?n?"bg-glow-purple/20 text-glow-purple shadow-glow-sm":"bg-purple-100 text-purple-700 shadow-lg shadow-purple-500/10":n?"text-slate-300 hover:bg-slate-800/50 hover:text-white":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,children:[l.jsx(c,{className:"w-4 h-4"}),l.jsx("span",{className:"font-medium",children:o.name})]})},o.path)})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(we,{to:"/settings",children:l.jsx(D.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-xl transition-all duration-300 ${s?n?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-green-100 text-green-600 hover:bg-green-200":n?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"bg-yellow-100 text-yellow-600 hover:bg-yellow-200"}`,title:s?"API Keys Configured":"Configure API Keys",children:l.jsx(_n,{className:"w-4 h-4"})})}),l.jsx(we,{to:"/settings",children:l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-3 rounded-xl transition-all duration-300 ${i.pathname==="/settings"?n?"bg-glow-purple/20 text-glow-purple":"bg-purple-100 text-purple-700":n?"bg-slate-800/50 text-slate-400 hover:bg-slate-700/50":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:l.jsx(Bo,{className:"w-5 h-5"})})}),l.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:`p-3 rounded-xl transition-all duration-300 ${n?"bg-slate-800/50 text-yellow-400 hover:bg-slate-700/50 shadow-lg shadow-slate-900/20":"bg-slate-100 text-slate-600 hover:bg-slate-200 shadow-lg shadow-slate-500/10"}`,children:n?l.jsx(Nu,{className:"w-5 h-5"}):l.jsx(Au,{className:"w-5 h-5"})})]})]})})})},__=()=>{const{isDark:n}=fe(),e=[{name:"Terms",href:"#"},{name:"Privacy",href:"#"},{name:"Security",href:"#"},{name:"Status",href:"#"},{name:"Docs",href:"#"},{name:"Contact",href:"#"},{name:"Manage Cookies",href:"#"}];return l.jsx(D.footer,{initial:{opacity:0},animate:{opacity:1},className:`relative border-t backdrop-blur-xl transition-all duration-300 ${n?"bg-black/80 border-slate-800/50":"bg-white/80 border-slate-200/50"}`,children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${n?"bg-gradient-to-r from-glow-purple to-glow-pink":"bg-gradient-to-r from-purple-500 to-pink-500"}`,children:l.jsx(st,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-sm font-medium transition-colors ${n?"text-white":"text-slate-900"}`,children:" 2025 RealityCheck AI, Inc."}),l.jsx("p",{className:`text-xs transition-colors ${n?"text-slate-400":"text-slate-600"}`,children:"Advanced Intelligence Platform"})]})]}),l.jsx("div",{className:"flex flex-wrap items-center justify-center gap-6",children:e.map(r=>l.jsx(D.a,{href:r.href,whileHover:{scale:1.05},className:`text-sm font-medium transition-colors duration-300 hover:underline ${n?"text-slate-400 hover:text-glow-purple":"text-slate-600 hover:text-purple-600"}`,children:r.name},r.name))}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-xs transition-colors text-slate-500",children:"Powered by AI"}),l.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${n?"bg-glow-purple":"bg-purple-500"}`})]})]}),l.jsx("div",{className:`mt-6 pt-6 border-t text-center ${n?"border-slate-800/50":"border-slate-200/50"}`,children:l.jsx("p",{className:"text-xs transition-colors text-slate-500",children:"Built with advanced AI to navigate the information age with confidence and clarity."})})]})})},j_=({variant:n="cubes",intensity:e="medium"})=>{const r=C.useRef(null),{isDark:i}=fe(),a=C.useRef(),[s,o]=C.useState(!1);return C.useEffect(()=>{(()=>{const u=window.matchMedia("(prefers-reduced-motion: reduce)").matches,d=navigator.deviceMemory,h=d&&d<4,p=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);o(u||h||p&&e==="high")})()},[e]),C.useEffect(()=>{const c=r.current;if(!c||s)return;const u=c.getContext("2d");if(!u)return;const d=()=>{c.width=window.innerWidth,c.height=window.innerHeight};d(),window.addEventListener("resize",d);const h=[];(()=>{const m=e==="low"?.5:e==="high"?2:1,x=Math.floor(c.width*c.height/(n==="cubes"?15e3:8e3)*m);h.length=0;for(let y=0;y<x;y++){const v=i?["rgba(59, 130, 246, 0.3)","rgba(139, 92, 246, 0.3)","rgba(236, 72, 153, 0.3)","rgba(6, 182, 212, 0.3)"]:["rgba(59, 130, 246, 0.2)","rgba(139, 92, 246, 0.2)","rgba(236, 72, 153, 0.2)","rgba(6, 182, 212, 0.2)"];h.push({x:Math.random()*c.width,y:Math.random()*c.height,size:Math.random()*(n==="cubes"?8:3)+(n==="cubes"?4:1),speed:Math.random()*.5+.1,opacity:Math.random()*.6+.2,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.02,color:v[Math.floor(Math.random()*v.length)],pulse:Math.random()*Math.PI*2,pulseSpeed:Math.random()*.02+.01})}})();const f=()=>{if(u.clearRect(0,0,c.width,c.height),h.forEach(m=>{m.y+=m.speed,m.rotation+=m.rotationSpeed,m.pulse+=m.pulseSpeed;const x=m.opacity*(.5+.5*Math.sin(m.pulse));if(m.y>c.height+m.size&&(m.y=-m.size,m.x=Math.random()*c.width),u.save(),u.translate(m.x,m.y),u.rotate(m.rotation),u.globalAlpha=x,n==="cubes"){const y=u.createRadialGradient(0,0,0,0,0,m.size);y.addColorStop(0,m.color),y.addColorStop(1,"transparent"),u.fillStyle=y,u.fillRect(-m.size/2,-m.size/2,m.size,m.size),u.shadowBlur=10,u.shadowColor=m.color,u.strokeStyle=m.color,u.lineWidth=.5,u.strokeRect(-m.size/2,-m.size/2,m.size,m.size)}else u.beginPath(),u.arc(0,0,m.size,0,Math.PI*2),u.fillStyle=m.color,u.fill(),m.size>2&&(u.beginPath(),u.arc(0,0,m.size*2,0,Math.PI*2),u.fillStyle=m.color.replace(/0\.\d+/,"0.1"),u.fill());u.restore()}),n==="cubes"&&i){const m=u.createRadialGradient(c.width*.3,c.height*.3,0,c.width*.3,c.height*.3,c.width*.5);m.addColorStop(0,"rgba(139, 92, 246, 0.02)"),m.addColorStop(.5,"rgba(236, 72, 153, 0.01)"),m.addColorStop(1,"rgba(59, 130, 246, 0.005)"),u.fillStyle=m,u.fillRect(0,0,c.width,c.height)}a.current=requestAnimationFrame(f)};return f(),()=>{window.removeEventListener("resize",d),a.current&&cancelAnimationFrame(a.current)}},[i,n,e,s]),s?l.jsx("div",{className:`fixed inset-0 pointer-events-none transition-colors duration-1000 ${i?"bg-black":"bg-white"}`,style:{zIndex:1}}):l.jsx("canvas",{ref:r,className:`fixed inset-0 pointer-events-none transition-opacity duration-1000 ${i?"opacity-100":"opacity-30"}`,style:{zIndex:1}})};function k_(){return l.jsx(Jd,{children:l.jsx(zm,{children:l.jsx(Wd,{children:l.jsxs("div",{className:"min-h-screen transition-colors duration-300 flex flex-col relative",children:[l.jsx(j_,{variant:"cubes",intensity:"medium"}),l.jsx(w_,{}),l.jsx("main",{className:"flex-1 relative z-10",children:l.jsxs(zd,{children:[l.jsx(Pe,{path:"/",element:l.jsx(Xd,{})}),l.jsx(Pe,{path:"/globalThis-pulse",element:l.jsx(kf,{})}),l.jsx(Pe,{path:"/insight-engine",element:l.jsx(vm,{})}),l.jsx(Pe,{path:"/discover",element:l.jsx(Mm,{})}),l.jsx(Pe,{path:"/chat",element:l.jsx(Um,{})}),l.jsx(Pe,{path:"/settings",element:l.jsx(Bm,{})}),l.jsx(Pe,{path:"/trending",element:l.jsx(Lo,{})}),l.jsx(Pe,{path:"/live",element:l.jsx(Lo,{})}),l.jsx(Pe,{path:"/article/:id",element:l.jsx(qm,{})}),l.jsx(Pe,{path:"/summary/:id",element:l.jsx(Hm,{})}),l.jsx(Pe,{path:"/event/:slug",element:l.jsx(m_,{})})]})}),l.jsx(__,{})]})})})})}Go(document.getElementById("root")).render(l.jsx(C.StrictMode,{children:l.jsx(k_,{})}));
